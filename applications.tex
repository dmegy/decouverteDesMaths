\chapter{Applications}


%Mettre plutôt trop de vocabulaire que pas assez : sections, rétractions, fibres etc.

\section{Applications, graphes}

\begin{definition}[Graphe d'application]
Soient $E$ et $F$ deux ensembles, et $\Gamma \subseteq E\times F$. On dit que $\Gamma$ est un \emph{graphe d'application de $E$ dans $F$} si la condition suivante est vérifiée:
\[\forall x\in E, \: \exists! y\in F, \: (x,y) \in \Gamma.\]
\end{definition}

\begin{exemple}[Application directe de la définition]
\begin{enumerate}
\item Si $E = \{1,2,3\}$ et $F = \{1,4\}$, alors l'ensemble $\Gamma = \{(1,4),(2,1),(3,1)\} \subseteq E\times F$ est un graphe d'application.

L'ensemble $\Gamma' = \{(1,1),(2,4)\} \subseteq E\times F$ n'est pas un graphe d'application.

L'ensemble $\Gamma'' = \{(1,1),(2,1),(2,4),(3,4)\} \subseteq E\times F$ non plus.
\item Si $E = F = \R$, l'ensemble $\Gamma = \{x,y)\in \R^2 \:\mid\: y=x^2\}$ est un graphe d'application, mais pas l'ensemble $\Gamma' = \{x,y)\in \R^2 :\mid\: x=y^2\}$. Par contre, si $E=F=(\R_+)^2$, l'ensemble  $\Gamma'' = \{x,y)\in (\R_+)^2 :\mid\: x=y^2\}$ est un graphe d'application de $E$ dans $F$.
\item Pour un sous-ensemble $\Gamma\subseteq E\times F$, être un graphe d'application de $E$ dans $F$ ne dépend pas que de l'ensemble $\Gamma$ lui-même mais aussi de $E$ et de $F$. Par exemple, si $E=\R_+$ et $F=\R_+$, alors $\Gamma = \{(x,y)\in \R_+\times \R_+ \:\mid\: x=y^2\}$ est un graphe d'application de $E$ dans $F$. Par contre, si $E=\R$ et $F=\R_+$, l'ensemble $\{(x,y)\in \R\times \R_+ \:\mid\: x=y^2\}$ (c'est le même que le précédent : les éléments sont les mêmes) n'est \emph{pas} un graphe d'application de $E$ dans $F$.
\end{enumerate}
\end{exemple}

\begin{definition}[Applications/fonction entre ensembles]
\index{application}\index{fonction}\index{domaine}\index{codomaine}\index{graphe}\index{image!d'un élément}
Une \emph{application} ou \emph{fonction} (dans ce cours, les deux mots sont synonymes) $f$ est la donnée de trois objets:
\begin{enumerate}
\item un ensemble $E$, appelé le \emph{domaine} de $f$;
\item un ensemble $F$, appelé le \emph{codomaine} de $f$;
\item une partie $\Gamma_f \subseteq E\times F$, appelée le \emph{graphe de $f$} qui est un \emph{graphe d'application} au sens de la définition précédente. 
\end{enumerate}
Ceci revient à donner $E$, $F$, et pour tout élément $x \in E$, un élément (unique) $y\in F$, appelé l'\emph{image de $x$ par $f$}. Cet élément est noté $f(x)$.
\end{definition}

Deux fonctions sont égales si elles ont même domaine et codomaine, et si les images des éléments sont les mêmes. (Et il n'est pas suffisant de demander que les images soient les mêmes.)

\begin{definition}[Image d'une application]\index{image!d'une application}
Soit $f : E\to F$. L'\emph{image} de $f$ est l'ensemble de toutes les images des éléments de $E$ par $f$:
\[
\{f(x)\:\mid\: x\in E\}
\]
\end{definition}

\begin{remarque}
\begin{enumerate}
\item Si $f$ est une application de $\R$ dans $\R$, ce que l'on appelle souvent une \og représentation graphique de $f$\fg{} est en fait une représentation graphique de son graphe. La représentation graphique n'est pas unique (l'échelle peut varier, on ne représente en général pas le domaine ni le codomaine en entier mais seulement une partie, etc) mais le graphe, lui, est un objet mathématique abstrait et unique.
\item Une fonction ne peut pas être uniquement définie par son graphe : la donnée du domaine et du codomaine sont nécessaires.
\item \index{application vide}\index{zérologie} (Zérologie : application vide) Soit $E = \varnothing$ et $F$ un ensemble. Il existe une (unique) application de $E$ dans $F$, appelée \emph{application vide}, celle dont le graphe $\Gamma$ est la partie vide de $E\times F = \varnothing$. (Si $E=\varnothing$,  l'assertion \og $\forall x\in E, \exists! y\in F,\: (x,y)\in \Gamma$\fg{} est effectivement vraie même si $\Gamma$ est vide et donc $\Gamma$ est bien un graphe d'application.)
\end{enumerate}
\end{remarque}

Pour définir une fonction de $E$ dans $F$, on écrit \og Soit $f : E\to F$ une fonction\fg. Pour définir une fonction particuière, plutôt que donner son graphe comme le demanderait la définition, on utilise le symbole \og$\mapsto$\fg{} qui se lit \og est envoyé sur / s'envoie sur / est associé à \fg{} comme dans l'exemple suivant:
\[
\text{ Soit } f :\Z \to \R,\: n\mapsto \sqrt{n^2+n+1}.
\]
Ceci se lit par exemple \og Soit $f$ l'application de $\Z$ dans $\R$ qui à (un entier relatif) $n$ associe (le réel) $\sqrt{n^2+n+1}$\fg.


(Dans cet exemple, on devrait auparavant justifier que l'expression sous le radical désigne bien un réel positif, c'est bien le cas : exercice.)

On rencontre également la mise en forme du type suivant:
\[
\text{ Soit } f :\begin{cases}\Z \to \R,\\ n\mapsto \sqrt{n^2+n+1}.\end{cases}
\]
\begin{definition}
Soient $E$ et $F$ des ensembles. L'ensemble des fonctions de $E$ dans $F$ est noté $\mathcal F(E,F)$ ou bien $F^E$ (attention à l'ordre dans la seconde notation).
\end{definition}

\begin{remarque} Un graphe de fonction n'est pas forcément défini par une formule simple du type $y=\sin(x)$, ou $y=x^2+e^x$. Par exemple, on peut utiliser plusieurs formules suivant l'endroit du domaine où se trouve la variable :
\[ f: 
\R \to \R, 
x\mapsto \begin{cases}\sqrt{x}\text{ si }x\geq 0\\ x^2+x+e^x\text{ sinon.}\end{cases}\]
%Il existe des fonctions pouvant paraître encore plus inhabituelles, par exemple:
%\[ f: 
%\R \to \R, 
%x\mapsto \begin{cases}e^x\text{ si } x\not\in\Q}\\ \text{si $x \in \Q$, le dénominateur (positif) $q$ de la fraction irréductible $\frac{p}{q}$ représentant $x$}\end{cases}\]
%Une fonction n'a pas de raison d'être continue, dérivable etc.
\end{remarque}

\begin{definition}[Antécédents d'un élément]
Soit $f : E\to F$ une fonction, et $y\in F$. On dit qu'un élément $x\in E$ est un \emph{antécédent} de $y$ si $f(x)=y$. En reformulant, l'ensemble des antécédents de $y$ est donc l'ensemble des solutions de l'équation $f(x)=y$, d'inconnue $x\in E$.
\end{definition}

\begin{exemple} Un élément du codomaine peut ne pas avoir d'antécédents, ou en avoir plusieurs. Par exemple, si $f : \R\to \R, x\mapsto x^2$, alors l'élément $-1$ n'a aucun antécédent (il n'existe pas de $x\in \R$ tel que $f(x)=x^2=-1$). L'élément $0$ a exactement un antécédent ($0$), et l'élément $4$ a deux antécédents : $2$ et $-2$.
\end{exemple}

\begin{definition}[Fonction caractéristique]
Soit $E$ un ensemble et $A\in \mathcal P(E)$ une partie de $E$. La \emph{fonction caractéristique} de $A$ (sous-entendu, dans $E$) est la fonction 
\[
\operatorname{1}_A :\begin{cases}E \to \{0,1\},\\ x\mapsto \begin{cases}1&\text{ si } x\in A\\0&\text{ si } x\not\in A\end{cases}\end{cases}
\]
\end{definition}

%----------------------------------
\section{Composition}

\begin{definition}[Composition]
\index{composition de deux applications}
Soit $f : X\to Y$ et $g : Y\to Z$ deux fonctions. La composée de $g$ et de $f$ est la fonction $g\circ f$ (se lit \og $g$ rond $f$\fg) de $X$ dans $Z$ qui à $x\in X$ associe $g(f(x)) \in Z$. Autrement dit, par définition, $(g\circ f)(x) = g(f(x))$.

Une composition d'applications se visualise à l'aide du diagramme\index{diagramme} suivant (attention à l'ordre : appliquer la fonction $g\circ f$ consiste à appliquer $f$ \emph{suivie} de $g$):
\[
\xymatrix{
X \ar[r]_{f} \ar@/^1pc/[rr]^{g\circ f}& Y \ar[r]_{g}& Z
}
\]
\end{definition}

Plus généralement, pour pouvoir composer deux fonctions il est suffisant que le codomaine de la première fonction (dans l'ordre de la composition) soit inclus dans le domaine de la seconde. (Cette condition est bien sûr également nécessaire, autrement l'écriture $g(f(x))$ n'a pas de sens. Deux fonctions quelconques ne sont donc en général pas composables.)

\begin{remarque}[Factorisation d'une application comme composée d'autres applications]
\'Ecrire une application $f$ sous la forme d'une composition $f = g\circ h$, c'est la \emph{factoriser}. Plusieurs factorisations sont possibles. Par exemple, si $f : \R\to \R, x\mapsto x^2+1$, on peut écrire $f : g\circ h$, avec
\[
h : \R\to \R, x\mapsto x^2 
\text{ et }
g : \R\to \R, x\mapsto x+1.
\]
\end{remarque}

\begin{remarque} Attention, même si les domaines et codomaines permettent de composer deux fonctions dans les deux sens, les fonctions $g\circ f$ et $g\circ f$ obtenues sont en général disctinctes. Par exemple, avec $f : \R\to R, x\mapsto x^2
$ et $g : \R\to \R, x\mapsto x+1$,  on peut composer dans les deux sens mais on a :
\begin{align*}
g\circ f : \R\to \R, & x\mapsto g(f(x)) = g(x^2) = x^2+1,\\
f\circ g : \R\to \R, & x\mapsto f(g(x)) = f(x+1) = (x+1)^2 = x^2+2x+1.
\end{align*}
\end{remarque}


\begin{proposition}[\og La composition est associative\fg]
\index{associative (composition)}
Soient $f : X\to Y$, $g : Y\to Z$, $h  : Z\to T$ des fonctions. Alors $h\circ (g\circ f) = (h\circ g)\circ f$. Cette fonction est notée $h\circ g\circ f$.

Ce résultat se visualise à l'aide du diagramme\index{diagramme}:
\[
\xymatrix{
X \ar[r]_{f} \ar@/^1pc/[rr]^{g\circ f} \ar[r]_{f} \ar@/^3pc/[rrr]^{h\circ (g\circ f)} \ar@/_3pc/[rrr]_{(h\circ g) \circ f}& Y \ar[r]_{g} \ar@/_1.2pc/[rr]_{h\circ g} & Z \ar[r]^{h} & T
}
\]

\end{proposition}
\begin{proof}
Les domaines et codomaines sont les mêmes ($X$ et $T$), et si $x\in X$, on a 
\[ \left(h\circ (g\circ f)\right) (x) = h((g\circ f)(x)) = h(g(f(x)) \text{ et } \]
\[ \left( (h\circ g)\circ f \right) (x) = (h \circ g)(f(x)) = h(g(f(x))\quad \]
d'où l'égalité des deux fonctions.
\end{proof}

\begin{definition}[Fonction identité]
Soit $E$ un ensemble. La fonction identité sur $E$ est la fonction $\Id_E : E\to E, x\mapsto x$.
\end{definition}

\begin{remarque}
\begin{enumerate}
\item Ne pas confondre la fonction identité avec une fonction constante.
\item Si $\phi = E\to F$, alors $\phi = \phi\circ \Id_E = \Id_F\circ \phi$.
\end{enumerate}
\end{remarque}

\begin{definition}[diagramme]
\index{diagramme}
Lorsque l'on est en présence de plusieurs ensembles et de plusieurs applications entre ces ensembles, il est classique de visualiser la situation à l'aide d'un diagramme. Un diagramme (d'applications entre ensembles) est un graphe dont chaque sommet représente un ensemble et chaque arête (orientée) représente une application.

Par exemple, étant donnés des ensembles $A$, $B$, $C$ et $D$ et des applications $f : A\to B$, $g : A\to C$, $h : D\to A$, $\phi : D\to C$, $\psi : B\to A$, on peut représenter la situation à l'aide du diagramme suivant:
\[
\xymatrix{
A \ar@/^1pc/[r]^{f} \ar[d]_{g} & B \ar@/^/[l]_{\psi}\\
C & D \ar[ul]^{h} \ar[l]^{\phi}
}
\]
\end{definition}



%---------------------------------
\section{Applications réciproques, sections et rétractions}



\begin{definition}[Fonction réciproque]
\index{réciproque (fonction)}
Soient $f : E\to F$ et $g = F\to E$ deux fonctions. On dit qu'elles sont réciproques l'une de l'autre (ou que $g$ est une réciproque de $f$, ou que $f$ est une réciproque de $g$) si $g\circ f = \Id_E$ \underline{et} $f\circ g = \Id_F$. 
\[
\xymatrix{
 E \ar@(dl,ul)^{\Id_E} \ar@/^2pc/[rrr]^{f} \ar@(ur,dr)^{g\circ f} 
& & & 
\ar@/^2pc/[lll]^{g} \ar@(dl,ul)^{f\circ g} F \ar@(ur,dr)^{\Id_F}
}
\]
\end{definition}



Attention, une fonction $f$ n'a pas toujours de fonction réciproque.

\begin{proposition} Soit $f : E\to F$ une fonction. Si elle admet une (fonction) réciproque, alors celle-ci est unique. Elle est notée généralement $f^{-1}$.
\end{proposition}

\textbf{Attention}, on ne doit pas utiliser la notation $f^{-1}$ avant d'avoir démontré que la fonction admet effectivement une réciproque.

\begin{proof}
Soient en effet $g = F\to E$ et $h : F \to E$ deux réciproques de $f$. Alors
\[
g\circ  f \circ h = (g\circ f) \circ h = \Id_E \circ h = h, \text{ et}
\]
\[
g\circ  f \circ h = g\circ (f \circ h) = g \circ \Id_F = g
\]
d'où $g=h$.
\end{proof}

\begin{exemple}
Les fonctions $f = \R\to \R_+^*, x\mapsto e^x$ et $g : \R_+^*\to R, x\mapsto \ln(x)$ sont réciproques l'une de l'autre.
\end{exemple}

\begin{remarque}
Dans la définition de réciproque, les conditions $g\circ f = \Id_E$ et  $f\circ g = \Id_F$ sont toutes les deux nécessaires : il est en effet possible que l'une soit vérifiée et pas l'autre. Par exemple, les fonctions 
\[
f : \R_+\to \R, x\mapsto \sqrt x
\quad \text{ et }\quad
g : \R\to \R_+, x\mapsto x^2
\]
vérifient $g\circ f=\Id_{\R_+}$, mais $f\circ g \neq \Id_{\R}$ : en effet, on a $(f\circ g)(x)=\sqrt{x^2}=|x|\neq x$.

Dans ce type de cas, on n'est pas en présence de fonctions réciproques mais la situation porte tout de même un nom. C'est l'objet de la définition suivante.
\end{remarque}

\begin{definition}[Rétraction/inverse à gauche, section/inverse à droite]
Soit $f : E\to F$ une fonction.
\begin{enumerate}
\item Une \emph{rétraction} (ou \emph{inverse à gauche}) de $f$, est une fonction $r:F\to E$ telle que $r\circ f = \Id_E$.
\item Une \emph{section} (ou \emph{inverse à droite}) de $f$, est une fonction $s:F\to E$ telle que $f \circ s = \Id_F$.
\end{enumerate}
\end{definition}

\begin{exemple}
Soit $f = \R\to \R_+, x\mapsto x^2$. Alors les fonctions $s_1 : \R_+\to \R, x\mapsto \sqrt x$ et $s_2 : \R_+\to \R, x\mapsto -\sqrt x$ sont deux sections (inverses à droite) distinctes de $f$ (on a bien $f\circ s_1 = \Id_{\R^+}$ et $f\circ s_2 = \Id_{\R^+}$). 
Par ailleurs, $f$ est une rétraction de $s_1$ et de $s_2$. (Voir remarque ci-dessous.)
%Soit $f : \{1,2\} \to \{3,4,5\}$ définie par $f(1)=3$ et $f(2)=5$. La fonction $g : \{3,4,5\}\to\{1,2\}$ telle que $g(3)=1$, $g(4)=2$ et $g(5)=2$ est une rétraction de $f$.  Par ailleurs, la fonction $f$ est une section de $g$ (voir remarque plus bas).

\end{exemple}

\begin{remarque}
\begin{enumerate}
\item Une fonction $g$ est une rétraction de $f$ si et seulement si $f$ est une section de $g$ puisque les deux assertions signifient $g\circ f = \Id_E$ : les deux notions sont \og duales\fg.
\item Les sections et rétractions, lorsqu'elles existent, ne sont en général pas uniques (contrairement à la fonction réciproque qui est unique si elle existe).
\item Une fonction réciproque est à la fois une rétraction et une section (ou : à la fois un inverse à gauche et un inverse à droite).
\item De même que toutes les fonctions n'ont pas forcément de réciproque, toutes les fonctions n'admettent pas forcément une section ou une rétraction. Par exemple, $f : \R\to \R, x\mapsto x^2$ n'admet ni section ni rétraction. 
\end{enumerate}
\end{remarque}

% autre exemple avec inverse à gauche / pas à droite ou l'inverse



%---------------------------------
\section{Restriction, prolongement, corestriction}
% corestriction plus tard, lorsqu'on aura vu l'image

\begin{definition}[Restriction]
\index{restriction d'une application}
Soit $f : E\to F$ et $A \in \mathcal P(E)$ une partie de $E$. La \emph{restriction} de $f$ à $A$, notée $f|_A$, est l'application de $A$ dans $F$ suivante:
\[
f|_A : A\to F, \: x\mapsto f(x)
\]
Attention, les fonctions $f|_A$ et $f$ doivent être considérées comme distinctes car leurs domaines sont distincts ($A$ au lieu de $E$).
\end{definition}

\begin{definition}[Prolongement]
Soient $E$ et $F$ des ensembles, $A\in \mathcal P(E)$ une partie de $E$ et $f : A\to F$ une fonction. On dit qu'une application $g : E\to F$ est un \emph{prolongement} de $f$ si $g|_A = f$.
\end{definition}

Attention, il existe en général plusieurs prolongements possibles d'une même fonction et même si la fonction $f$ est donnée par une formule, un prolongement n'a aucune raison d'être défini par la même formule hors du domaine originel de $f$. Par exemple, si $f : \R_+^* \to \R, x\mapsto e^x$, alors les fonctions suivantes  sont des prolongements de $f$ (à divers domaines):
\[g : \R^* \to \R, x\mapsto \begin{cases}e^x\text{ si } x>0\\ \sin(x) \text{ si } x<0\end{cases},\]
\[h : \R_+ \to \R, x\mapsto \begin{cases}e^x\text{ si } x>0\\ 10 \text{ si }x=0\end{cases}.\]
(Un prolongement ne doit pas non plus être forcément continu ni dérivable, etc.)


\begin{definition}[Corestriction]\index{corestriction}
Soit $f : E\to F$, et $B$ une partie de $F$ contenant toutes les images des éléments de $E$ (autrement dit, $\forall x\in E, f(x)\in B$).
La \emph{corestriction} de $f$ à $B$ est l'application de domaine $E$, codomaine $B$ et de même graphe que $f$, autrement dit c'est l'application 
\[ g : E\to B, x\mapsto f(x).\]
\end{definition}

\begin{exemple}
Soit $f : \R\to \R, x\mapsto x^2$. On peut la corestrindre à $[-3,+\infty[$ car cette partie de $\R$ contient toutes les images de $f$. La corestriction de $f$ à $[-3,+\infty[$ est $g : \R\to [-3,+\infty[, x\mapsto x^2$.
\end{exemple}




%---------------------------------
\section{Fonctions injectives et surjectives}



\begin{definition}[Fonction injective]
\index{injection}
Soient $A$ et $B$ deux ensembles, et $f : A \to B$ une application. On dit que $f$ est \emph{injective} (ou que c'est une \emph{injection}) si
\[\forall (x,y) \in A^2,\quad f(x)=f(y) \Rightarrow  x=y,\]
autrement dit si (contraposée) 
\[\forall (x,y) \in A^2,\quad x\neq y \Rightarrow  f(x)\neq f(y),\]
autrement dit si deux éléments distincts ont toujours des images distinctes. On dit aussi que $f$ \og sépare les points\fg.
\end{definition}

\begin{definition}[Fonction surjective]
\index{surjection}
On dit que $f$ est \emph{surjective} (ou que c'est une \emph{surjection}) si
\[\forall b \in B,\quad \exists a\in A / f(a)=b,\]
autrement dit tout élément $b\in B$ a (au moins) un antécédent par $f$.
\end{definition}

\begin{definition}[Fonction bijective]
\index{bijection}
On dit que $f$ est bijective si elle est injective et surjective.
\end{definition}

\begin{exemple}
\begin{enumerate}
\item La fonction identité (d'un ensemble $E$ dans lui-même) est bijective.
\item La fonction $f : \R \to \R, x\mapsto x^2$ n'est ni injective, ni surjective. Elle n'est pas injective car bien que $1$ soit différent de $-1$, ils ont la même image. Elle n'est pas surjective car $-2$ n'a pas d'antécédent dans $\R$ : on ne peut pas trouver de réel $x$ tel que $x^2 = -2$.
\item La corestriction de $f$ à $\R_+$ est $g : \R \to \R_+, x\mapsto x^2$. Elle n'est pas injective pour les mêmes raisons que $f$, mais elle est surjective : le codomaine est cette fois $\R_+$, et tout nombre réel positif $y\geq 0$ a au moins un antécédent, par exemple $-\sqrt{y}$.
\item La restriction de $g$ à $\R_+$ est $h : \R_+ \to \R_+, x\mapsto x^2$. Elle est injective et surjective, donc bijective. Elle est injective car si $x$ et $y$ sont des réels positifs ayant même carré, ils sont forcément égaux (ils sont positifs donc il n'y a pas l'ambiguité de signe). Sa surjectivité ne découle pas de celle de $g$ car le domaine a été restreint : elle est surjective car tout nombre réel positif $y\geq 0$ a au moins un antécédent \emph{dans $\R_+$}, à savoir $\sqrt{y}$.
\item (Zérologie)\index{zérologie} L'unique fonction de $\varnothing$ dans $\varnothing$ est bijective. La fonction vide de $\varnothing$ dans n'importe quel ensemble est toujours injective.
\end{enumerate}
\end{exemple}

En général, la surjectivité est plus difficile à montrer que l'injectivité, car il faut résoudre une équation à paramètre : l'équation $f(x)=y$, de paramètre $y$, et d'inconnue $x$, et ce pour tous les paramètres $y$. La non surjectivité est en revanche souvent plus facile à montrer, il suffit de trouver un élément qui n'a pas d'antécédent, en général cela se voit (éventuellement après un petit calcul / majoration / développement d'expression).

\begin{remarque}
Si $f : A\to B$ est injective, alors on peut parfois \og identifier\fg{} $A$ à un sous-ensemble de $B$ grâce à $f$ : un élément $a \in A$ est identifié à $f(a) \in B$. \textbf{Attention}, cette façon d'identifier $A$ à une partie de $B$ dépend de $f$ et il existe en général plusieurs injections de $A$ dans $B$, donc le choix de l'injection n'est pas anodin, ni canonique en général.
\end{remarque}



\begin{proposition}
\label{bijective_admet_reciproque}
Soit $f : E\to F$.
\begin{enumerate}
\item Si elle est surjective, elle admet une section.
\item Si elle est injective, elle admet une rétraction.
\item Si elle est bijective, elle admet une réciproque.
\end{enumerate}
\end{proposition}
\begin{proof}\index{section}
\begin{enumerate}
\item  Pour tout $y\in F$, on choisit un antécédent de $y$ par $f$, que l'on note $x_y$. On définit alors une fonction $g : F\to E$ par $g(y)=x_y$. Par construction, on a $f\circ g = \Id_F$ donc $g$ est une section de $f$.
\item À tout $y\in F$ on associe soit son unique antécédent s'il en existe un, soit un élément de $E$ arbitraire dans le cas contraire. Ceci définit une fonction $g : F\to E$ et par construction on a $g\circ f=\Id_E$.
\item D'une part, comme $f$ est surjective, elle admet (d'après le premier point) une section $s$, qui vérifie donc $f\circ s = \Id_F$. Montrons  que $s\circ f = \Id_E$. Soit $x\in E$ et soit $a = (s\circ f)(x)$. Alors $f(a) = (f\circ s \circ f) (x) = ((f\circ s)\circ f)(x) = f(x)$ et comme $f$ est injective, $a=x$ c'est-à-dire $(s\circ f)(x) = x$. Donc $s\circ f=\Id_E$ et donc $s$ est la réciproque de $f$.
\item \emph{Preuve alternative du dernier point, en suivant le cheminement inverse.} D'une part, comme $f$ est injective, elle admet (d'après le second point) une rétraction $r$, qui vérifie donc $r\circ f=\Id_E$. Montrons  que $f\circ r = \Id_F$. Soit $y\in F$. Comme $f$ est surjective, considérons $x$ un antécédent de $y$. Alors, $(f\circ r)(y) = (f\circ r)(f(x)) =(f\circ (r \circ f)(x) = (f\circ \Id_E)(x) = f(x) = y$. D'où $f\circ r = \Id_F$ et donc $r$ est la réciproque de $f$.
\end{enumerate}
\end{proof}

\begin{proposition}[Stabilité à la composition de l'injectivité et de la surjectivité]
Soient $f : E\to F$ et $g : F\to G$ deux fonctions.
\begin{enumerate}
\item Si $f$ et $g$ sont injectives, alors $g\circ f$ l'est également.
\item Si $f$ et $g$ sont surjectives, alors $g\circ f$ l'est également.
\item Si $f$ et $g$ sont bijectives, alors $g\circ f$ l'est également.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Soient $x, y \in E$ tels que $(g\circ f)(x) = (g\circ f)(y) $, c'est-à-dire tels que $g(f(x))=g(f(y))$. Comme $g$ est injective, on a $f(x)=f(y)$. Comme $f$ est injective, on a alors $x=y$, ce qu'il fallait démontrer.
\item Soit $z\in G$. Comme $g$ est surjective, $z$ possède un antécédent par $g$ c'est-à-dire qu'il existe $y\in F$ tel que $g(y)=z$. Ensuite, comme $f$ est surjective, $y$ possède un antécédent par $f$, c'est-à-dire qu'il existe $x\in E$ tel que $f(x)=y$. On a alors $g(f(x)) = g(y)=z$, donc $x$ est un antécédent de $z$ par $g\circ f$. Ceci montre que tout élément de $G$ possède un antécédent par $g\circ f$, donc que $g\circ f$ est surjective.
\item Il suffit d'appliquer les deux premiers points.
\end{enumerate}
\end{proof}

\begin{proposition}[réciproques partielles]
Soient $f : E\to F$ et $g : F\to G$ deux fonctions.
\begin{enumerate}
\item Si $g\circ f$ est injective, alors $f$ l'est également.
\item Si $g\circ f$ est surjective, alors $g$ l'est également.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Soient $x, y\in E$ tels que $f(x)=f(y)$. En appliquant $g$, il vient $g(f(x))=g(f(y))$. Comme $g\circ f$ est injective, $x=y$.
\item Soit $z\in G$. Comme $g\circ f$ est surjective, il existe $x\in E$ tel que $g(f(x))=z$. Posons $y = f(x)$. On a $g(y)=z$ donc $y$ est un antécédent de $z$ par $g$.
\end{enumerate}
\end{proof}

\begin{corollaire}
Soit $f : E\to F$ une application.
\begin{enumerate}
\item Elle admet une rétraction (inverse à gauche) ssi elle est injective.
\item Elle admet une section (inverse à droite) ssi elle est surjective.
\item Elle admet une fonction réciproque ssi elle est bijective.
\end{enumerate}
\end{corollaire}
\begin{proof}
Le sens \og si\fg{} a déjà été prouvé plus haut (prop. \ref{bijective_admet_reciproque}). Montrons le sens \og seulement si\fg.
\begin{enumerate}
\item Soit $r$ une rétraction de $f$. La composée $r\circ f = \Id_E$ est injective donc par la proposition précédente, $f$ est injective.
\item Soit $s$ une section de $f$. La composée $f \circ s= \Id_F$ est surjective donc par la proposition précédente, $f$ est surjective.
\item Une réciproque étant à la fois une section et une rétraction, on applique les deux points précédents.
\end{enumerate}
\end{proof}

\begin{remarque}
\textbf{Attention}, on peut avoir $g\circ f$ injective et $g$ non injective, et on peut aussi avoir $g\circ f$ surjective et $f$ non surjective. Considérons par exemple:
\[
f : \N\to \N, n\mapsto 2n
\quad \text{ et }\quad
g : \N\to \N, n\mapsto \lfloor n/2\rfloor.
\]
Alors $g\circ f = \Id_\N$ donc est bijective, mais $f$ n'est pas surjective et $g$ n'est pas injective.

On peut également considérer les fonctions
\[
f : \R_+\to \R, x\mapsto \sqrt x
\quad \text{ et }\quad
g : \R\to \R_+, x\mapsto x^2
\]
qui vérifient également $g\circ f=\Id_{\R_+}$ sans que $f$ soit surjective ni $g$ injective.
\end{remarque}



%--------------------------------------
\section{Images directes et réciproques de parties}

\begin{definition}[Image directe d'une partie]
\index{image!directe d'une partie}
Soit $f : E\to F$ et $A\subseteq E$. On appelle image directe de $A$ l'ensemble des images des éléments de $A$ :
\[f(A) = \{f(x)\:\mid\: x\in A\} = \{y\in F \:\mid\: \exists x\in A, y=f(x)\}.\]
Autrement dit, pour un élément $y\in F$, on a $y\in f(A) \iff \left(\exists x\in A, y=f(x)\right)$.
\end{definition}
\begin{definition}[Image réciproque d'une partie]
\index{image!réciproque d'une partie}
Soit $f : E\to F$ et $B\subseteq F$. On appelle image réciproque de $B$ l'ensemble de tous les antécédents d'éléments de $B$ :
\[f^{<-1>}(B) = \{x\in E\:\mid\: f(x)\in B \}.\]
Autrement dit, pour un élément $x\in E$, on a $x\in f^{<-1>}(B) \iff f(x)\in B$.

\textbf{Attention}, on voit très souvent la notation $f^{-1}(B)$ au lieu de $f^{<-1>}(B)$ mais cela peut prêter à confusion, la fonction $f$ n'ayant pas forcément de réciproque. Dans ce chapitre, on utilise la notation $f^{<-1>}(B)$, puis on utilisera progressivement la première.
\end{definition}

\begin{proposition}
Soit $f : E\to F$.
\begin{enumerate}
\item $f(\varnothing)=\varnothing$.
\item $f(E)\subseteq F$ avec égalité si et seulement si $f$ est surjective. En général, $f(E)\neq F$.
\item Si $(A_i)_{i\in I}$ est une famille de parties de $E$, alors $f\left(\bigcup_{i\in I}A_i\right) = \bigcup_{i\in I} f(A_i)$.
\item Par contre, on a en général $f\left(\bigcap_{i\in I}A_i\right) \subseteq \bigcap_{i\in I} f\left(A_i\right)$ mais pas forcément égalité.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Clair.
\item On a $f(E)=F \iff (\forall y\in F, y\in f(E))$ ce qui signifie par définition que tout élément $y\in F$ admet au moins un antécédent, et donc que $f$ est surjective.  
\item Soit $y\in F$. On a 
\begin{align*}
y\in f\left( \bigcup_{i\in I} A_i \right)
&\iff \exists x\in  \bigcup_{i\in I} A_i,   y=f(x) \\
&\iff \exists x\in E, \left( x\in \bigcup_{i\in I} A_i\text{ et }  y=f(x)\right)\\
&\iff \exists x\in E, \exists i\in I,  (x\in A_i\text{ et } y=f(x)) \\
&\boxed{\iff \exists i\in I, \exists x\in E}\:, (x\in A_i\text{ et } y=f(x))\\
&\iff \exists i\in I, \exists x\in A_i, y=f(x)\\
&\iff \exists i\in I, y\in f(A_i)\\
&\iff y\in \bigcup_{i\in I} f(A_i)
\end{align*}
L'interversion de quantificateur signalée est licite car ce sont deux quantificateurs existentiels.
\item On a:
\begin{align*}
y\in f\left( \bigcap_{i\in I} A_i \right)
&\iff \exists x\in  \bigcap_{i\in I} A_i,   y=f(x) \\
&\iff \exists x\in E, \left( x\in \bigcap_{i\in I} A_i\text{ et }  y=f(x)\right)\\
&\iff \exists x\in E, \forall i\in I,  (x\in A_i\text{ et } y=f(x)) \\
&\boxed{\implies \forall i\in I, \exists x\in E}\:, (x\in A_i\text{ et } y=f(x)) \quad(*)\\
&\implies \forall i\in I, \exists x\in A_i, y=f(x)\\
&\implies \forall i\in I, y\in f(A_i)\\
&\implies y\in \bigcap_{i\in I} f(A_i)
\end{align*}
L'interversion des quantificateurs  est licite \textbf{dans ce sens-là seulement : $\exists x \forall i ... \implies \forall i \exists x ...$}, et l'équivalence devient une implication. Ceci prouve l'inclusion. Pour montrer qu'il n'y a pas forcément égalité, il suffit de donner un contre-exemple, par exemple $\sin(\R_-^* \cap \R_+^*) = \sin(\varnothing) = \varnothing \subsetneq \sin(\R_+^*) \cap \sin(\R_-^*)=[-1,1]$.
\end{enumerate}
\end{proof}

\begin{proposition}
Soit $f : E\to F$.
\begin{enumerate}
\item $f^{<-1>}(\varnothing)=\varnothing$.
\item $f^{<-1>}(F)=E$.
\item Si $(B_i)_{i\in I}$ est une famille de parties de $F$, alors $f^{<-1>}\left(\bigcup_{i\in I}B_i\right) = \bigcup_{i\in I} f^{<-1>}(B_i)$, ainsi que $f^{<-1>}\left(\bigcap_{i\in I}B_i\right) = \bigcap_{i\in I} f^{<-1>}(B_i)$.
\end{enumerate}
\end{proposition}
\begin{proof} Exercice.
\end{proof}

En conclusion, l'image réciproque se comporte un peu mieux que l'image directe.

\begin{exercice}[Factorisation en surjection puis injection]
Montrer que toute application se factorise en une surjection suivie d'une injection. Autrement dit, montrer que pour toute fonction $f : E\to F$, il existe un ensemble $G$, et des fonctions $\phi : E\to G$ et $\psi : G\to F$ telles que $f = \psi\circ \phi$, avec $\phi$ surjective et $\psi$ injective.
\end{exercice}

\begin{exercice}[propriété du relèvement]
Soient $e : A\to B$ et $m : C\to D$ deux applications. On dit que $e$ est orthogonale (à gauche) à $m$ (ou que $m$ est orthogonale à droite à $e$), et on note $e\perp m$, si pour tout diagramme commutatif
\[
\xymatrix{
A \ar[r] \ar[d]_{e}& C\ar[d]^{m}\\
B \ar[r]& D 
},
\]
il existe un relèvement c'est-à-dire une application $r : B\to C$ faisant commuter le diagramme :
\[
\xymatrix{
A \ar[r] \ar[d]_{e}& C\ar[d]^{m}\\
B \ar[r]\ar[ur]^{r}& D 
}
\]
Montrer que si $e$ est surjective et $m$ est injective, alors $e\perp m$.
\end{exercice}


























