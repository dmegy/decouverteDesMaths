\chapter{Applications}


%Mettre plutôt trop de vocabulaire que pas assez : sections, rétractions, fibres etc.

\section{Applications, graphes}

\begin{definition}[Graphe d'application]
Soient $E$ et $F$ deux ensembles, et $\Gamma \subseteq E\times F$. On dit que $\Gamma$ est un \emph{graphe d'application de $E$ dans $F$} si la condition suivante est vérifiée:
\[\forall x\in E, \: \exists! y\in F, \: (x,y) \in \Gamma.\]
\end{definition}

\begin{exemple}[Application directe de la définition]
\begin{enumerate}
\item Si $E = \{1,2,3\}$ et $F = \{1,4\}$, alors l'ensemble $\Gamma = \{(1,4),(2,1),(3,1)\} \subseteq E\times F$ est un graphe d'application.

L'ensemble $\Gamma' = \{(1,1),(2,4)\} \subseteq E\times F$ n'est pas un graphe d'application.

L'ensemble $\Gamma'' = \{(1,1),(2,1),(2,4),(3,4)\} \subseteq E\times F$ non plus.
\item Si $E = F = \R$, l'ensemble $\Gamma = \{x,y)\in \R^2 \:\mid\: y=x^2\}$ est un graphe d'application, mais pas l'ensemble $\Gamma' = \{x,y)\in \R^2 :\mid\: x=y^2\}$. Par contre, si $E=F=(\R_+)^2$, l'ensemble  $\Gamma'' = \{x,y)\in (\R_+)^2 :\mid\: x=y^2\}$ est un graphe d'application de $E$ dans $F$.
\item Pour un sous-ensemble $\Gamma\subseteq E\times F$, être un graphe d'application de $E$ dans $F$ ne dépend pas que de l'ensemble $\Gamma$ lui-même mais aussi de $E$ et de $F$. Par exemple, si $E=\R_+$ et $F=\R_+$, alors $\Gamma = \{(x,y)\in \R_+\times \R_+ \:\mid\: x=y^2\}$ est un graphe d'application de $E$ dans $F$. Par contre, si $E=\R$ et $F=\R_+$, l'ensemble $\{(x,y)\in \R\times \R_+ \:\mid\: x=y^2\}$ (c'est le même que le précédent : les éléments sont les mêmes) n'est \emph{pas} un graphe d'application de $E$ dans $F$.
\end{enumerate}
\end{exemple}

\begin{definition}[Applications/fonction entre ensembles]
\index{application}\index{fonction}\index{domaine}\index{codomaine}\index{graphe}
Une \emph{application} ou \emph{fonction} (dans ce cours, les deux mots sont synonymes) $f$ est la donnée de trois objets:
\begin{enumerate}
\item un ensemble $E$, appelé le \emph{domaine} de $f$;
\item un ensemble $F$, appelé le \emph{codomaine} de $f$;
\item une partie $\Gamma_f \subseteq E\times F$, appelée le \emph{graphe de $f$} qui est un \emph{graphe d'application} au sens de la définition précédente. 
\end{enumerate}
Ceci revient à donner $E$, $F$, et pour tout élément $x \in E$, un élément (unique) $y\in F$, appelé l'image de $x$ par $f$. Cet élément est noté $f(x)$.
\end{definition}

Deux fonctions sont égales si elles ont même domaine et codomaine, et si les images des éléments sont les mêmes. (Et il n'est pas suffisant de demander que les images soient les mêmes.)

\begin{remarque}
\begin{enumerate}
\item Si $f$ est une application de $\R$ dans $\R$, ce que l'on appelle souvent une \og représentation graphique de $f$\fg{} est en fait une représentation graphique de son graphe. La représentation graphique n'est pas unique (l'échelle peut varier, on ne représente en général pas le domaine ni le codomaine en entier mais seulement une partie, etc) mais le graphe, lui, est un objet mathématique abstrait et unique.
\item Une fonction ne peut pas être uniquement définie par son graphe : la donnée du domaine et du codomaine sont nécessaires.
\end{enumerate}
\end{remarque}

Pour définir une fonction de $E$ dans $F$, on écrit \og Soit $f : E\to F$ une fonction\fg. Pour définir une fonction particuière, plutôt que donner son graphe comme le demanderait la définition, on utilise le symbole \og$\mapsto$\fg{} qui se lit \og est envoyé sur / s'envoie sur / est associé à \fg{} comme dans l'exemple suivant:
\[
\text{ Soit } f :\Z \to \R,\: n\mapsto \sqrt{n^2+n+1}.
\]
Ceci se lit par exemple \og Soit $f$ l'application de $\Z$ dans $\R$ qui à (un entier relatif) $n$ associe (le réel) $\sqrt{n^2+n+1}$\fg.


(Dans cet exemple, on devrait auparavant justifier que l'expression sous le radical désigne bien un réel positif, c'est bien le cas : exercice.)

On rencontre également la mise en forme du type suivant:
\[
\text{ Soit } f :\begin{cases}\Z \to \R,\\ n\mapsto \sqrt{n^2+n+1}.\end{cases}
\]
\begin{definition}
Soient $E$ et $F$ des ensembles. L'ensemble des fonctions de $E$ dans $F$ est noté $\mathcal F(E,F)$ ou bien $F^E$ (attention à l'ordre dans la seconde notation).
\end{definition}

\begin{remarque} Un graphe de fonction n'est pas forcément défini par une formule simple du type $y=\sin(x)$, ou $y=x^2+e^x$. Par exemple, on peut utiliser plusieurs formules suivant l'endroit du domaine où se trouve la variable :
\[ f: 
\R \to \R, 
x\mapsto \begin{cases}\sqrt{x}\text{ si }x\geq 0\\ x^2+x+e^x\text{ sinon.}\end{cases}\]
%Il existe des fonctions pouvant paraître encore plus inhabituelles, par exemple:
%\[ f: 
%\R \to \R, 
%x\mapsto \begin{cases}e^x\text{ si } x\not\in\Q}\\ \text{si $x \in \Q$, le dénominateur (positif) $q$ de la fraction irréductible $\frac{p}{q}$ représentant $x$}\end{cases}\]
%Une fonction n'a pas de raison d'être continue, dérivable etc.
\end{remarque}

\begin{definition}[Fonction caractéristique]
Soit $E$ un ensemble et $A\in \mathcal P(E)$ une partie de $E$. La \emph{fonction caractéristique} de $A$ (sous-entendu, dans $E$) est la fonction 
\[
\operatorname{1}_A :\begin{cases}E \to \{0,1\},\\ x\mapsto \begin{cases}1&\text{ si } x\in A\\0&\text{ si } x\not\in A\end{cases}\end{cases}
\]
\end{definition}

%----------------------------------
\section{Composition des fonctions}

\begin{definition}[Composition]
\index{composition de deux applications}
Soit $f : X\to Y$ et $g : Y\to Z$ deux fonctions. La fonction $g\circ f$ (\og $g$ rond $f$\fg) est la fonction de $X$ dans $Z$ qui à $x\in X$ associe $g(f(x)) \in Z$.
\end{definition}

Autrement dit, par définition, $(g\circ f)(x) = g(f(x))$.

\begin{proposition}[\og La composition est associative\fg]
\index{associative (composition)}
Soient $f : X\to Y$, $g : Y\to Z$, $h  : Z\to T$ des fonctions. Alors $h\circ (g\circ f) = (h\circ g)\circ f$. Cette fonction est notée $h\circ g\circ f$.
\end{proposition}
\begin{proof}
Les domaines et codomaines sont les mêmes ($X$ et $T$), et si $x\in X$, on a 
\[ \left(h\circ (g\circ f)\right) (x) = h((g\circ f)(x)) = h(g(f(x)) \text{ et } \]
\[ \left( (h\circ g)\circ f \right) (x) = (h \circ g)(f(x)) = h(g(f(x))\quad \]
d'où l'égalité des deux fonctions.
\end{proof}

\begin{definition}[Fonction identité]
Soit $E$ un ensemble. La fonction identité sur $E$ est la fonction $\Id_E : E\to E, x\mapsto x$.
\end{definition}

\begin{remarque}
\begin{enumerate}
\item Ne pas confondre la fonction identité avec une fonction constante.
\item Si $\phi = E\to F$, alors $\phi = \phi\circ \Id_E = \Id_F\circ \phi$.
\end{enumerate}
\end{remarque}

\begin{definition}[Fonction réciproque]
\index{réciproque (fonction)}
Soient $f : E\to F$ et $g = F\to E$ deux fonctions. On dit qu'elles sont réciproques l'une de l'autre (ou que $g$ est une réciproque de $f$, ou que $f$ est une réciproque de $g$) si $g\circ f = \Id_E$ \underline{et} $f\circ g = \Id_F$. 
\end{definition}

Attention, une fonction $f$ n'a pas toujours de fonction réciproque.

\begin{proposition} Soit $f : E\to F$ une fonction. Si elle admet une (fonction) réciproque, alors celle-ci est unique.
\end{proposition}
\begin{proof}
Soient en effet $g = F\to E$ et $h : F \to E$ deux réciproques de $f$. Alors
\[
g\circ  f \circ h = (g\circ f) \circ h = \Id_E \circ h = h, \text{ et}
\]
\[
g\circ  f \circ h = g\circ (f \circ h) = g \circ \Id_F = g
\]
d'où $g=h$.
\end{proof}

\begin{exemple}
Les fonctions $f = \R\to \R_+^*, x\mapsto e^x$ et $g : \R_+^*\to R, x\mapsto \ln(x)$ sont réciproques l'une de l'autre.
\end{exemple}

% autre exemple avec inverse à gauche / pas à droite ou l'inverse

%---------------------------------
\section{Restriction, prolongement}
% corestriction plus tard, lorsqu'on aura vu l'image

\begin{definition}[Restriction]
\index{restriction d'une application}
Soit $f : E\to F$ et $A \in \mathcal P(E)$ une partie de $E$. La \emph{restriction} de $f$ à $A$, notée $f|_A$, est l'application de $A$ dans $F$ suivante:
\[
f|_A : A\to F, \: x\mapsto f(x)
\]
Attention, les fonctions $f|_A$ et $f$ doivent être considérées comme distinctes car leurs domaines sont distincts ($A$ au lieu de $E$).
\end{definition}

\begin{definition}[Prolongement]
Soient $E$ et $F$ des ensembles, $A\n \mathcal P(E)$ une partie de $E$ et $f : A\to F$ une fonction. On dit qu'une application $g : E\to F$ est un \emph{prolongement} de $f$ si $g|_A = f$.
\end{definition}

Attention, il existe en général plusieurs prolongements possibles d'une même fonction et même si la fonction $f$ est donnée par une formule, un prolongement n'a aucune raison d'être défini par la même formule hors du domaine originel de $f$. Par exemple, si $f : \R_+^* \to \R, x\mapsto e^x$, alors les fonctions suivantes  sont des prolongements de $f$ (à divers domaines):
\[g : \R^* \to \R, x\mapsto \begin{cases}e^x\text{ si } x>0\\ \sin(x) \text{ sinon}\end{cases},\]
\[h : \R_+ \to \R, x\mapsto \begin{cases}e^x\text{ si } x>0\\ 10 \text{ sinon}\end{cases}.\]
(Un prolongement ne doit pas non plus être forcément continu ni dérivable, etc.)

%---------------------------------
\section{Fonctions injectives et surjectives}



\begin{definition}Soient $A$ et $B$ deux ensembles, et $f : A \to B$ une application. On dit que $f$ est \underline{injective} si
\[\forall (x,y) \in A^2,\quad f(x)=f(y) \Rightarrow  x=y,\]
autrement dit si (contraposée) 
\[\forall (x,y) \in A^2,\quad x\neq y \Rightarrow  f(x)\neq f(y),\]
autrement dit si deux éléments distincts ont toujours des images distinctes. On dit aussi que $f$ \og sépare les points\fg.\end{definition}
\begin{definition}
On dit que $f$ est \underline{surjective} si
\[\forall b \in B,\quad \exists a\in A / f(a)=b,\]
autrement dit tout élément $b\in B$ a (au moins) un antécédent par $f$.
\end{definition}
\begin{definition}
On dit que $f$ est bijective si elle est injective et surjective.
\end{definition}

\begin{exemple}La fonction $f : \R \to \R, x\mapsto x^2$ n'est ni injective, ni surjective. Elle n'est pas injective car bien que $1$ soit différent de $-1$, ils ont la même image. Elle n'est pas surjective car $-2$ n'a pas d'antécédent dans $\R$ : on ne peut pas trouver de réel $x$ tel que $x^2 = -2$.\end{exemple}

\begin{exemple} La fonction $g : \R \to \R_+, x\mapsto x^2$ n'est pas injective pour les mêmes raisons que $f$, mais elle est surjective : l'ensemble d'arrivée est cette fois $\R_+$, et tout nombre réel positif $y\geq 0$ a au moins un antécédent, par exemple $-\sqrt{y}$.
\end{exemple}

\begin{exemple} La fonction $h : \R_+ \to \R_+, x\mapsto x^2$ est injective et surjective, donc bijective. Elle est surjective pour la même raison que $g$, elle est injective, car si $x$ et $y$ sont des réels positifs ayant même carré, ils sont forcément égaux (ils sont positifs donc il n'y a pas l'ambiguité de signe).
\end{exemple}

En général, la surjectivité est plus dure à montrer que l'injectivité, car il faut résoudre une équation à paramètre : l'équation $f(x)=y$, de paramètre $y$, et d'inconnue $x$, et ce pour tous les paramètres $y$. La non surjectivité est en revanche souvent plus facile à montrer, il suffit de trouver un élément qui n'a pas d'antécédent, en général ça se voit (éventuellement après un petit calcul / majoration / développement d'expression).
\begin{remarque} Si $f : A\to B$ est injective, alors on peut \og identifier\fg $A$ à un sous-ensemble de $B$ grâce à $f$ : un élément $a \in A$ est identifié à $f(a) \in B$. Cette identification n'est pas abusive grace à la propriété d'injectivité. La formulation correcte de cette identification est que $f$ induit une bijection de $A$ sur $f(A)$. Ceci n'est qu'une remarque.\end{remarque}


\section{Images et images réciproques de parties}