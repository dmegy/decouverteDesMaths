\chapter{Applications}
\minitoc
\hyperlink{toc}{\retourTOC}

% TODO : mettre exemple dans le plan, par exemple x^2+y^2, antécédents, applications linéaires (montrer surjectivité, injectivité)
% mettre des courbes paramétrées
% images réciproques et fibres <-> courbes de niveau ?



\section{Applications, graphes}

\emph{Résumé : applications, graphes, source, but, images, antécédents, ensemble des fonctions de $E$ dans $F$, fonction caractéristique, point fixe d'une application}

\begin{definition}[Graphe d'application]\label{def-graphe}
Soient $E$ et $F$ deux ensembles, et $\Gamma \subseteq E\times F$. On dit que $\Gamma$ est un \emph{graphe d'application de $E$ dans $F$} si la condition suivante est vérifiée:
\[\forall x\in E, \: \exists! y\in F, \: (x,y) \in \Gamma.\]
\end{definition}

\begin{exemple}[Application directe de la définition]
\begin{enumerate}
\item Si $E = \{1,2,3\}$ et $F = \{1,4\}$, alors l'ensemble $\Gamma = \{(1,4),(2,1),(3,1)\} \subseteq E\times F$ est un graphe d'application.

L'ensemble $\Gamma' = \{(1,1),(2,4)\} \subseteq E\times F$ n'est pas un graphe d'application.

L'ensemble $\Gamma'' = \{(1,1),(2,1),(2,4),(3,4)\} \subseteq E\times F$ non plus.
\item Si $E = F = \R$, l'ensemble $\Gamma = \{x,y)\in \R^2 \:\mid\: y=x^2\}$ est un graphe d'application, mais pas l'ensemble $\Gamma' = \{x,y)\in \R^2 :\mid\: x=y^2\}$. Par contre, si $E=F=(\R_+)^2$, l'ensemble  $\Gamma'' = \{x,y)\in (\R_+)^2 :\mid\: x=y^2\}$ est un graphe d'application de $E$ dans $F$.
\item Pour un sous-ensemble $\Gamma\subseteq E\times F$, être un graphe d'application de $E$ dans $F$ ne dépend pas que de l'ensemble $\Gamma$ lui-même mais aussi de $E$ et de $F$. Par exemple, si $E=\R_+$ et $F=\R_+$, alors $\Gamma = \{(x,y)\in \R_+\times \R_+ \:\mid\: x=y^2\}$ est un graphe d'application de $E$ dans $F$. Par contre, si $E=\R$ et $F=\R_+$, l'ensemble $\{(x,y)\in \R\times \R_+ \:\mid\: x=y^2\}$ (c'est le même que le précédent : les éléments sont les mêmes) n'est \emph{pas} un graphe d'application de $E$ dans $F$.
\end{enumerate}
\end{exemple}

\begin{definition}[Applications/fonction entre ensembles]
\index{application}\index{fonction}\index{domaine}\index{source}\index{codomaine}\index{but}\index{graphe}\index{image!d'un élément}
Une \emph{application} ou \emph{fonction} (dans ce cours, les deux mots sont synonymes) $f$ est la donnée de trois objets:
\begin{enumerate}
\item un ensemble $E$, appelé le \emph{domaine} ou la \emph{source}, ou encore l'\emph{ensemble de départ} de $f$;
\item un ensemble $F$, appelé le \emph{codomaine} ou le \emph{but} ou encore l'\emph{ensemble d'arrivée} de $f$;
\item une partie $\Gamma_f \subseteq E\times F$, appelée le \emph{graphe de $f$} qui est un \emph{graphe d'application} au sens de la définition précédente. 
\end{enumerate}
Ceci revient à donner $E$, $F$, et pour tout élément $x \in E$, un élément (unique) $y\in F$, appelé l'\emph{image de $x$ par $f$}. Cet élément est noté $f(x)$.
\end{definition}

\begin{attention}
Il existe des ouvrages où le mot \og fonction\fg{} a un sens légèrement différent, mais ce n'est \textbf{pas} la convention adoptée ici. Les deux mots désignent rigoureusement le même concept jusqu'à la fin du cours. En particulier, le fameux \og domaine de définition d'une fonction\fg{} (terminologie du lycée, que l'on ne croisera bientôt plus) est ici toujours ...  son domaine tout entier : une fonction est par définition bien définie sur son domaine. La question de savoir si une expression est bien définie peut demeurer, mais doit être résolue \emph{avant} de définit une fonction à l'aide de cette expression.
\end{attention}

Deux fonctions sont égales si elles ont même source et but, et si les images des éléments sont les mêmes. (Et il n'est pas suffisant de demander que les images soient les mêmes.)

\begin{definition}[Image d'une application]\index{image!d'une application}
Soit $f : E\to F$. L'\emph{image} de $f$, notée $\Im(f)$, est l'ensemble de toutes les images des éléments de $E$ par $f$:
\[
\Im(f) = \{f(x)\:\mid\: x\in E\}
\]
\end{definition}

\begin{remarque}
\begin{enumerate}
\item Si $f$ est une application de $\R$ dans $\R$, ce que l'on appelle souvent une \og représentation graphique de $f$\fg{} est en fait une représentation graphique de son graphe. La représentation graphique n'est pas unique (l'échelle peut varier, on ne représente en général pas le domaine ni le codomaine en entier mais seulement une partie, etc) mais le graphe, lui, est un objet mathématique abstrait et unique.
\item Une fonction ne peut pas être uniquement définie par son graphe : la donnée du domaine et du codomaine sont nécessaires.
\item \index{application vide}\index{zérologie} (Zérologie : application vide) Soit $E = \varnothing$ et $F$ un ensemble. Il existe une (unique) application de $E$ dans $F$, appelée \emph{application vide}, celle dont le graphe $\Gamma$ est la partie vide de $E\times F = \varnothing$. (Si $E=\varnothing$,  l'assertion \og $\forall x\in E, \exists! y\in F,\: (x,y)\in \Gamma$\fg{} est effectivement vraie même si $\Gamma$ est vide et donc $\Gamma$ est bien un graphe d'application.)
\end{enumerate}
\end{remarque}

Pour définir une fonction de $E$ dans $F$, on écrit \og Soit $f : E\to F$ une fonction\fg. Pour définir une fonction particulière, plutôt que donner son graphe comme le demanderait la définition, on utilise le symbole \og$\mapsto$\fg{} qui se lit \og est envoyé sur / s'envoie sur / est associé à \fg{} comme dans l'exemple suivant:
\[
\text{ Soit } f :\Z \to \R,\: n\mapsto \sqrt{n^2+n+1}.
\]
Ceci se lit par exemple \og Soit $f$ l'application de $\Z$ dans $\R$ qui à (un entier relatif) $n$ associe (le réel) $\sqrt{n^2+n+1}$\fg.


(Dans cet exemple, on devrait auparavant justifier que l'expression sous le radical désigne bien un réel positif, c'est bien le cas : exercice.)

On rencontre également la mise en forme du type suivant:
\[
\text{ Soit } f :\begin{cases}\Z \to \R,\\ n\mapsto \sqrt{n^2+n+1}.\end{cases}
\]
\begin{definition}
Soient $E$ et $F$ des ensembles. L'ensemble des fonctions de $E$ dans $F$ est noté $\mathcal F(E,F)$ ou bien $F^E$ (attention à l'ordre dans la seconde notation).
\end{definition}

\begin{remarque}
Un graphe de fonction n'est pas forcément défini par une formule simple du type $y=\sin(x)$, ou $y=x^2+e^x$. Par exemple, on peut utiliser plusieurs formules suivant l'endroit du domaine où se trouve la variable :
\[ f: 
\R \to \R, 
x\mapsto \begin{cases}\sqrt{x}\text{ si }x\geq 0\\ x^2+x+e^x\text{ sinon.}\end{cases}\]
%Il existe des fonctions pouvant paraître encore plus inhabituelles, par exemple:
%\[ f: 
%\R \to \R, 
%x\mapsto \begin{cases}e^x\text{ si } x\not\in\Q}\\ \text{si $x \in \Q$, le dénominateur (positif) $q$ de la fraction irréductible $\frac{p}{q}$ représentant $x$}\end{cases}\]
%Une fonction n'a pas de raison d'être continue, dérivable etc.
\end{remarque}

\begin{definition}[Antécédents d'un élément]
Soit $f : E\to F$ une fonction, et $y\in F$. On dit qu'un élément $x\in E$ est un \emph{antécédent} de $y$ si $f(x)=y$.
\end{definition}

\begin{attention}
Un élément du codomaine peut n'avoir \textbf{aucun} antécédent, ou en avoir \textbf{plusieurs}. Par exemple, si $f : \R\to \R, x\mapsto x^2$, alors l'élément $-1$ n'a aucun antécédent (il n'existe pas de $x\in \R$ tel que $f(x)=x^2=-1$). L'élément $0$ a exactement un antécédent ($0$), et l'élément $4$ a deux antécédents : $2$ et $-2$. Selon les fonctions, un élément peut même avoir une infinité d'antécédents.
\end{attention}

\begin{exemple}
Soit $f : \R^2\to \R,\: (x,y)\mapsto \sqrt{x^2+y^2}$. C'est l'application qui à un point du plan lui associe sa distance à l'origine. L'élément $-3$ n'a aucun antécédent (une distance est positive). L'élément $0$ a un seul antécédent, l'origine $(0,0)$. Le réel $2$ a une infinité d'antécédents : tous les points du plan à distance $2$ de l'origine (donc un cercle).
\end{exemple}



\begin{definition}[Fibres d'une application]
\index{fibre}
Soit $f : E\to F$ et $y\in F$. La \emph{fibre de $f$ au-dessus de $y$} est par définition l'ensemble des antécédents de $y$, c'est-à-dire $\{x\in E \:\mid\: f(x)=y\}$.

En reformulant, la fibre de $f$ au-dessus de $y$ est donc l'ensemble des solutions de l'équation $f(x)=y$, d'inconnue $x$ et de paramètre $y$. (Une fibre peut donc éventuellement être vide.)
\end{definition}

\begin{exemple}
Soit $f : \R\to \R, x\mapsto x^2$. Soit $y\in \R$. La fibre de $f$ au-dessus de $y$ est l'ensemble 
\[
\{x\in \R\:|\: x^2=y\} = 
\begin{cases}
\varnothing &\quad\text{si}\quad y<0\\
\{0\} & \quad\text{si}\quad y=0\\
\{-\sqrt y, \sqrt y\}& \quad\text{si}\quad y>0.
\end{cases}
\]
\end{exemple}

\begin{exemple}
Soit $f : \R^2\to \R,\: (x,y)\mapsto 2x-3y$. La fibre de $f$ au-dessus de $5$ est l'ensemble des points $(x,y) \in R^2$ tels que $2x-3y=5$. Autrement dit, la fibre au-dessus de $5$ est la droite de $\R^2$ d'équation cartésienne $2x-3y-5=0$. (Exercice : les autres fibres sont également des droites, toutes parallèles.)
\end{exemple}

\begin{definition}[Fonction caractéristique]
Soit $E$ un ensemble et $A\in \mathcal P(E)$ une partie de $E$. La \emph{fonction caractéristique} de $A$ (sous-entendu, dans $E$) est la fonction 
\[
\operatorname{1}_A :\begin{cases}E \to \{0,1\},\\ x\mapsto \begin{cases}1&\text{ si } x\in A\\0&\text{ si } x\not\in A\end{cases}\end{cases}
\]
\end{definition}



Pour terminer ce paragraphe, on introduit un outil indispensable pour visualiser efficacement plusieurs ensembles et applications d'un seul coup : les diagrammes.

\begin{definition}[Diagramme]
\index{diagramme}
Lorsque l'on est en présence de plusieurs ensembles et de plusieurs applications entre ces ensembles, il est classique de visualiser la situation à l'aide d'un diagramme. Un diagramme (d'applications entre ensembles) est un graphe orienté dont chaque sommet représente un ensemble et chaque arête (orientée) représente une application.
\end{definition}

Attention, un tel graphe n'est pas simple, autrement dit il peut avoir des boucles (s'il y a des applications d'un ensemble dans lui-même) ou des arêtes multiples (s'il y a plusieurs applications distinctes entre deux ensembles donnés).

\begin{exemple}
\begin{enumerate}
\item \'Etant donnés des ensembles $A$, $B$, $C$ et $D$ et des applications $f : A\to B$, $g : A\to C$, $h : D\to A$, $\phi : D\to C$, $\psi : B\to A$, on peut représenter la situation en donnant simplement diagramme suivant:
\[
\xymatrix{
A \ar@/^1pc/[r]^{f} \ar[d]_{g} & B \ar@/^/[l]_{\psi}\\
C & D \ar[ul]^{h} \ar[l]^{\phi}
}
\]
\item \'Etant donnés des ensembles $E$ et $F$ et des applications $f : E\to E$, $g : E\to F$ et $h : E\to F$, on peut représenter la situation par le diagramme:
\[
\xymatrix{
 E \ar@(dl,ul)^{f} \ar@/^1pc/[rrr]^{g} \ar@/_1pc/[rrr]^{h}
& & &  F 
}
\]
\end{enumerate}
\end{exemple}

%----------------------------------
\section{Composition}
%----------------------------------

\emph{Résumé : composition, factorisation, la composition est associative, fonction identité, diagramme (commutatif ou pas), }




\begin{definition}[Composition]
\index{composition de deux applications}
Soit $f : X\to Y$ et $g : Y\to Z$ deux fonctions. La composée de $g$ et de $f$ est la fonction $g\circ f$ (se lit \og $g$ rond $f$\fg) de $X$ dans $Z$ qui à $x\in X$ associe $g(f(x)) \in Z$. Autrement dit, par définition, $(g\circ f)(x) = g(f(x))$.

Une composition d'applications se visualise à l'aide du diagramme\index{diagramme} suivant (attention à l'ordre : appliquer la fonction $g\circ f$ consiste à appliquer $f$ \emph{suivie} de $g$):
\[
\xymatrix{
X \ar[r]_{f} \ar@/^1pc/[rr]^{g\circ f}& Y \ar[r]_{g}& Z
}
\]
\end{definition}

Plus généralement, pour pouvoir composer deux fonctions il est suffisant que le codomaine de la première fonction (dans l'ordre de la composition) soit inclus dans le domaine de la seconde. (Cette condition est bien sûr également nécessaire, autrement l'écriture $g(f(x))$ n'a pas de sens. Deux fonctions quelconques ne sont donc en général pas composables.)

\begin{definition}[Factorisation d'une application comme composée d'autres applications]
\index{factorisation!d'une application comme composée}
\'Ecrire une application $f$ sous la forme d'une composition $f = g\circ h$, c'est la \emph{factoriser}. Plusieurs factorisations sont possibles. Par exemple, si $f : \R\to \R, x\mapsto x^2+1$, on peut écrire $f : g\circ h$, avec
\[
h : \R\to \R, x\mapsto x^2 
\text{ et }
g : \R\to \R, x\mapsto x+1.
\]
\end{definition}

\noindent\fbox{
\begin{minipage}{.98\linewidth}
La notion de composition d'applications est centrale dans ce cours (et en mathématiques). Une compétence attendue en fin de semestre est d'interpréter rapidement des fonctions comme des composées de fonctions plus simples, c'est-à-dire de factoriser de tête certaines applications. Par exemple, la fonction $f : \R\to \R, x\mapsto \ln\sqrt{1+e^x}$ peut naturellement s'écrire comme la composée de quatre applications simples:
\[ \R \xrightarrow{x\mapsto e^x} \R_+^* \xrightarrow{x\mapsto x+1} \R_+^* \xrightarrow{x\mapsto \sqrt x} \R_+^* \xrightarrow{x\mapsto \ln x} \R.\]
Une telle factorisation se voit instantanément avec un peu de pratique et  permet par exemple de montrer sans aucun calcul que $f$ est croissante.
\end{minipage}
}


\begin{attention}[La composition n'est pas commutative]
Attention, même si les domaines et codomaines permettent de composer deux fonctions dans les deux sens, les fonctions $g\circ f$ et $g\circ f$ obtenues sont en général distinctes. Par exemple, avec $f : \R\to R, x\mapsto x^2
$ et $g : \R\to \R, x\mapsto x+1$,  on peut composer dans les deux sens mais on a :
\begin{align*}
g\circ f : \R\to \R, & x\mapsto g(f(x)) = g(x^2) = x^2+1,\\
f\circ g : \R\to \R, & x\mapsto f(g(x)) = f(x+1) = (x+1)^2 = x^2+2x+1.
\end{align*}
\end{attention}


\begin{proposition}[\og La composition est associative\fg]
\index{associative (composition)}
Soient $f : X\to Y$, $g : Y\to Z$, $h  : Z\to T$ des fonctions. Alors $h\circ (g\circ f) = (h\circ g)\circ f$. Cette fonction est notée $h\circ g\circ f$.

Ce résultat se visualise à l'aide du diagramme\index{diagramme}:
\[
\xymatrix{
X \ar[r]_{f} \ar@/^1pc/[rr]^{g\circ f} \ar[r]_{f} \ar@/^3pc/[rrr]^{h\circ (g\circ f)} \ar@/_3pc/[rrr]_{(h\circ g) \circ f}& Y \ar[r]_{g} \ar@/_1.2pc/[rr]_{h\circ g} & Z \ar[r]^{h} & T
}
\]

\end{proposition}
\begin{proof}
Les domaines et codomaines sont les mêmes ($X$ et $T$), et si $x\in X$, on a 
\[ \left(h\circ (g\circ f)\right) (x) = h((g\circ f)(x)) = h(g(f(x)) \text{ et } \]
\[ \left( (h\circ g)\circ f \right) (x) = (h \circ g)(f(x)) = h(g(f(x))\quad \]
d'où l'égalité des deux fonctions.
\end{proof}

Cette proposition permet de ne pas avoir à noter les parenthèses lors de compositions successives, puisque toutes les possibilités de parenthésage donnent la même fonction.

\begin{definition}[Fonction identité]
Soit $E$ un ensemble. La fonction identité sur $E$ est la fonction $\Id_E : E\to E, x\mapsto x$. (En d'autres termes, la fonction identité de $E$ est la fonction de $E$ dans $E$ dont tous les points sont fixes.)
\end{definition}

\begin{attention}
\begin{enumerate}
\item Ne pas confondre la fonction identité avec une fonction constante (ou avec fonction nulle si le but est $\R$).
\item Si $\phi = E\to F$, alors $\phi = \phi\circ \Id_E = \Id_F\circ \phi$.
\end{enumerate}
\end{attention}


\begin{definition}[Diagramme commutatif]
\index{diagramme!commutatif}
Considérons un diagramme d'applications entre ensembles. En général, il y a plusieurs chemins entre deux sommets donnés, et ces chemins correspondent à différentes fonctions composées entre les deux ensembles.

On dit que le diagramme \emph{est commutatif} (ou \emph{qu'il commute}) lorsque pour tout couple de sommets, les différentes applications composées reliant ces ensembles sont égales.
\end{definition}

\begin{exemple}
\begin{enumerate}
\item  Par exemple, dire que le diagramme
$
\xymatrix{
X \ar[d]_{f} \ar[r]^{h}& Z \\
Y \ar[ur]_{g}& 
}
$
est commutatif revient à dire que $h = g\circ f$.
\item Dire que le diagramme 
$\xymatrix{
A \ar[r]^{\phi} \ar[d]_{f} & B \ar[d]^{g}\\
C \ar[r]^{\psi}& D 
}$
est commutatif revient à dire que $\psi\circ f = g \circ \phi$. Un tel diagramme est appelé \emph{carré commutatif}.
\end{enumerate}
\end{exemple}

\begin{definition}[Fonction involutive/involution]\index{application!involutive}\index{involution}
Soit $f : E\to E$ une fonction ayant même source et but. On dit que $f$ est \emph{involutive}, ou que c'est une \emph{involution}, si $f\circ f=\Id_E$.
\end{definition}

\begin{exemple}
La fonction $f : \R\to \R, x\mapsto 1-x$ est involutive.
\end{exemple}



%---------------------------------
\section{Applications réciproques, sections et rétractions}
%---------------------------------

\emph{Résumé : fonctions réciproque, unicité de la réciproque, sections et rétractions}


\begin{definition}[Fonction réciproque]
\index{réciproque (fonction)}
Soient $f : E\to F$ et $g = F\to E$ deux fonctions. On dit qu'elles sont réciproques l'une de l'autre (ou que $g$ est une réciproque de $f$, ou que $f$ est une réciproque de $g$) si $g\circ f = \Id_E$ \underline{et} $f\circ g = \Id_F$. 
\[
\xymatrix{
 E \ar@(dl,ul)^{\Id_E} \ar@/^2pc/[rrr]^{f} \ar@(ur,dr)^{g\circ f} 
& & & 
\ar@/^2pc/[lll]^{g} \ar@(dl,ul)^{f\circ g} F \ar@(ur,dr)^{\Id_F}
}
\]
\end{definition}



Attention, une fonction $f$ n'a pas toujours de fonction réciproque!

\begin{proposition} Soit $f : E\to F$ une fonction. Si elle admet une (fonction) réciproque, alors celle-ci est unique. Elle est notée généralement $f^{-1}$.
\end{proposition}
\begin{proof}
Soient en effet $g = F\to E$ et $h : F \to E$ deux réciproques de $f$. Alors
\[
g\circ  f \circ h = (g\circ f) \circ h = \Id_E \circ h = h, \text{ et}
\]
\[
g\circ  f \circ h = g\circ (f \circ h) = g \circ \Id_F = g
\]
d'où $g=h$.
\end{proof}

\begin{attention}
\begin{enumerate}
\item On ne doit pas utiliser la notation $f^{-1}$ avant d'avoir démontré que la fonction admet effectivement une réciproque.
\item Ne pas confondre fonction réciproque $f^{-1}$ et fonction \emph{inverse} $\frac{1}{f}$. La notion de fonction inverse  concerne les fonctions à valeurs réelles qui ne s'annulent pas et n'a rien à voir avec la notion de réciproque.
\end{enumerate}
\end{attention}

\begin{exemple}
Les fonctions $f = \R\to \R_+^*, x\mapsto e^x$ et $g : \R_+^*\to R, x\mapsto \ln(x)$ sont réciproques l'une de l'autre.
\end{exemple}

\begin{attention}
Dans la définition de réciproque, les conditions $g\circ f = \Id_E$ et  $f\circ g = \Id_F$ sont toutes les deux nécessaires : il est en effet possible que l'une soit vérifiée et pas l'autre. Par exemple, les fonctions 
\[
f : \R_+\to \R, x\mapsto \sqrt x
\quad \text{ et }\quad
g : \R\to \R_+, x\mapsto x^2
\]
vérifient $g\circ f=\Id_{\R_+}$, mais $f\circ g \neq \Id_{\R}$ : en effet, on a $(f\circ g)(x)=\sqrt{x^2}=|x|\neq x$.

Dans ce type de cas, on n'est pas en présence de fonctions réciproques mais la situation porte tout de même un nom. C'est l'objet de la définition suivante.
\end{attention}

\begin{definition}[Rétraction/inverse à gauche, section/inverse à droite]
Soit $f : E\to F$ une fonction.
\begin{enumerate}
\item Une \emph{rétraction} (ou \emph{inverse à gauche}) de $f$, est une fonction $r:F\to E$ telle que $r\circ f = \Id_E$.
\[
\xymatrix{
 E \ar@(dl,ul)^{\Id_E} \ar@/^1pc/[rrr]^{f}
& & & 
\ar@/^1pc/[lll]^{r}  F 
}
\]
\item Une \emph{section} (ou \emph{inverse à droite}) de $f$, est une fonction $s:F\to E$ telle que $f \circ s = \Id_F$.
\[
\xymatrix{
 E  \ar@/^1pc/[rrr]^{f} 
& & & 
\ar@/^1pc/[lll]^{s}  F \ar@(ur,dr)^{\Id_F}
}
\]
\end{enumerate}
\end{definition}

\begin{exemple}
Soit $f = \R\to \R_+, x\mapsto x^2$. Alors les fonctions $s_1 : \R_+\to \R, x\mapsto \sqrt x$ et $s_2 : \R_+\to \R, x\mapsto -\sqrt x$ sont deux sections (inverses à droite) distinctes de $f$ (on a bien $f\circ s_1 = \Id_{\R^+}$ et $f\circ s_2 = \Id_{\R^+}$). 
Par ailleurs, $f$ est une rétraction de $s_1$ et de $s_2$. (Voir remarque ci-dessous.)
%Soit $f : \{1,2\} \to \{3,4,5\}$ définie par $f(1)=3$ et $f(2)=5$. La fonction $g : \{3,4,5\}\to\{1,2\}$ telle que $g(3)=1$, $g(4)=2$ et $g(5)=2$ est une rétraction de $f$.  Par ailleurs, la fonction $f$ est une section de $g$ (voir remarque plus bas).
\end{exemple}

\begin{remarque}
\begin{enumerate}
\item Une fonction $g$ est une rétraction de $f$ si et seulement si $f$ est une section de $g$ puisque les deux assertions signifient $g\circ f = \Id_E$ : les deux notions sont \og duales\fg.
\item Les sections et rétractions, lorsqu'elles existent, ne sont en général pas uniques (contrairement à la fonction réciproque qui est unique si elle existe).
\item Une fonction réciproque est à la fois une rétraction et une section (ou : à la fois un inverse à gauche et un inverse à droite).
\item De même que toutes les fonctions n'ont pas forcément de réciproque, toutes les fonctions n'admettent pas forcément une section ou une rétraction. Par exemple, $f : \R\to \R, x\mapsto x^2$ n'admet ni section ni rétraction. 
\end{enumerate}
\end{remarque}

% autre exemple avec inverse à gauche / pas à droite ou l'inverse



%---------------------------------
\section{Restriction, prolongement, corestriction}
%---------------------------------

\emph{Résumé : restriction, prolongement, corestriction}

\begin{definition}[Restriction]
\index{restriction d'une application}
Soit $f : E\to F$ et $A \in \mathcal P(E)$ une partie de $E$. La \emph{restriction} de $f$ à $A$, notée $f|_{A}$, est l'application de $A$ dans $F$ suivante:
\[
f|_{A} : A\to F, \: x\mapsto f(x)
\]
Attention, les fonctions $f|_A$ et $f$ doivent être considérées comme distinctes car leurs domaines sont distincts ($A$ au lieu de $E$).
\end{definition}

\begin{remarque}
Dans le contexte de la définition, si on note $i : A\to E, x\mapsto x$ l'inclusion de $A$ dans $E$, alors la restriction $f|_A$ est simplement la composition $f\circ i$.
\[\xymatrix{
A \ar[r]^{i} \ar@/_/[rr]_{f\circ i = f|_A} & E \ar[r]^f & F
}\]
\end{remarque}

\begin{definition}[Prolongement]
Soient $E$ et $F$ des ensembles, $A\in \mathcal P(E)$ une partie de $E$ et $f : A\to F$ une fonction. On dit qu'une application $g : E\to F$ est un \emph{prolongement} de $f$ si $g|_A = f$.
\end{definition}

\begin{attention}
Il existe en général plusieurs prolongements possibles d'une même fonction et même si la fonction $f$ est donnée par une formule, un prolongement n'a aucune raison d'être défini par la même formule hors du domaine originel de $f$. Par exemple, si $f : \R_+^* \to \R, x\mapsto e^x$, alors les fonctions suivantes  sont des prolongements de $f$ (à divers domaines):
\[g : \R^* \to \R, x\mapsto \begin{cases}e^x\text{ si } x>0\\ \sin(x) \text{ si } x<0\end{cases},\]
\[h : \R_+ \to \R, x\mapsto \begin{cases}e^x\text{ si } x>0\\ 10 \text{ si }x=0\end{cases}.\]
(Un prolongement ne doit pas non plus être forcément continu ni dérivable, etc.)
\end{attention}


\begin{definition}[Corestriction]\index{corestriction}\label{def-corestriction}
Soit $f : E\to F$, et $B$ une partie de $F$ contenant toutes les images des éléments de $E$ (autrement dit, $\forall x\in E, f(x)\in B$).
La \emph{corestriction} de $f$ à $B$ est l'application de domaine $E$, codomaine $B$ et de même graphe que $f$, autrement dit c'est l'application 
\[ g : E\to B, x\mapsto f(x).\]
La corestriction de $f$ à $B$ se note $f|^{B}$ mais cette notation n'est pas aussi standard que celle pour la restriction
\end{definition}

\begin{exemple}
Soit $f : \R\to \R, x\mapsto x^2$. On peut la corestreindre à $[-3,+\infty[$ car cette partie de $\R$ contient toutes les images de $f$. La corestriction de $f$ à $[-3,+\infty[$ est $g : \R\to [-3,+\infty[, x\mapsto x^2$.
\end{exemple}





%---------------------------------
\section{Fonctions injectives et surjectives}
%---------------------------------

\emph{Résumé : fonctions injectives, surjectives, bijectives, stabilité par composition, réciproques partielles, injectivité ssi rétractions, surjectivité ssi  sections, bijectivité ssi réciproque}



\begin{definition}[Fonction injective]
\index{injection}
Soit $f : A \to B$ une application. On dit que $f$ est \emph{injective} (ou que c'est une \emph{injection}) si les conditions équivalentes suivantes sont vérifiées.
\begin{enumerate}
\item $\forall (x,y) \in A^2,\quad f(x)=f(y) \Rightarrow  x=y$.
\item $\forall (x,y) \in A^2,\quad x\neq y \Rightarrow  f(x)\neq f(y)$. (La contraposée de la précédente.)
\item Deux éléments distincts de $A$ ont des images distinctes. 
\item Un élément de $B$ admet au plus un antécédent par $f$.
\end{enumerate}
Une formulation moins précise mais parlante est qu'une fonction injective \og sépare les points\fg{}.
\end{definition}

\begin{exemple}
$f : \R\to \R, x\mapsto x^2$ n'est \textbf{pas} injective puisque $f(1)=f(-1)$.
\end{exemple}


\begin{exercice}
Montrer que  $\sin : \R\to \R, x\mapsto \sin(x)$ n'est pas injective, mais que $f:\R_+\to \R_+, x\mapsto \sqrt{x+1}$ l'est.
\end{exercice}


% méthode : pour rédiger une preuve, on utilise en général la première formulation, ou la seconde. Les autres formulations servent plutôt à assimiler la notion.
% méthode : pour montrer qu'une fonction n'est pas injective, il suffit de trouver deux éléments distincts qui ont même image.
% mettre un petit exo avec exemple et contre-exemple ?

\begin{definition}[Fonction surjective]
\index{surjection}
Soit $f : A \to B$ une application. On dit que $f$ est \emph{surjective} (ou que c'est une \emph{surjection}) si
\[\forall b \in B,\quad \exists a\in A / f(a)=b,\]
autrement dit tout élément $b\in B$ a (au moins) un antécédent par $f$.
Une formulation moins précise mais parlante est  qu'une fonction surjective \og recouvre son codomaine\fg{}.
\end{definition}

\begin{exemple}
$f : \R\to \R, x\mapsto x^2$ n'est \textbf{pas} surjective puisque $-1$ n'a pas d'antécédent par $f$.
\end{exemple}

\begin{exercice}
Montrer que  $\exp: \R\to \R, x\mapsto e^x$ n'est pas surjective.
\end{exercice}





\begin{definition}[Fonction bijective]
\index{bijection}
On dit que $f : A\to B$ est \emph{bijective} (ou que c'est une \emph{bijection}) si elle est injective et surjective. Autrement dit, $f$ est bijective si tout élément $y\in B$ admet \emph{exactement} un antécédent par $f$.
\end{definition}

\begin{exemple}
\begin{enumerate}
\item La fonction identité (d'un ensemble $E$ dans lui-même) est bijective.
\item Si $A\subseteq B$, la fonction $i : A\to B, x\mapsto x$, appelée \emph{l'inclusion de $A$ dans $B$}, est injective. De même que les fonctions identité, les fonctions d'inclusion jouent souvent un rôle important malgré leur apparence anodine.
\item Si $f : E\to F$ est injective, sa restriction $f|_A$ à toute partie $A\subseteq E$ est injective.
\item On a déjà vu que $f : \R \to \R, x\mapsto x^2$ n'est ni injective, ni surjective. La corestriction de $f$ à $\R_+$ est $g : \R \to \R_+, x\mapsto x^2$. Elle n'est pas injective pour les mêmes raisons que $f$, mais elle est surjective : le codomaine est cette fois $\R_+$, et tout nombre réel positif $y\geq 0$ a au moins un antécédent, par exemple $-\sqrt{y}$.
\item La restriction de $g$ à $\R_+$ est $h : \R_+ \to \R_+, x\mapsto x^2$. Elle est injective et surjective, donc bijective. Elle est injective car si $x$ et $y$ sont des réels positifs ayant même carré, ils sont forcément égaux (ils sont positifs donc il n'y a pas l'ambiguité de signe). Sa surjectivité ne découle pas directement de celle de $g$ car le domaine a été restreint : elle est surjective car tout nombre réel positif $y\geq 0$ a au moins un antécédent \emph{dans $\R_+$}, à savoir $\sqrt{y}$.
\item (Zérologie)\index{zérologie} L'unique fonction de $\varnothing$ dans $\varnothing$ est bijective. La fonction vide de $\varnothing$ dans n'importe quel ensemble est toujours injective.
\end{enumerate}
\end{exemple}

\begin{exercice}
Montrer que  $f: \R\to \R, x\mapsto x^3$ est bijective.
\end{exercice}

\begin{remarque}
En général, la surjectivité est plus difficile à montrer que l'injectivité, car il faut résoudre une équation à paramètre : l'équation $f(x)=y$, de paramètre $y$, et d'inconnue $x$, et ce pour tous les paramètres $y$. La non surjectivité est en revanche souvent plus facile à montrer, il suffit de trouver un élément qui n'a pas d'antécédent, en général cela se voit (éventuellement après un petit calcul / majoration / développement d'expression).
\end{remarque}

\begin{remarque}
Si $f : A\to B$ est injective, alors on peut parfois \og identifier\fg{} $A$ à un sous-ensemble de $B$ grâce à $f$ : un élément $a \in A$ est identifié à $f(a) \in B$. \textbf{Attention}, cette façon d'identifier $A$ à une partie de $B$ dépend de $f$ et il existe en général plusieurs injections de $A$ dans $B$, donc le choix de l'injection n'est pas anodin, ni canonique en général.
\end{remarque}


\begin{proposition}[Stabilité à la composition de l'injectivité et de la surjectivité]
Soient $f : E\to F$ et $g : F\to G$ deux fonctions.
\begin{enumerate}
\item Si $f$ et $g$ sont injectives, alors $g\circ f$ l'est également.
\item Si $f$ et $g$ sont surjectives, alors $g\circ f$ l'est également.
\item Si $f$ et $g$ sont bijectives, alors $g\circ f$ l'est également.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Soient $x, y \in E$ tels que $(g\circ f)(x) = (g\circ f)(y) $, c'est-à-dire tels que $g(f(x))=g(f(y))$. Comme $g$ est injective, on a $f(x)=f(y)$. Comme $f$ est injective, on a alors $x=y$, ce qu'il fallait démontrer.
\item Soit $z\in G$. Comme $g$ est surjective, $z$ possède un antécédent par $g$ c'est-à-dire qu'il existe $y\in F$ tel que $g(y)=z$. Ensuite, comme $f$ est surjective, $y$ possède un antécédent par $f$, c'est-à-dire qu'il existe $x\in E$ tel que $f(x)=y$. On a alors $g(f(x)) = g(y)=z$, donc $x$ est un antécédent de $z$ par $g\circ f$. Ceci montre que tout élément de $G$ possède un antécédent par $g\circ f$, donc que $g\circ f$ est surjective.
\item Il suffit d'appliquer les deux premiers points.
\end{enumerate}
\end{proof}



\begin{exemple}
Cette proposition permet d'éviter des calculs parfois lourds. Par exemple, la fonction $f : \R\to \R, x\mapsto \left(\ln(e^x+2)\right)^3$ est injective car elle s'écrit comme la composée des fonctions injectives :
\[ \R \xrightarrow{x\mapsto e^x} \R_+^* \xrightarrow{x\mapsto x+2} \R_+^* \xrightarrow{x\mapsto \ln(x)} \R \xrightarrow{x\mapsto x^3}\R\]
La proposition est encore plus utile pour vérifier le caractère surjectif de fonctions.
\end{exemple}




\begin{proposition}[réciproques partielles]
Soient $f : E\to F$ et $g : F\to G$ deux fonctions.
\begin{enumerate}
\item Si $g\circ f$ est injective, alors $f$ l'est également.
\item Si $g\circ f$ est surjective, alors $g$ l'est également.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Soient $x, y\in E$ tels que $f(x)=f(y)$. En appliquant $g$, il vient $g(f(x))=g(f(y))$. Comme $g\circ f$ est injective, $x=y$.
\item Soit $z\in G$. Comme $g\circ f$ est surjective, il existe $x\in E$ tel que $g(f(x))=z$. Posons $y = f(x)$. On a $g(y)=z$ donc $y$ est un antécédent de $z$ par $g$.
\end{enumerate}
\end{proof}




\begin{corollaire}[de la proposition]\label{bijective-si-reciproque}
Soit $f : E\to F$ une application.
\begin{enumerate}
\item Si elle admet une rétraction (inverse à gauche), alors elle est injective.
\item Si elle admet une section (inverse à droite), alors elle est surjective.
\item Si elle admet une fonction réciproque, alors elle est bijective.
\end{enumerate}
\end{corollaire}
\begin{proof}
\begin{enumerate}
\item Soit $r$ une rétraction de $f$. La composée $r\circ f = \Id_E$ est injective donc par la proposition précédente, $f$ est injective.
\item Soit $s$ une section de $f$. La composée $f \circ s= \Id_F$ est surjective donc par la proposition précédente, $f$ est surjective.
\item Une réciproque étant à la fois une section et une rétraction, on applique les deux points précédents.
\end{enumerate}
\end{proof}


\begin{remarque}
\textbf{Attention}, on peut avoir $g\circ f$ injective et $g$ non injective, et on peut aussi avoir $g\circ f$ surjective et $f$ non surjective. Considérons par exemple:
\[
f : \N\to \N, n\mapsto 2n
\quad \text{ et }\quad
g : \N\to \N, n\mapsto \lfloor n/2\rfloor.
\]
Alors $g\circ f = \Id_\N$ donc est bijective, mais $f$ n'est pas surjective et $g$ n'est pas injective.

On peut également considérer les fonctions
\[
f : \R_+\to \R, x\mapsto \sqrt x
\quad \text{ et }\quad
g : \R\to \R_+, x\mapsto x^2
\]
qui vérifient également $g\circ f=\Id_{\R_+}$ sans que $f$ soit surjective ni $g$ injective.
\end{remarque}



On termine la section par la réciproque du corollaire précédent, qui établit entre autres l'équivalence entre bijectivité et existence d'une réciproque.

\begin{proposition}
\label{bijective_ssi_reciproque}
Soit $f : E\to F$.
\begin{enumerate}
\item Elle est surjective ssi elle admet une section.
\item Elle est injective ssi elle admet une rétraction.
\item Elle est bijective ssi elle admet une réciproque.
\end{enumerate}
\end{proposition}
\begin{proof}\index{section}
Le sens \og si\fg{} a été démontré dans le corollaire \ref{bijective-si-reciproque}. Montrons le sens \og seulement si\fg.
\begin{enumerate}
\item  Pour tout $y\in F$, on choisit un antécédent de $y$ par $f$, que l'on note $x_y$. On définit alors une fonction $g : F\to E$ par $g(y)=x_y$. Par construction, on a $f\circ g = \Id_F$ donc $g$ est une section de $f$.
\item À tout $y\in F$ on associe soit son unique antécédent s'il en existe un, soit un élément de $E$ arbitraire dans le cas contraire. Ceci définit une fonction $g : F\to E$ et par construction on a $g\circ f=\Id_E$.
\item D'une part, comme $f$ est surjective, elle admet (d'après le premier point) une section $s$, qui vérifie donc $f\circ s = \Id_F$. Montrons  que $s\circ f = \Id_E$. Soit $x\in E$ et soit $a = (s\circ f)(x)$. Alors $f(a) = (f\circ s \circ f) (x) = ((f\circ s)\circ f)(x) = f(x)$ et comme $f$ est injective, $a=x$ c'est-à-dire $(s\circ f)(x) = x$. Donc $s\circ f=\Id_E$ et donc $s$ est la réciproque de $f$.
\item \emph{Preuve alternative du dernier point, en suivant le cheminement inverse.} D'une part, comme $f$ est injective, elle admet (d'après le second point) une rétraction $r$, qui vérifie donc $r\circ f=\Id_E$. Montrons  que $f\circ r = \Id_F$. Soit $y\in F$. Comme $f$ est surjective, considérons $x$ un antécédent de $y$. Alors, $(f\circ r)(y) = (f\circ r)(f(x)) =(f\circ (r \circ f)(x) = (f\circ \Id_E)(x) = f(x) = y$. D'où $f\circ r = \Id_F$ et donc $r$ est la réciproque de $f$.
\end{enumerate}
\end{proof}



%--------------------------------------
\section{Images directes et réciproques de parties}
%--------------------------------------

\emph{Résumé : images directes et réciproques de parties, fibres d'une application, union et intersections d'images directes et réciproques.}


\begin{definition}[Image directe d'une partie]
\index{image!directe d'une partie}
Soit $f : E\to F$ et $A\subseteq E$. On appelle image directe de $A$ l'ensemble des images des éléments de $A$ :
\[f(A) = \{f(x)\:\mid\: x\in A\} = \{y\in F \:\mid\: \exists x\in A, y=f(x)\}.\]
Autrement dit, pour un élément $y\in F$, on a $y\in f(A) \iff \left(\exists x\in A, y=f(x)\right)$.
\end{definition}

\begin{exemple}\index{image}
Si $f : E\to F$, alors $f(E)$ est juste l'image de $f$, introduite plus haut et notée $\Im f$. La notion d'image directe d'une partie est donc une généralisation de celle d'image d'une application.
\end{exemple}

\begin{exercice}
Soit $f : E\to F$. On fixe une partie $A\subseteq E$ et on note $i : A\to E$ l'inclusion de $A$ dans $E$. Vérifier que $f(A) = \Im f\circ i$.
\end{exercice}


\begin{proposition}
Soit $f : E\to F$.
\begin{enumerate}
\item $f(\varnothing)=\varnothing$.
\item $f(E)\subseteq F$ avec égalité si et seulement si $f$ est surjective. En général, $f(E)\neq F$.
\item Si $(A_i)_{i\in I}$ est une famille de parties de $E$, alors $f\left(\bigcup_{i\in I}A_i\right) = \bigcup_{i\in I} f(A_i)$.
\item Par contre, on a en général $f\left(\bigcap_{i\in I}A_i\right) \subseteq \bigcap_{i\in I} f\left(A_i\right)$ mais pas forcément égalité.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Clair.
\item On a $f(E)=F \iff (\forall y\in F, y\in f(E))$ ce qui signifie par définition que tout élément $y\in F$ admet au moins un antécédent, et donc que $f$ est surjective.  
\item Soit $y\in F$. On a 
\begin{align*}
y\in f\left( \bigcup_{i\in I} A_i \right)
&\iff \exists x\in  \bigcup_{i\in I} A_i,   y=f(x) \\
&\iff \exists x\in E, \left( x\in \bigcup_{i\in I} A_i\text{ et }  y=f(x)\right)\\
&\iff \exists x\in E, \exists i\in I,  (x\in A_i\text{ et } y=f(x)) \\
&\boxed{\iff \exists i\in I, \exists x\in E}\:, (x\in A_i\text{ et } y=f(x))\\
&\iff \exists i\in I, \exists x\in A_i, y=f(x)\\
&\iff \exists i\in I, y\in f(A_i)\\
&\iff y\in \bigcup_{i\in I} f(A_i)
\end{align*}
L'interversion de quantificateur signalée est licite car ce sont deux quantificateurs existentiels.
\item On a:
\begin{align*}
y\in f\left( \bigcap_{i\in I} A_i \right)
&\iff \exists x\in  \bigcap_{i\in I} A_i,   y=f(x) \\
&\iff \exists x\in E, \left( x\in \bigcap_{i\in I} A_i\text{ et }  y=f(x)\right)\\
&\iff \exists x\in E, \forall i\in I,  (x\in A_i\text{ et } y=f(x)) \\
&\boxed{\implies \forall i\in I, \exists x\in E}\:, (x\in A_i\text{ et } y=f(x)) \quad(*)\\
&\implies \forall i\in I, \exists x\in A_i, y=f(x)\\
&\implies \forall i\in I, y\in f(A_i)\\
&\implies y\in \bigcap_{i\in I} f(A_i)
\end{align*}
L'interversion des quantificateurs  est licite \textbf{dans ce sens-là seulement : $\exists x \forall i ... \implies \forall i \exists x ...$}, et l'équivalence devient une implication. Ceci prouve l'inclusion. Pour montrer qu'il n'y a pas forcément égalité, il suffit de donner un contre-exemple, par exemple $\sin(\R_-^* \cap \R_+^*) = \sin(\varnothing) = \varnothing \subsetneq \sin(\R_+^*) \cap \sin(\R_-^*)=[-1,1]$.
\end{enumerate}
\end{proof}



\begin{definition}[Image réciproque d'une partie]
\index{image!réciproque d'une partie}
Soit $f : E\to F$ et $B\subseteq F$. On appelle image réciproque de $B$ l'ensemble de tous les antécédents d'éléments de $B$ :
\[f^\leftarrow(B) = \{x\in E\:\mid\: f(x)\in B \}.\]
Autrement dit, pour un élément $x\in E$, on a $x\in f^\leftarrow(B) \iff f(x)\in B$.

\textbf{Attention}, la notation $f^\leftarrow(B)$ n'est \textbf{pas  standard}. La notation standard est $f^{-1}(B)$ mais elle est assez mauvaise car elle empiète sur la notation pour la fonction réciproque (qui n'existe pas toujours). En particulier,  dans les cas où la fonction $f$ n'admet de fonction réciproque, utiliser la notation  $f^{-1}$ pour les images réciproques peut laisser croire que l'on manipule une fonction réciproque, ce qui est faux.

Pour ces raisons, on utilise dans ce cours la notation $f^\leftarrow(B)$. La notation $f^{-1}(B)$ sera adoptée progressivement dans les chapitres (ou semestres) suivants, une fois que la notion sera bien assimilée.
\end{definition}

\begin{exemple}[Fibres et images réciproques]
\index{fibre}
Soit $f : A\to B$ et $b\in B$. On a vu que la \emph{fibre de $f$ (au-dessus) de $b$} est par définition l'ensemble des antécédents de $b$, c'est-à-dire $\{a\in A \:\mid\: f(a)=b\} $.

En reformulant, la fibre de $f$ au-dessus de $b$ est donc l'ensemble $f^\leftarrow(\{b\})$. De façon générale, les \emph{fibres} de l'application $f$ sont les images réciproques de singletons de $B$.
\end{exemple}

\begin{exemple}
Soient $f : A\to B$,  $g : B\to C$ et $C'\subseteq C$ une partie de $C$. Alors, on a 
\[\Im g\circ f \subseteq C' \iff \Im f \subseteq g^\leftarrow(C').\]
\end{exemple}

\begin{proposition}
Soit $f : E\to F$.
\begin{enumerate}
\item $f^\leftarrow(\varnothing)=\varnothing$.
\item $f^\leftarrow(F)=E$.
\item Si $(B_i)_{i\in I}$ est une famille de parties de $F$, alors 
\[
f^\leftarrow\left(\bigcup_{i\in I}B_i\right) 
= \bigcup_{i\in I} f^\leftarrow(B_i)
\quad \text{ et } \quad 
f^\leftarrow\left(\bigcap_{i\in I}B_i\right) 
= \bigcap_{i\in I} f^\leftarrow(B_i)/
\]
\end{enumerate}
\end{proposition}
\begin{proof} Exercice.
\end{proof}

\begin{quote}
\emph{En conclusion, l'image réciproque se comporte mieux que l'image directe vis-à-vis des unions et intersections.}
\end{quote}

%- - - - - -
% factorisations

\section{Compléments}

Les définitions et résultats de cette section ne sont pas exigibles comme cours à l'examen mais sont néanmoins importants.

\subsection{Itérées, points fixes, parties stables}

% % % % % % % % 
\begin{definition}[itérées successives]\index{itérée}\index{itération}
Soit $f : E\to E$ une application d'un ensemble dans lui-même, et $n\in \N$. On  note $f^{\circ n}$ et on appelle \emph{$n$-ème itérée de $f$}  l'application définie par récurrence de la façon suivante :
\[ f^{\circ 0} = \Id_E \text{ et } \forall n\in \N, f^{\circ n+1} = f\circ f^{\circ n}.\]
Autrement dit, on a :
\[ 
f^{\circ n} = \begin{cases}
\Id_E & \text{ si } n=0;\\
\underbrace{f\circ \dots \circ f}_{n \text{ fois}} & \text{ si } n\geq 1.
\end{cases}
\]
Il arrive que l'on écrive $f^n$ au lieu de $f^{\circ n}$ bien que ce soit déconseillé, pour éviter la confusion entre produit et composition.
\end{definition}

\begin{definition}[Point fixe et lieu fixe]
\index{point fixe}\index{lieu fixe}
Soit $f : E\to E$ une application d'un ensemble dans lui-même. Un élément $x\in E$ est dit \emph{fixe par $f$} (ou simplement \emph{fixe} s'il n'y a pas d'ambiguïté sur la fonction), si $f(x)=x$. On dit aussi que $x$ est un \emph{point fixe} de $f$. Le \emph{lieu fixe} de $f$ est la partie de $E$ constituée de tous les points fixes : $\Fix(f) = \{x\in E\:|\: f(x)=x \}$.
\end{definition}

\begin{exemple}
\begin{enumerate}
\item Soit $f : \R\to \R, x\mapsto x^2-2$. Ses points fixes sont $-1$ et $2$ (ce sont les solutions de l'équation $f(x)=x$). Son lieu fixe est donc $\{-1,2\}$.
\item L'application $\tau : \R^2\to \R^2, (x,y) \mapsto (x+2,y-3)$, n'a aucun point fixe. (C'est la translation de vecteur $\vec u = (2,-3)$.)
\item Soit $\Delta$ une droite du plan $\R^2$. La symétrie axiale $\sigma$ d'axe $\Delta$ a pour lieu fixe $\Fix(\sigma)=\Delta$.
\item De façon générale pour les transformations classiques du plan euclidien, une translation non triviale n'a aucun point fixe, une rotation non triviale a exactement un point fixe (le centre de la rotation), une symétrie axiale a une infinité de points fixes, dont l'union est l'axe de la symétrie.
\end{enumerate}
\end{exemple}

\begin{exercice}
Déterminer les points fixes de $f : \R\to \R, x\mapsto x^3$.
\end{exercice}

% a besoin des images directes.
\begin{definition}[partie stable]\index{partie!stable}
Soit $f : E\to E$ une application d'un ensemble dans lui-même. Une partie $A\subseteq E$ est \emph{stable par $f$}, (ou \emph{$f$-stable}, ou simplement \emph{stable} s'il n'y a pas d'ambiguïté pour la fonction), si $f(A)\subseteq A$.
\end{definition}

\begin{exercice}
Soit $f : \R\to \R, x\mapsto x^3-x$. Montrer que $[-1,1]$ est stable.
\end{exercice}

\subsection{Saturation}


\begin{propdef}[Saturation, partie saturée]
\index{partie!saturée}\index{saturation!relativement à une fonction}
Soit $f : E\to F$ et $A \subseteq E$ une partie de la source de $f$. La plus grande partie $B\subseteq E$ telle que $f(B) \subset f(A)$ est égale à $f^\leftarrow(f(A))$.

Cette partie est appelée la \emph{saturation} de $A$ (relativement à la fonction $f$). On dit que $A$ est \emph{saturée} (relativement à la fonction $f$) si elle est égale à sa saturation.
\end{propdef}
\begin{proof}
Par définition de $B$, on a $B = \{x\in E\:|\: f(x)\in f(A) \}$ et donc par définition d'une image réciproque, $B = f^\leftarrow(f(A))$.
\end{proof}

\begin{exemple}
\begin{enumerate}
\item La saturation $\operatorname{Sat}_f(A)$ d'une partie $A$ contient toujours $A$ mais elle peut être plus grande (voir ci-dessous).
\item La saturation d'une partie $A$ est saturée, autrement dit avec la notation plus haut  on a  $\operatorname{Sat}_f(\operatorname{Sat}_f(A)) = \operatorname{Sat}_f(A)$. Reformulation : l'application $\operatorname{Sat}_f : \mathcal P(E) \to \mathcal P(E), A\mapsto \operatorname{Sat}_f(A)$ vérifie la propriété $\operatorname{Sat}_f \circ \operatorname{Sat}_f = \operatorname{Sat}_f$.
\item Soit $f : \R\to \R_+, x\mapsto x^2$, et soit $A=\{2\} \subseteq \R$. La saturation de $A$ est 
\[f^\leftarrow(f(A)) = f^\leftarrow(\{4\}) = \{x\in \R\:|\: x^2=4\} = \{-2,2\}
\]
La saturation de $A$ contient donc strictement $A$, qui n'est donc pas saturée. Par contre, les parties $B = \{0\}$ et $C=\{-2,2\}$ sont saturées (relativement à $f$, toujours).
\end{enumerate}
\end{exemple}


\subsection{Principes de factorisation}

\begin{proposition}[Principe de factorisation à droite]
\index{factorisation!à droite}
\label{prop-CNS-factorisation-droite}
Soient $f : A\to B$ et $g : A\to C$. Rappelons que les trois assertions suivantes sont équivalentes:
\begin{enumerate}
\item  $g$ se factorise à droite par $f$;
\item il existe une application $h : B\to C$ telle que $g = h\circ f$;
\item il existe une application $h : B\to C$ faisant commuter  le diagramme \index{diagramme!commutatif} 
$\xymatrix{
A \ar[r]^g \ar[d]_{f}& C\\
B \ar@{-->}[ur]_{\exists h}& 
}$.
\end{enumerate}
Ces assertions sont vraies si et seulement si :
\[\forall x, y \in A, f(x)=f(y) \implies g(x)=g(y).\]
\end{proposition}
\begin{proof}
\textbf{Sens \og seulement si\fg.} Supposons que $g$ se factorise en $g = h\circ f$. Soient $x, y\in E$ tels que $f(x)=f(y)$. En composant à gauche par $h$, on obtient $h(f(x)) = h(f(y))$, c'est-à-dire $g(x)=g(y)$.\\
\textbf{Sens \og si\fg.} Supposons que $\forall x, y \in A, f(x)=f(y) \implies g(x)=g(y)$. Construisons une fonction $h$ vérifiant les conditions demandées. Soit $b\in B$. S'il existe $a\in A$ tel que $f(a)=b$, on définit $h(b)$ comme étant égal à $g(a)$. Sinon, on définit $h(b)$ comme étant un élément quelconque de $C$. En définissant ainsi un élément $h(b)\in C$ pour tout élément $b\in B$, on définit donc une fonction $h : B\to C$ et par construction, on a $g = h\circ f$.
\end{proof}

\begin{remarque} Si $A=C$ et $g=\Id_A$, cette proposition devient l'équivalence entre injectivité et existence d'une rétraction $h$ (inverse à gauche).
\end{remarque}

Cette proposition peut paraître abstraite mais en pratique elle est très facile à utiliser, comme le montre l'exemple suivant.
\begin{exemple}
Montrer que $g : \R\to\R, x\mapsto |x|$ se factorise à droite par $f : \R\to \R, x\mapsto x^2$.
\end{exemple}
\begin{red}
Soient $x, y\in \R$. Supposons $f(x)=f(y)$ c'est-à-dire $x^2=y^2$. Alors, $x=y$ ou $x=-y$, et donc on en déduit que $|x|=|y|$ c'est-à-dire $g(x)=g(y)$. D'après la proposition \ref{prop-CNS-factorisation-droite}, il existe $h : \R\to \R$ telle que $g =h\circ f$, ou encore : $\forall x\in \R, |x|=h(x^2)$. 
\end{red}

(Attention, dans l'exemple précédent $h$ n'est pas exactement la racine carrée : en effet $h$ doit être définie sur $\R$. D'ailleurs $h$ n'est pas unique.)




\begin{proposition}[Principe de factorisation à gauche]
\index{factorisation!à gauche}
\label{prop-CNS-factorisation-gauche}
Soient $f : A\to C$ et $g : B\to C$. Rappelons que les trois assertions suivantes sont équivalentes:
\begin{enumerate}
\item  $f$ se factorise à gauche par $g$;
\item il existe une application $h : A\to B$ telle que $f = g\circ h$;
\item il existe une application $h : A\to B$ faisant commuter le diagramme \index{diagramme!commutatif} 
$\xymatrix{
&B \ar[d]^{g} \\
A \ar[r]_f \ar@{-->}[ur]^{\exists h}& C
}$.
\end{enumerate}
Ces assertions sont vraies si et seulement si $f(A)\subseteq g(B)$.
\end{proposition}
\begin{proof}
\textbf{Sens \og seulement si\fg.} Supposons $f = g\circ h$, et soit $a\in A$. Alors $f(a) = g(h(a))$, donc $f(a) \in g(B)$. Ceci prouve que $f(A)\subseteq g(B)$.\\
\textbf{Sens \og si\fg.} Supposons $f(A)\subseteq g(B)$. Construisons une application $h$ vérifiant les conditions demandées. Soit $a\in A$. Comme $f(a) \in f(A) \subseteq g(B)$, $f(a) \in g(B)$ et donc $f(a)$ possède un antécédent par $g$. On définit $h(a)$ comme étant un tel antécédent. Par construction, on a $g\circ h = f$.
\end{proof}

\begin{remarque}
Si $A = C$ et que $f = \Id_C$, on retombe sur l'équivalence entre surjectivité et existence d'une section (inverse à droite).
\end{remarque}

\begin{exercice} 
(Dans cet exercice les fonctions vont de $\R$ dans $\R$.) 
Montrer l'application $x\mapsto x^2+6x+10$ se factorise à droite par $x\mapsto x+3$.
% l'autre facteur est $x\mapsto x^2+1$
 Montrer qu'elle se factorise à gauche par $x\mapsto x+5$.
% l'autre facteur est $x\mapsto x^2+6x+5$.
\end{exercice}









\section{Exercices d'approfondissement}

% restriction, corestriction 
\begin{exercice}
Soit $f : E\to F$, et $B$ une partie de $F$ contenant toutes les images des éléments de $E$ (autrement dit, $\forall x\in E, f(x)\in B$).
Soit $i : B\to F$ l'inclusion de $B$ dans $F$, et soit $r : F\to B$ une fonction définie comme suit : pour $y\in F$, on définit $r(y)=y$ si $y\in B$, et sinon, $r(y)$ est un élément arbitraire de $B$. 
\begin{enumerate}
\item Vérifier que $r$ est une rétraction de $i$.
\item Vérifier que la corestriction $f|^{B}$ est égale à la composée $r\circ f$.
\end{enumerate}
\end{exercice}

\begin{exercice}
Soient $f : A\to B$ et $g : A\to C$. On suppose que $g$ se factorise à droite par $f$.

Montrer que si $f$ est surjective, alors l'application $h$ qui factorise $g$ est forcément unique.
\end{exercice}


Les deux exercices suivants montrent que l'ensemble des surjections et l'ensemble des injections forment ce qui est parfois appelé un \emph{système orthogonal de factorisation}, une notion que l'on recroise dans plusieurs contextes en mathématiques.

\begin{exercice}[Factorisation en surjection puis injection]
Montrer que toute application se factorise en une surjection suivie d'une injection. Autrement dit, montrer que pour toute fonction $f : E\to F$, il existe un ensemble $G$, et des fonctions $\phi : E\to G$ et $\psi : G\to F$ telles que $f = \psi\circ \phi$, avec $\phi$ surjective et $\psi$ injective.
\end{exercice}

\begin{exercice}[Propriété du relèvement]
Soient $e : A\to B$ et $m : C\to D$ deux applications. On dit que $e$ est orthogonale (à gauche) à $m$ (ou que $m$ est orthogonale à droite à $e$), et on note $e\perp m$, si pour tout diagramme commutatif
\[
\xymatrix{
A \ar[r] \ar[d]_{e}& C\ar[d]^{m}\\
B \ar[r]& D 
},
\]
il existe un relèvement c'est-à-dire une application $r : B\to C$ faisant commuter le diagramme :
\[
\xymatrix{
A \ar[r] \ar[d]_{e}& C\ar[d]^{m}\\
B \ar[r]\ar[ur]^{r}& D 
}
\]
Montrer que si $e$ est surjective et $m$ est injective, alors $e\perp m$.
\end{exercice}

Les deux exercices qui suivent donnent un éclairage alternatif sur le produit cartésien et sa contrepartie, l' \og union disjointe\fg.

\begin{exercice}[Propriété universelle du produit]\index{propriété universelle!du produit}
Soient $A$ et $B$ des ensembles, et $ A\times B$ leur produit (cartésien). On note $\operatorname{pr}_A : A\times B \to A, (a,b)\mapsto a$ et $\operatorname{pr}_B : A\times B \to B, (a,b)\mapsto b$. Ces deux applications sont appelées les \emph{projections canoniques sur les facteurs du produit}.

Montrer que l'ensemble $A\times B$ ainsi que les deux projections vérifient la propriété suivante (dite \emph{propriété universelle du produit}):
\begin{quote}
Pour tout ensemble $D$ muni d'applications $f$ et $g$ vers (respectivement) $A$ et $B$, il existe une unique application $h : D\to A\times B$ telle que $f =\operatorname{pr}_A \circ  h$ et $g =\operatorname{pr}_B \circ  h$, c'est-à-dire qu'il existe une unique application $h : D\to A\times B$ faisant commuter le diagramme suivant:
\[ 
\xymatrix{
& & & A\\
D \ar@{-->}[rr]^{\exists !h} \ar[urrr]^{f} \ar[drrr]_{g} & & A\times B \ar[ur]_{pr_A} \ar[dr]^{pr_B}& \\
& & & B
}\]
\end{quote}
\end{exercice}

\begin{exercice}[Union disjointe/coproduit/somme cartésienne]\label{exo-coproduit}
\index{union disjointe}\index{coproduit}\index{propriété universelle!de l'union disjointe/coproduit}
Soient $A$ et $B$ deux ensembles. On appelle \emph{coproduit (ou union disjointe) de $A$ et $B$} l'ensemble
\[
A\coprod B = (\{0\}\times A) \bigcup (\{1\}\times B)
\]
Cet ensemble est muni de deux applications $i_A : A\to A\coprod B, a\mapsto (0,a)$ et  $i_B : B\to A\coprod B, b\mapsto (1,b)$.

Montrer que $A\coprod B$ ainsi que $i_A$ et $i_B$ vérifient la propriété suivante (dite \emph{propriété universelle du coproduit (ou de l'union disjointe)}): 
\begin{quote}
Pour tout ensemble  $C$ muni d'applications $f : A\to C$ et $g : B\to C$, il existe une unique application $h : A\coprod B \to C$ telle que $f = h\circ i_A$ et $g = h\circ i_B$, autrement dit il existe une unique application $h$ faisant commuter le diagramme  suivant:
\[ 
\xymatrix{
A \ar[dr]_{i_A} \ar[drrr]^{f}& & & \\
&  A\coprod B \ar@{-->}[rr]^{\exists !h}  & & C\\
B \ar[ur]^{i_B} \ar[urrr]_{g}& & &
}\]
\end{quote}
% aussi noté $A\biguplus B$
\end{exercice}


\begin{exercice}[Égalisateurs]\label{exo-egalisateur}
\index{égalisateur}\index{propriété universelle!de l'égalisateur}
Soient $A$ et $B$ deux ensembles et $f$ et $g$ deux applications entre $A$ et $B$. Soit $E = \{x\in A\:|\: f(x)=g(x)\}$ le lieu d'égalité des deux fonctions. On appelle cette partie l'\emph{égalisateur de $f$ et $g$}. On note de plus $i_E : E\to A$ l'application d'inclusion de $E$ dans $A$. On a donc $f\circ i_E = g\circ i_E$, ce que l'on peut résumer par le fait que le diagramme suivant commute:
\[
\xymatrix{
E \ar[r]_{i_E}& A\ar@/^/[r] ^{f} \ar@/_/[r]_{g} & B
}
\]
Montrer que $E$ et $i_E$ vérifient la propriété suivante (dite \emph{propriété universelle de l'égalisateur}):
\begin{quote}
Pour tout ensemble $X$ et application $\phi : X\to A$ vérifiant $f\circ \phi = g\circ \phi$,  il existe une unique application $h : X\to E$ telle que $\phi = i_E\circ h $. Autrement dit, il existe une unique application $h : X\to E$ faisant commuter le diagramme 
\[
\xymatrix{
& X \ar[d]^{\phi} \ar@{-->}_{\exists ! h}[dl]& \\
E \ar[r]_{i_E}& A\ar@/^/[r] ^{f} \ar@/_/[r]_{g} & B
}
\]
\end{quote}
\end{exercice}



\begin{exercice}[Produit fibré]\label{exo-produit-fibre}
\index{propriété universelle!du produit fibré}\index{produit fibré d'ensembles}
Soient $A$, $B$ et $C$ des ensembles et $\phi : A\to C$, $\psi : B\to C$ des applications.

Le \emph{produit fibré de $A$ et $B$ au-dessus de $C$ (les applications $\phi$ et $\psi$ étant sous-entendues)} est l'ensemble:
\[
A\times_C B := \{(x,y)\in A\times B\:|\: \phi(x)=\psi(y)\}
\]

On note $\operatorname{pr}_A : A\times_C B \to A, (a,b)\mapsto a$ et $\operatorname{pr}_B : A\times_C B \to B, (a,b)\mapsto b$. Ces deux applications sont appelées les \emph{projections canoniques sur les facteurs du produit fibré}. Par construction, on a donc $\phi\circ \operatorname{pr}_A = \psi\circ \operatorname{pr}_B$, autrement dit le diagramme suivant commute:
\[ 
\xymatrix{
 & A \ar[dr]^{\phi} &\\
 A\times_C B \ar[ur]_{pr_A} \ar[dr]^{pr_B}& & C\\
 & B \ar[ur]_{\psi}&
}\]


Montrer que l'ensemble $A\times_C B$ ainsi que les deux projections vérifient la propriété suivante (dite \emph{propriété universelle du produit fibré}):
\begin{quote}
Pour tout ensemble $D$ muni d'applications $f$ et $g$ vers (respectivement) $A$ et $B$ vérifiant $\phi \circ f =  \psi\circ g$, il existe une unique application $h : D\to A\times_C B$ telle que $f =\operatorname{pr}_A \circ  h$ et $g =\operatorname{pr}_B \circ  h$, c'est-à-dire qu'il existe une unique application $h : D\to A\times_C B$ faisant commuter le diagramme suivant:
\[ 
\xymatrix{
& & & A \ar[dr]^{\phi} &\\
D \ar@{-->}[rr]^{\exists !h} \ar[urrr]^{f} \ar[drrr]_{g} & & A\times_C B \ar[ur]_{pr_A} \ar[dr]^{pr_B}& & C\\
& & & B \ar[ur]_{\psi}&
}\]
\end{quote}
\end{exercice}

% produits cofibrés et coégalisateurs après les ensembles quotients


\begin{exercice}
Soient $A$, $B$ et $C$ des ensembles et $\phi : A\to C$, $\psi : B\to C$ des applications. On note $\operatorname{p}_A$ et $\operatorname{p}_A$ les surjections canoniques de $A\times B$ vers ses deux facteurs $A$ et $B$. Soit $E$ l'égalisateur de $\phi \circ \operatorname{p}_A$ et $\psi \circ \operatorname{p}_B$.

Montrer qu'il existe une bijection entre $E$ et $A\times_C B$ sans utiliser les définitions explicites de $E$ ni de $A\times_C B$, uniquement leur propriétés universelles.
% en fait vu les définitions, on a égalité ensembliste.
\end{exercice}

\begin{exercice}[Fibre et produit fibré]
Soit $f : A\to C$.
\begin{enumerate}
\item Si $c\in C$, montrer que la fibre de $f$ au-dessus de $c$ est exactement le produit fibré $A\times_C \{c\}$, où les applications de $A$ et $\{c\}$ vers $C$ sont $f$ et l'inclusion.
\item De manière plus générale, si $B\subseteq C$ est une partie, montrer que l'image réciproque de $B$ est exactement $A\times_C B$.
\end{enumerate}
Les notions de fibre et d'image réciproque sont donc des cas particuliers de la notion de produit fibré.
\end{exercice}



