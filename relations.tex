\chapter{Relations d'ordre, relations d'équivalence}
\minitoc
\hyperlink{toc}{\retourTOC}

\section{Relations binaires}

\begin{definition} Soit $E$ un ensemble. Une \emph{relation binaire}\index{relation binaire} ${\mathcal R}$ sur $E$ est une application de $E\times E$ dans $\{\text{vrai, faux}\}$.
\end{definition}

Une relation ${\mathcal R}$ est caractérisée par la partie de $E\times E$ constituée des couples $(x,y)$ tels que ${\mathcal R}(x,y)=\text{vrai}$. On notera \og$x{\mathcal R}y$\fg{} au lieu de \og${\mathcal R}(x,y)=\text{vrai}$\fg{} et \og$x\not \hspace{-.1cm}{\mathcal R} y$\fg{} au lieu de \og${\mathcal R}(x,y)=\text{faux}$\fg{}

\begin{exemples} Les symboles $\leq$, $<$, $\geq$, $>$, $|$ (divise), $//$ (parallèle à), $\perp$ (perpendiculaire à), $\subseteq$ (inclus dans) désignent des relations binaires entre ensembles.
\end{exemples}

\section{Relations d'ordre}

\subsection{Définitions et vocabulaire}

\begin{definition}
Soit $E$ un ensemble. Une relation binaire ${\mathcal R}$ sur $E$ est
\begin{enumerate}
\item réflexive\index{relation!réflexive} ssi $\forall x\in E, x{\mathcal R}x$;
\item transitive\index{relation!symétrique} ssi $\forall x, y, z\in E, x\mathcal Ry \text{ et } y{\mathcal R}z \implies x{\mathcal R}z$;
\item antisymétrique\index{relation!antisymétrique} ssi $\forall x, y \in E, x{\mathcal R}y\text{ et } y{\mathcal R}x \implies x=y$.
\end{enumerate}

Une relation est une \emph{relation d'ordre}\index{relation d'ordre} ssi elle est réflexive, transitive et antisymétrique.
\end{definition}

\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item La relation $\leq$ est une relation d'ordre sur $\N$, ou sur $\Z$, $\Q$, $\R$. (Mais pas sur $\C$ : la relation $\leq$ n'est même pas \emph{définie} sur $\C$.)
\item La relation $\subseteq$ est une relation d'ordre sur $\mathcal P(E)$. L'antisymétrie est exactement le principe de double inclusion.
\item La relation $|$ (\og divise\fg) est une relation d'ordre sur $\N^*$, ainsi que sur l'ensemble $\N$. Attention: dans $\N$, tout entier divise $0$! 
\end{enumerate}
\end{exemples}

Attention : $<$ n'est pas une relation d'ordre sur $\R$ (ni sur $\N$, $\Z$ ou $\Q$), car elle n'est pas réflexive, et la relation de divisibilité $|$ n'est pas une relation d'ordre sur $\Z^*$ ni sur $\Z$, car elle n'est pas antisymétrique : $1|-1$ et $-1|1$ et pourtant $1\neq -1$.
% C'est un préordre...

\begin{definition}
Si ${\mathcal R}$ est une relation d'ordre sur $E$, on peut lui associer une relation d'\emph{\index{ordre strict}}, définie par \og$ x{\mathcal R}y\text{ et }x\neq y$\fg. (Remarque : une relation d'ordre strict n'est pas une relation d'ordre puisqu'elle n'est pas réflexive.)
\end{definition}

Un ensemble $E$ muni d'une relation d'ordre ${\mathcal R}$ est appelé \emph{\index{ensemble ordonné}}. Par exemple, $(\R, \leq)$ est un ensemble ordonné.

Il faut systématiquement préciser l'ordre auquel on se réfère, même pour un ensemble \og connu\fg. Par exemple, $\N$ peut être muni de l'ordre usuel $\leq$ ou bien de la divisibilité $|$ et les deux ordres sont fréquemment utilisées.

Dans ce cours, on notera en général $\leq_E$ au lieu de ${\mathcal R}$ une relation d'ordre générique sur $E$ (même si la relation n'a rien à voir avec l'inégalité $\leq$ sur $\R$), afin de distinguer les relations d'ordre des relations binaires générales.

Si $\leq_E$ est une relation d'ordre sur $E$, on notera $<_E$ la relation d'\emph{ordre strict}\index{relation!d'ordre!strict} qui lui est associée.

\begin{definition}
Une relation d'ordre $\leq_E$ sur un ensemble $E$ est \emph{totale}\index{relation!d'ordre!total} si tous les éléments sont comparables, c'est-à-dire si:
\[ \forall x, y\in E, x\leq_Ey\text{ ou } y\leq_E x.\]
Un ensemble muni d'un ordre total est appelé \emph{ensemble totalement ordonné} \index{ensemble totalement ordonné}. Une relation d'ordre qui n'est pas totale est dite d'ordre \emph{partiel}\index{relation!d'ordre!partiel}.
\end{definition}

\begin{exemples}
La relation d'ordre $\leq$ sur $\R$ (ou $\N$, $\Q$ ou  $\Z$) est totale. Par contre, $\subseteq$ et $|$ ne sont pas totales. Par exemple, dans $\mathcal P(\R)$, les parties $\R_+$ et $]-3,6]$ ne sont pas comparables pour l'inclusion. Dans $\N^*$, les éléments $2$ et $3$ ne sont pas comparables pour la divisibilité.
\end{exemples}

\subsection{Applications croissantes}


\begin{definition}
Soient $(E,\leq_E)$ et $(F,\leq_F)$ des ensembles ordonnés, et $f : E\to F$. On dit que $f$ est \emph{croissante}\index{application!croissante} si :
\[ \forall x, y\in E, x\leq_E y \implies f(x) \leq_F f(y),\]
et \emph{décroissante}\index{application!décroissante} si :
\[\forall x, y\in E, x\leq_E y \implies f(y) \leq_F f(x).\]
\end{definition}

(Remarque : dans cette situation, il est important de distinguer les relations d'ordre sur $E$ et sur $F$.)

\begin{exemple}
\begin{enumerate}
\item L'application $f : \R\to \R, x\mapsto x+e^x$ est croissante pour l'ordre usuel $\leq $ sur $\R$.
\item Si $E$ est fini, l'application $f : \mathcal P(E) \to \N, \: A\mapsto \operatorname{Card}(A)$ est croissante entre les ensembles ordonnés $(\mathcal P(E), \subseteq)$ et $(\N, \leq)$.
\item L'application $f : \mathcal P(E) \to \mathcal P(E), \: A\mapsto A^c$ est décroissante pour l'inclusion, car $A\subseteq B \implies B^c\subseteq A^c$.
\end{enumerate}
\end{exemple}

Comme d'habitude, après les définitions viennent les propositions et théorèmes.

\begin{proposition}
\begin{enumerate}
\item La composée de deux applications croissantes est croissante.
\item La composée de deux applications décroissantes est croissante.
\item La composée d'une application décroissante et d'une croissante est décroissante.
\end{enumerate}
\end{proposition}

\begin{proof}
Application directe de la définition.
\end{proof}

\subsection{Plus grand et plus petit élément}
\begin{definition}
Soit $(E,\leq_E)$ un ensemble ordonné et $A\subseteq E$ une partie non vide.
\begin{enumerate}
\item Un élément $m\in E$ est un \emph{majorant}\index{majorant} de $A$ si $\forall a\in A, a\leq_E m$.
\item La partie $A$ est \emph{majorée} si elle possède des majorants.
\item Un élément $m\in A$ qui est un majorant de $A$ est appelé un \emph{plus grand élément de $A$}\index{plus grand élément}, ou \emph{maximum}\index{maximum} de $A$.
\item On définit de même les \emph{minorants}\index{minorant}, les parties minorées et les plus petits éléments\index{plus petit élément}.
\end{enumerate}
\end{definition}

\begin{exemple}
\begin{enumerate}[label=\alph*)]
\item Dans l'ensemble ordonné $(\R,\leq)$, la partie $[2,5]$ est majorée par $5$, mais aussi par $6$, $10$ etc. La partie $\R_+$ est minorée, mais pas majorée. La partie $\Z$ n'est ni minorée ni majorée.
\item Toute partie non vide de $\N$ admet un plus petit élément pour l'ordre usuel $\leq$ (c'est la propriété fondamentale de $\N$), mais pas forcément de plus grand élément.
\item Dans un ensemble ordonné non vide $(E,\leq_E)$, la partie vide est majorée: tout élément $m$ est un majorant, car l'assertion $\forall x\in \varnothing, x\leq_E m$ est vraie. De la même façon, dans un ensemble non-vide, la partie vide est minorée par n'importe quel élément.
\end{enumerate}
\end{exemple}



\begin{proposition}[Unicité du plus grand élément, s'il existe]
Si $A\subseteq E$ possède un plus grand élément, il est unique. On le note alors $\max(A)$.
De même, si $A\subseteq E$ possède un plus petit élément, il est unique. On le note alors $\min(A)$.
\end{proposition}
\begin{proof}
Soient $m$ et $m'$ deux plus grands éléments de $A$. Comme $m$ est un plus grand élément, on a par définition $\forall x\in A, x\leq_E m$ et donc en particulier $m'\leq_E m$. De même, comme $m'$ est un plus grand élément, on a $m\leq_E m'$. Par antisymétrie de la relation d'ordre, on a $m=m'$.

On prouve le résultat pour le plus petit élément de la même manière.
\end{proof}

\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item  La partie $[0,1]$ est majorée dans $\R$ car $1$, $2$ ou encore $5$ sont des majorants. Elle possède un plus grand élément : $1$.
\item La partie $]3,+\infty[$ de $\R$ n'a pas de plus grand élément car elle n'est pas majorée.
\item La partie $A=[0,1[$ de $\R$ est majorée. Par contre, elle n'a pas de plus grand élément. 
\item La partie $B=\{x\in \Q\:\mid\: x^2\leq 2\}$ est majorée (par $\sqrt2$ par exemple), mais n'admet pas de plus grand élément (rappel : $\sqrt 2 \not\in\Q$).
\item Si $E$ est un ensemble, alors $\mathcal P(E)$ muni de l'inclusion possède un plus grand élément : $E$, et un plus petit élément : $\varnothing$.
\item Dans l'ensemble ordonné $(\N^*,|)$, la partie $\{2,3,4\}$ n'a pas de plus grand élément.
\item Dans l'ensemble ordonné $(\N,|)$, il y a un plus petit élément au sens de la divisibilité, c'est $1$ (et non zéro). D'autre part, l'élément $0$ est en fait le plus grand élément au sens de la divisibilité: tout nombre entier $k$ divise $0$.
\end{enumerate}
\end{exemples}

\subsection{Borne supérieure, borne inférieure}

\begin{definition}[Borne supérieure]
 La partie $A\subseteq E$ admet une borne supérieure\index{borne supérieure} $s\in E$ ssi:
\begin{enumerate}
\item $s$ est un majorant de $A$;
\item tout majorant de $A$ majore $s$.
\end{enumerate}
(En d'autres termes, $s$ est le plus petit des majorants de $A$, ou encore : l'ensemble de tous les majorants de $A$ possède un plus petit élément $s$.)
\end{definition}

Attention, contrairement à un plus grand élément, une  borne supérieure de $A$, s'il en existe, n'appartient pas forcément à $A$. 

\begin{proposition}[Unicité de la borne supérieure, s'il en  existe une]
Soit $(E,\leq_E)$ un ensemble ordonné, et $A\subseteq E$. Si $A$ possède une borne supérieure, elle est unique et on la note $\sup(A)$.
\end{proposition}
\begin{proof}
Soient $s$ et $s'$ deux bornes supérieures de $A$. Comme $s$ est une borne supérieure et $s'$ un majorant, on a $s\leq_E s'$. Un raisonnement symétrique montre que  $s'\leq_E s$, et finalement $s'=s$.
\end{proof}

\begin{exemple}
La partie $\R_+ \subseteq \R$ n'a pas de borne supérieure. 
La partie $A=[0,1[ \subseteq \R$ n'a pas de plus grand élément, mais possède une borne supérieure : $1$.
\end{exemple}
\begin{proof} Pour le premier point, la partie n'a même pas de majorant donc c'est clair. 
D'une part, il est clair que $1$ est un majorant de $[0,1[$, c'est-à-dire que $\forall x\in [0,1[, \: x\leq 1$.

Vérifions la seconde partie de la définition.  Soit $m$ un majorant de $[0,1[$ et supposons par l'absurde que $m < 1$. On doit forcément avoir $0\leq m$ puisque $0\in [0,1[$. Donc $m+\frac{1-m}{2}=1+\frac{m}{2} \in [0,1[$.
\begin{center}
\begin{tikzpicture}[line cap=round,line join=round,>=triangle 45,x=1.0cm,y=1.0cm]
\clip(-0.5,-1.5) rectangle (10.5,1);
\draw (0,0)-- (10,0);
\begin{scriptsize}
\draw[color=black] (0.0,-0.5) node {$0$};
\draw [fill=black] (6,0) circle (2pt);
\draw[color=black] (6.0,-0.5) node {$m$};
\draw [fill=black] (8,0) circle (2pt);
\draw[color=black] (8.0,-0.5) node {$m+\frac{1-m}{2}$};
\draw[color=black] (10.0,-0.5) node {$1$};
\end{scriptsize}
\end{tikzpicture}
\end{center}

 Comme $m$ est un majorant, on doit avoir $1+\frac{m}{2}\leq m$, donc $1+m\leq 2m$ donc $m\geq 1$, absurde.
\end{proof}

Autre exemple important de borne supérieure qui n'est pas un plus grand élément: la partie $\{x\in \Q, x^2<2\}$ de $\R$ est majorée et admet une borne supérieure égale à $\sqrt 2$ et qui n'appartient pas à $A$ car $\sqrt2\not\in \Q$. 

\begin{proposition}
Soit $(E,\leq_E)$ un ensemble ordonné $A\subseteq E$.
Si $A$ admet une borne supérieure et que $\sup(A) \in A$, alors c'est son plus grand élément.
Si $A$ admet un plus grand élément, c'est aussi sa borne supérieure.
\end{proposition}
\begin{proof}
Exercice, appliquer les définitions.
\end{proof}

Enfin, on définit de même ce qu'est une \emph{borne inférieure}\index{borne inférieure}, et on montre que si une partie admet une borne inférieure, alors celle-ci est unique. On la note $\inf(A)$. 

La borne inférieure d'une partie, même si elle existe, n'appartient pas forcément à la partie. Par exemple, $0$ est la borne inférieure de $]0,1]$.

\begin{theoreme}[$\R$ possède la propriété de la borne supérieure]
Dans $(\R,\leq)$, toute partie non vide et majorée admet une borne supérieure.
\end{theoreme}
\begin{proof}
Admis provisoirement. Pour prouver ce théorème, il faut disposer d'une définition rigoureuse de l'ensemble $\R$. Voir le cours d'analyse de second semestre.
\end{proof}

Il existe des ensembles ordonnés ne possédant pas la propriété de la borne supérieure, c'est-à-dire possédant des parties non-vides, majorées, et sans borne supérieure. C'est le cas de $(\Q,\leq)$, si l'on considère la partie $\{x\in \Q\:\mid\: x^2\leq 2\}$ : il n'existe pas de borne supérieure de cette partie \underline{dans $\Q$}.


\subsection{Ordre produit et ordre lexicographique}

\begin{propdef}
Soient $(E\leq_E)$ et $(F,\leq_F)$ des ensembles ordonnés.
L'\emph{ordre produit}\index{relation!d'ordre!produit} sur $E\times F$ est défini par :
\[
(x,y) \leq_{E\times F} (x',y') \iff \left(x\leq_E x' \text{ et } y\leq_F y'\right).
\]
\end{propdef}
\begin{proof}
Il s'agit de prouver que la relation binaire définie est bien une relation d'ordre donc réflexive, antisymétrique et transitive. Exercice.
\end{proof}

Attention, même si $\leq_E$ et $\leq_F$ sont totales, l'ordre produit n'est pas forcément un ordre total. Par exemple, pour $E=F=\R$ et l'ordre usuel sur $\R$ qui est bien total, on remarque que l'ordre produit $\leq_{\R\times\R}$ sur $\R\times \R$ n'est pas total car $(1,2)$ et $(2,1)$ ne sont pas comparables.

\begin{propdef}
Soient $(E\leq_E)$ et $F,\leq_F)$ des ensembles \textbf{totalement} ordonnés.
L'ordre lexicographique\index{relation!d'ordre!lexicographique} sur $E\times F$ est défini par :
\[
(x,y) \leq_{E\times F} (x',y') \iff \left(x<_E x' \text{ ou } (x=x' \text{ et } y\leq_F y')\right).
\]
C'est un ordre total.
\end{propdef}
\begin{proof}
La propriété de relation d'ordre est laissée en exercice. Prouvons que l'ordre est total.

Soient en effet $(x,y)$ et $(x',y')$ distincts.
Si $x\neq x'$, alors comme $\leq_E$ est un ordre total, on a forcément $x<_E x'$ ou bien $x'<_E x$.
Si $x=x'$, alors on a forcément $y\neq y'$ et comme $\leq_F$ est un ordre total, on a forcément $y <_F y'$ ou bien $y'<_F y$.

En conclusion, on a bien soit $(x,y) \leq_{E\times F} (x',y')$, soit  $(x',y') \leq_{E\times F} (x,y)$.
\end{proof}

\begin{exemple}Avec l'ordre usuel sur l'alphabet, l'ordre lexicographique sur les mots est l'ordre dans lequel les mots sont classés dans un dictionnaire.
\end{exemple}



\section{Relations d'équivalence}

\subsection{Définitions}

\begin{definition}[Relation d'équivalence]
Une relation binaire ${\mathcal R}$ sur un ensemble $E$ est une \emph{relation d'équivalence}\index{relation!d'équivalence} ssi elle est:
\begin{enumerate}
\item réflexive (rappel : $\forall x\in E, x{\mathcal R}x$);
\item transitive (rappel : $\forall x, y, z\in E, x{\mathcal R}y\text{ et } y{\mathcal R}z \implies x{\mathcal R}z$);
\item symétrique\index{relation!symétrique} : $\forall x, y\in E, x{\mathcal R}y \implies yRx$.
\end{enumerate}
\end{definition}

\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item Les relations $=$, $//$ (parallélisme), sont des relations d'équivalence.
\item La relation $\perp$ (perpendiculaire) n'est \textbf{pas} une relation d'équivalence car elle n'est pas réflexive, ni transitive.
\item Tout ensemble possède la relation d'équivalence triviale : celle où tous les éléments sont équivalents.
\item Sur $\R$, la relation $x\mathcal R y \iff \left(x=y\text{ ou }x=-y\right)$ est une relation d'équivalence.
\item Sur $\R$, la relation $x\mathcal R y \iff \sin(x)=\sin(y)$ est une relation d'équivalence.
\item Sur $\C$, la relation $z\mathcal R z' \iff |z|=|z'|$ est une relation d'équivalence.

\item Un singleton\index{singleton}, c'est-à-dire un ensemble contenant un unique élément, possède une seule relations d'équivalence (celle où l'unique élément est relié à lui-même).
\item L'ensemble vide\index{ensemble vide} possède une seule relation d'équivalence, la relation vide (la seule fonction de $\varnothing \times \varnothing$ dans $\{\text{vrai,\: faux}\}$ à savoir la fonction vide : on vérifie qu'elle définit bien une relation d'équivalence).
\item Un ensemble $\{a,b\}$ à deux éléments possède deux relations d'équivalence distinctes : la première est l'\emph{égalité}, la seconde est la \emph{relation d'équivalence triviale}, celle où $a$ et $b$ sont équivalents.
\item De façon générale, on peut toujours définir, sur un ensemble non-vide, la \emph{relation triviale}, celle où tous les éléments sont équivalents. (Cette relation est peu utile.)
\item Un ensemble à trois éléments possède cinq relations d'équivalence (exercice).
\end{enumerate}
\end{exemples}

\begin{proposition}[Fibres d'une application]\index{fibre}
Si $f : E\to F$ est une application, alors la relation 
\[
x\mathcal R y \iff (x\text{ et }y \text{ sont dans la même fibre de }f)
\]
est une relation d'équivalence sur $E$.

(Rappelons que par définition de ce que sont les fibres d'une application, on peut reformuler la définition de cette relation en: $x\mathcal R y \iff f(x)=f(y)$.)
\end{proposition}
\begin{proof}
Soit $x \in E$. Alors on a bien $f(x)=f(x)$ donc $x\mathcal R x$, donc $\mathcal R$ est réflexive. Si $x, y\in E$, on a bien $x\mathcal R y \iff f(x)=f(y) \iff f(y)=f(x) \iff y\mathcal x$ donc $\mathcal R$ est symétrique. Et enfin, Si $x,y,z\in E$ et que $x\mathcal R y$ et $y\mathcal R z$, alors $f(x)=f(y)$ et $f(y)=f(z)$, donc $f(x)=f(z)$ et donc $x\mathcal R z$, donc $\mathcal R$ est transitive. Ceci montre que $\mathcal R$ est bien une relation d'équivalence.

On verra dans la dernière section que toutes les relations d'équivalence sont de ce type, pour une application $f$ bien choisie : la \emph{surjection canonique sur le quotient}.
\end{proof}

D'autres exemples importants de relations d'équivalence sont les congruences. Commençons par rappeler les définitions.

\begin{propdef}
Soit $a\in \R^*$ et $x,y\in\R$. On a :
\[
\frac{x-y}{a}\in \Z 
\iff
x-y \in a\Z
\iff 
(\exists k\in \Z\:\mid\: x=y+ka).
\]
Si ces conditions équivalentes sont vérifiées, on dit que $x$ et $y$ sont \emph{congrus modulo $a$} et on note 
\[ x\equiv y\quad [a].\]
La relation de congruence\index{congruence!modulo un réel} modulo $a$ entre deux réels $x$ et $y$ est une relation d'équivalence.
\end{propdef}
\begin{proof}
Exercice.
\end{proof}

De toutes ces formulations, la plus efficace pour rédiger des preuves est en général la première.

Les relations de congruence les plus courantes sont celles modulo des entiers, ou bien modulo $\pi$ ou $2\pi$ etc.


\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item $1 \equiv 5 \: [2]$, car $1-5 = -4$ est un multiple de $2$.
\item $4\equiv -9\sqrt{3}+4 \: [\sqrt{3}]$, car $4 - (-9\sqrt{3}+4) = 9\sqrt{3}$ est un multiple de $\sqrt{3}$.
\item $\pi/3 \equiv 7\pi/3 \: [2\pi]$, car $\pi/3 - 13\pi/3 = -12\pi/3 = -4\pi$ est un multiple de $2\pi$.
\end{enumerate}
\end{exemples}

Les congruences se comportent relativement bien par rapport aux opération algébriques, comme le montre la proposition suivante (avec un bémol pour la multiplication, voir l'énoncé et la remarque qui suit).

\begin{proposition} Soit $a\neq 0$ et $b\neq 0$ des réels non nuls, et $x$, $y$, $x'$, $y'$ des réels tels que $x \equiv y\: [a]$ et $x' \equiv y'\: [a]$. Alors:
\begin{itemize}
\item[i)]{$x+x' \equiv y+y'\: [a]$.}
\item[ii)]{$bx\equiv by \: [ba]$.}
\end{itemize}
\end{proposition}
\begin{proof}
\begin{itemize}
\item[i)]{Si $\frac{x-y}{a} \in \Z$ et $\frac{x'-y'}{a} \in \Z$, alors $\frac{x-y}{a}+\frac{x'-y'}{a} \in \Z$.

On a donc $\frac{(x+x')-(y+y')}{a} \in \Z$, c'est-à-dire $x+x' \equiv y+y'\: [a]$.}
\item[ii)]{On a:
\[\left(x\equiv y \: [a]\right) \Leftrightarrow  \left(\frac{x-y}{a} \in \Z\right) \Leftrightarrow \left(\frac{bx-by}{ba} \in \Z\right) \Leftrightarrow \left(bx\equiv by \: [ba]\right).\]}
\end{itemize}
\end{proof}

\begin{remarque}
Attention au second point, multiplier une congruence par $b$ change la base de congruence, qui est également multipliée par $b$.
\end{remarque}

\begin{definition}
Si $a\in \Z^*$, la relation de congruence modulo $a$ sur $\Z$ induit une relation d'équivalence sur $\Z$, également appelée la relation de congruence modulo $a$ sur $\Z$, et notée de la même façon.
\end{definition}

\subsection{Classes d'équivalence}
\begin{definition}
Soit $E$ un ensemble muni d'une relation d'équivalence ${\mathcal R}$. Soit $x\in E$. On note $\overline{x}$ et on appelle la \emph{classe d'équivalence\index{classe d'équivalence} de $x$ modulo $\mathcal R$ (ou : sous $\mathcal R$)} l'ensemble $\left\{y\in E\:\mid\: y{\mathcal R}x\right\}$ des éléments qui sont équivalents à $x$.
\end{definition}

Attention au type des objets : $x \in E$, mais $\overline{x} \subseteq E$.

\begin{proposition}
\begin{enumerate}
\item $\forall x\in E, x\in \overline{x}$.
\item $\forall x, y\in E, x{\mathcal R}y \iff \overline{x}=\overline{y}$.
\item $\forall x, y\in E, \overline{x} = \overline{y} \text{ ou } \overline{x}\cap \overline{y}=\varnothing$.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Découle de la réflexivité.
\item Sens $\impliedby$ : Supposons $\overline{x}=\overline{y}$. Comme $y\in \overline{y}$, on a $y\in \overline{x}$, donc $y{\mathcal R}x$.\\
Sens $\implies$ : Soit $z\in \overline{x}$. Alors $z{\mathcal R}x$ et comme $x{\mathcal R}y$, on a $z{\mathcal R}y$ par transitivité, et donc $z\in \overline{y}$. Ceci montre $\overline{x}\subseteq \overline{y}$. Pour montrer l'inclusion réciproque, on a $y{\mathcal R}x$ par symétrie de $R$ puis on termine de la même manière.
\item Soient $x$ et $y$, et supposons $\overline{x}\cap \overline{y} \neq \varnothing$. Soit $z\in \overline{x}\cap \overline{y}$. Alors $z\mathcal R x$ et $z\mathcal R y$, donc par symétrie et transitivité, $x\mathcal R y$, d'où $\overline{x}=\overline{y}$. On en déduit que deux classes sont soit égales soit disjointes.
\end{enumerate}
\end{proof}

\begin{definition}
Soit $E$ un ensemble muni d'une relation d'équivalence ${\mathcal R}$.
L'ensemble des classes d'équivalence est appelé \emph{ensemble quotient de $E$ par $\mathcal R$}\index{ensemble quotient sous une relation d'équivalence} et est noté $E/{\mathcal R}$.

L'application $p : E \to E/\mathcal R, x\mapsto \overline{x}$ qui à un élément de $E$ lui associe sa classe d'équivalence est appelée \emph{application de passage au quotient}, ou \emph{projection canonique sur le quotient}\index{projection canonique sur le quotient}\index{application de passage au quotient}.
\end{definition}

\begin{exemple}
Pour l'ensemble $E$ des droites du plan $\R^2$ muni de la relation d'équivalence $//$, les classes d'équivalence sont appelées \emph{directions} : deux droites sont parallèles si et seulement si elles ont la même \emph{direction}. L'ensemble quotient de $E$ par la relation de parallélisme est l'ensemble des directions du plan. On le note $\P^1(\R)$ et on l'appelle la droite projective.
\end{exemple}

\begin{proposition}
Soit $E$ un ensemble muni d'une relation d'équivalence ${\mathcal R}$ et $p = E\to E/\mathcal R$ la projection sur le quotient. Alors 
\begin{enumerate}
\item $p$ est surjective.
\item $x\mathcal R y \iff p(x)=p(y)$.
\item Les fibres\index{fibre} sont exactement les classes d'équivalence modulo la relation $\mathcal R$.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Soit $A$ une classe d'équivalence. Par définition, il existe $x\in E$ tel que $A = \overline{x} = p(x)$. Donc $p$ est surjective.
\item On a $x\mathcal R y \iff \overline{x} = \overline{y} \iff p(x)=p(y)$.
\item C'est une relation du deuxième point, puisque par définition de la fibre d'une application quelconque $f$, deux éléments $x$ et $y$ sont dans la même fibre si et seulement $f(x)=f(y)$.
\end{enumerate}
\end{proof}




\subsection{Partitions et classes d'équivalence}

\begin{definition}[Partition d'un ensemble]
Soit $E$ un ensemble, et $\mathcal A$ un ensemble de parties de $E$, c'est-à-dire $\mathcal A\subset \mathcal P(E)$. L'ensemble $\mathcal A$ est une \emph{partition de $E$ en ensembles non vides}, ou simplement \emph{partition\footnote{Notation adoptée dans tout ce cours} de $E$}\index{partition}, si : 
\begin{enumerate}
\item les parties sont non vides c'est-à-dire $\forall A\in \mathcal A, \: A\neq \varnothing$.
\item les parties recouvrent $E$ c'est-à-dire que leur union égale $E$, autrement dit $\bigcup_{A\in \mathcal A} A = E$.
\item Les parties sont deux à deux disjointes, c'est-à-dire $\forall A, A' \in \mathcal A, \: A\cap A' = \varnothing$.
\end{enumerate}
\end{definition}

\begin{proposition}[Partition définie par une famille]
Soit $E$ un ensemble, et soit $(A_i)_{i\in I}$ une famille de parties de $E$. Cette famille définit une partition de $E$ si :
\begin{enumerate}
\item Les $A_i$ sont toutes non vides.
\item On a $\bigcup_{i\in I} A_i = E$.
\item Les parties $A_i$ sont deux à deux disjointes : $\forall i, j\in I, i\neq j \implies A_i\cap A_j=\varnothing$.
\end{enumerate}
\end{proposition}
\begin{proof}
Immédiat sur la définition.
\end{proof}

\begin{exemple}
\begin{enumerate}
\item L'ensemble vide\index{ensemble vide} possède une seule partition, la partition vide qui ne contient aucune partie (car les parties elles, doivent être non-vides).
\item Un ensemble $\{a,b\}$ à deux éléments possède deux partitions : la partition triviale $\big\{\: \{a,b\} \:\big\}$ et la partition en deux singletons $\big\{\: \{a\},\{b\} \:\big\}$.
\item Un ensemble à trois éléments possède cinq partitions distinctes (exercice).
\item Tout ensemble possède la partition $\big\{\: \{x\}\:\mid\: x\in E \:\big\}$ qui est la partition en singletons inclus dans $E$. (Si $E$ est vide, la partition est vide).\index{partition!en singletons}
\item Tout ensemble  $E$ possède toujours au moins la partition triviale\index{partition!triviale} en une seule partie, l'ensemble lui-même. C'est bien une partition car $E$ est non-vide. Cette partition s'écrit donc $\big\{\: E \:\big\}$.
\item L'ensemble $\Z$ possède la partition en deux parties suivante : $\big\{\: 2\Z, \: 2\Z+1\:\big\}$. C'est la partition en nombres pairs et nombres impairs.
\end{enumerate}
\end{exemple}

\begin{exercice}[Raffinement d'une partition]\index{raffinement d'une partition}\index{partition!plus fine}
Soient $\mathcal A$ et $\mathcal B$ deux partitions de $E$. On dit que $\mathcal A$ est \emph{plus fine} que $\mathcal B$ (ou : qu'elle est un raffinement de $\mathcal B$) si les éléments de $\mathcal B$ sont des unions d'éléments de $\mathcal A$, autrement dit si $\mathcal A$ fractionne les éléments de $\mathcal B$ en sous-parties.

Montrer que la relation binaire \og être plus fine que\fg{} est une relation d'ordre sur l'ensemble de toutes les partitions de $E$, et que l'ordre n'est en général pas total.

Si $E$ est un ensemble à trois éléments, dire, parmi les cinq partitions possibles, lesquelles sont comparables.
\end{exercice}

\begin{remarque}
Le plus grand élément de cet ensemble ordonné est la partition la  plus fine\index{partition!la plus fine} : c'est la partition en singletons, c'est-à-dire l'ensemble de tous les singletons inclus dans $E$. Cette partition est plus fine que toute autre. Si $E$ est non-vide, la partition la moins fine\index{partition!la moins fine} est la partition triviale (celle à une seule partie).  
\end{remarque}



\begin{proposition}[Partition en classes d'équivalence]\index{partition!en classes d'équivalence}
Soit $\mathcal R$ une relation d'équivalence sur $E$. Alors $E/\mathcal R$ est une partition de $E$.
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Une classe d'équivalence n'est jamais vide, puisque qu'elle est toujours de la forme $\overline{x}$ et donc contient un élément $x$.
\item Soit $a\in E$. On a $\overline{a} \in E/\mathcal R$, et $a\in \overline{a}$. Donc $a\in \bigcup_{A\in E/\mathcal R} A$. On en déduit que $E\subseteq \bigcup_{A\in E/\mathcal R} A$.
\item On a déjà montré que deux classes d'équivalence sont soit égales soit disjointes.
\end{enumerate}
\end{proof}

\begin{remarque}[Zérologie] Le quotient de l'ensemble vide\index{ensemble vide} par son unique relation d'équivalence est l'ensemble des classes d'équivalence : comme il n'y a aucune classe d'équivalence, l'ensemble quotient est vide. La projection canonique est l'application $p : \varnothing \to \varnothing$ (dite application vide). Elle est bien surjective...
\end{remarque}

Ce résultat admet une \og réciproque\fg : 

\begin{proposition}
Soit $\{A_i\:\mid i\in I\}$ une partition d'un ensemble $E$. Alors la relation
\[
x\mathcal R y \iff \left( \exists i\in I\:,\: x\in A_i\text{ et } y\in A_i\right)
\]
est une relation d'équivalence.
\end{proposition}
\begin{proof}
Voir TD.
\end{proof}

Ces deux propositions permettent de montrer qu'\og une relation d'équivalence sur $E$ est la même chose qu'une partition de $E$\fg : attention, à proprement parler ce ne sont pas les mêmes objets (pas le même type), mais le sens précis de cette phrase est qu'il existe une bijection entre d'une part l'ensemble des relations d'équivalence sur $E$, et d'autre part, l'ensemble des partitions de $E$.

\begin{corollaire}[Application à la combinatoire]
Si $\mathcal R$ est une relation d'équivalence sur un ensemble fini $E$, alors $|E| = \sum_{A\in E/\mathcal R} |A|$.
\end{corollaire}
\begin{proof}
On a  $E= \bigcup_{A\in E/\mathcal R} A$ et l'union est disjointe, donc on obtient le résultat en prenant le cardinal des deux membres.
\end{proof}

% chercher un exo d'application avec des bijections : nombres de points fixes

\begin{exercice}
\index{involution}\index{point fixe}
Soit $E$ un ensemble fini et $f : E\to E$ une involution, c'est-à-dire vérifiant $f\circ f = \Id_E$.
\begin{enumerate}
\item Montrer que si $f$ n'a pas de point fixes, alors $|E|$ est pair.
\item Plus généralement, montrer que $|E|$ a la même parité que le nombre de points fixes de $f$.
\end{enumerate}
\end{exercice}

\section{Compléments sur les quotients}

\begin{propdef}[Passage au/factorisation par le quotient]
Soit $f : E\to F$ une application, $\mathcal R$ une relation d'équivalence sur $E$  et $p : E\to E/\mathcal R$ la projection canonique sur le quotient.
On dit que $f$ \emph{passe (ou descend) au quotient} si elle se factorise à droite par $p$, autrement dit s'il existe une application $\overline f : E/\mathcal R\to F$ telle que $f = \overline{f} \circ p$, autrement dit telle que le diagramme suivant commute:
\[
\xymatrix{
E \ar[r]^f \ar[d]^p & F\\
E/\mathcal R \ar[ur]_{\overline f}& 
}
\] 
Si une telle application $\overline{f}$ existe, elle est unique.
\end{propdef}
\begin{proof}(de l'unicité). Soit $\alpha \in E/\mathcal R$. Comme la projection canonique $p : E\to E/\mathcal R$ est surjective, il existe $x\in E$ tel que $\alpha=p(x)$. Or par hypothèse, on a $f = \overline{f} \circ p$, donc $\overline f(\alpha) =\overline f(p(x))= f(x)$. Ceci montre que les valeurs de $\overline f$ sont déterminées par la fonction $f$.
\end{proof}


\begin{proposition}[Condition nécessaire et suffisante de passage au quotient]
Soit $f : E\to F$ une application, et $\mathcal R$ une relation d'équivalence sur $E$.

Alors, $f$ descend au quotient en une application $\overline f : E/\mathcal R \to F$ si et seulement si elle est constante sur les classes d'équivalence, c'est-à-dire si et seulement si:
\[
\forall x,y\in E, x\mathcal R y \implies f(x)=f(y).
\]
\end{proposition}

% référer aux lemmes de factorisation généraux dans "applications"

\begin{exercice}[Produits de quotients, quotients de produits]
Soient $E$ et $F$ deux ensembles munis chacune d'une relation d'équivalence (notées $\mathcal R$ et $\mathcal S$.
\begin{enumerate}
\item Montrer que la relation binaire sur $E\times F$ définie par 
\[
(x,y) \mathcal T (x',y') \iff \left( x\mathcal R x' \text{ et } y\mathcal S y'\right)
\]
est une relation d'équivalence.
\item Montrer que l'application
\[ \psi : 
\begin{cases}
(E/\mathcal R) \times (F/\mathcal S) \to (E\times F)/\mathcal T\\
(\overline{x}^\mathcal R,\overline{y}^\mathcal S) \mapsto \overline{(x,y)}^\mathcal T
\end{cases}
\]
est une bijection.
\end{enumerate} 

\end{exercice}