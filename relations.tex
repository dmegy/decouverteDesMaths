\chapter{Relations d'ordre, relations d'équivalence}
\minitoc
\hyperlink{toc}{\retourTOC}

% TODO : mettre des relations d'équivalence sur $\R^2$ ! 

\section{Relations binaires}

% mettre qq part une remarque sur les relations ternaires, ... n-aires ? ou pas

\begin{definition}[Relation binaire]
Soit $E$ un ensemble. Une \emph{relation (binaire)}\index{relation binaire} ${\mathcal R}$ sur $E$ est une application de $E\times E$ dans $\{\text{vrai, faux}\}$. On note en général \og$x{\mathcal R}y$\fg{} au lieu de \og${\mathcal R}(x,y)=\text{vrai}$\fg{}.
\end{definition}

\begin{definition}[Graphe d'une relation binaire]
Soit $\mathcal R$ une relation binaire sur $E$. La partie de $E\times E$ constituée des couples $(x,y)$ tels que ${\mathcal R}(x,y)=\text{vrai}$ est appelée le \emph{graphe} de la relation $\mathcal R$. Ce graphe est parfois noté $\Gamma_{\mathcal R}$.

Réciproquement, si $E$ est un ensemble et $\Gamma \subseteq E\times E$, on obtient une relation binaire ${\mathcal R}_\Gamma$ qui est définie par $\forall x, y\in E, \: x{\mathcal R}_\Gamma y \iff (x,y)\in \Gamma$. Le graphe de cette relation binaire est exactement $\Gamma$.
\end{definition}






Si $E$ est un ensemble fini dont on note $x_1$, ... $x_n$ les éléments, on peut visualiser une relation binaire comme un tableau à double entrée dans les éléments de $E$, dont les valeurs sont \og vrai\fg{} ou \og faux\fg (ou \og oui\fg{} ou \og non\fg), du type suivant:

\begin{center}
\begin{tabular}{|l|c|c|c|c|}\hline
		& $x_1$ & $x_2$ & $\dots$ & $x_n$ \\ \hline
$x_1$ 	& oui & non & $\dots$ & oui \\ \hline
$x_2$ 	& non & non & $\dots$ & non \\ \hline
$\vdots$& $\vdots$ & $\vdots$ &  $\ddots$ & $\vdots$ \\ \hline
$x_n$	& non & non & $\dots$ & oui \\ \hline
\end{tabular}
\end{center}

Un tel tableau détermine si, étant donné deux éléments $x$ et $y$, on a $x\mathcal R y$ ou pas. 



\begin{exemple}
Si $E$ est fini de cardinal $n$, il existe $2^{n^2}$ relations binaires sur $E$. En effet, d'après \ref{prop-cardinal-produit}, l'ensemble $E\times E$ est de cardinal $n^2$ et donc d'après \ref{prop-cardinal-parties} il admet $2^{n^2}$ parties.
\end{exemple} 

\begin{exemples}
Les symboles $=$, $\leq$, $<$, $\geq$, $>$, $|$ (divise), $//$ (parallèle à), $\perp$ (perpendiculaire à), $\subseteq$ (inclus dans) désignent des relations binaires sur des ensembles. La relation d'égalité $=$ a pour graphe la \emph{diagonale} de $E\times E$, c'est-à-dire à la partie 
\[ \Delta_E = \{(x,x)\:|\: x\in E\}\]
\index{partie!diagonale}
Les deux tableaux suivants illustrent deux relations distinctes sur le même ensemble $\{1,2,3,4\}$: l'inégalité large $\leq$ et la divisibilité.
\begin{center}
\begin{tabular}{|l|c|c|c|c|}\hline
$\leq$ & $1$ & $2$ & $3$ & $4$ \\ \hline
$1$ 	& oui & oui & oui & oui \\ \hline
$2$ 	& non & oui & oui & oui \\ \hline
$3$ & non & non & oui & oui \\ \hline
$4$	& non & non & non & oui \\ \hline
\end{tabular}
~~~
\begin{tabular}{|l|c|c|c|c|}\hline
divise & $1$ & $2$ & $3$ & $4$ \\ \hline
$1$ 	& oui & oui & oui & oui \\ \hline
$2$ 	& non & oui & non & oui \\ \hline
$3$ & non & non & oui & non \\ \hline
$4$	& non & non & non & oui \\ \hline
\end{tabular}
\end{center}
\end{exemples}

On peut également représenter graphiquement une relation binaire sur un ensemble $E$ au moyen d'un \emph{graphe orienté} dont les sommets sont les éléments de l'ensemble $E$, et les flèches symbolisent la relation existante entre deux éléments. Les deux relations données en exemple plus haut peuvent se représenter par les graphes:
\[
\xymatrix{
& & & \\
1 \ar@(dl,dr) \ar[r] \ar@/^1pc/[rr] \ar@/^2pc/[rrr] 
& 2 \ar@(dl,dr) \ar[r] \ar@/^1pc/[rr] 
& 3 \ar@(dl,dr) \ar[r]
& 4 \ar@(dl,dr)\\
& & & 
}
\hspace{2cm}
\xymatrix{
& & & \\
1 \ar@(dl,dr) \ar[r] \ar@/^1pc/[rr] \ar@/^2pc/[rrr] 
& 2 \ar@(dl,dr)  \ar@/^1pc/[rr] 
& 3 \ar@(dl,dr) 
& 4 \ar@(dl,dr)\\
& & & 
}
\]

\begin{exemple}[Zérologie]
\begin{enumerate}
\item La \emph{relation vide} est celle dont le graphe est la partie vide de $E\times E$. Pour cette relation, un élément n'est relié à aucun autre : $x\mathcal R y$ est toujours faux.
\item À l'autre extrême, la partie pleine de $E\times E$ est le graphe d'une relation binaire $\mathcal R$ pour laquelle tout élément est relié à tout autre élément : $x\mathcal R y$ est toujours vrai.
\end{enumerate}
\end{exemple}

\begin{definition}
Soit $E$ un ensemble. Une relation binaire ${\mathcal R}$ sur $E$ est : 
\begin{enumerate}
\item réflexive\index{relation!réflexive} ssi $\forall x\in E, x{\mathcal R}x$;
\item transitive\index{relation!symétrique} ssi $\forall x, y, z\in E, x\mathcal Ry \text{ et } y{\mathcal R}z \implies x{\mathcal R}z$;
\item antisymétrique\index{relation!antisymétrique} ssi $\forall x, y \in E, x{\mathcal R}y\text{ et } y{\mathcal R}x \implies x=y$.
\item symétrique\index{relation!symétrique} ssi $\forall x, y\in E, x\mathcal R y \implies y\mathcal R x$.
\end{enumerate}
\end{definition}

\begin{attention}
Contrairement à ce qu'on peut croire, une relation peut être à la fois symétrique et antisymétrique, comme par exemple la relation $=$. (Si la relation est de plus supposée réflexive, c'est le seul exemple.)
\end{attention}

Le tableau suivant résume sans preuve quelques propriétés des relations classiques. (Certains points seront détaillés par la suite.)\\

\begin{tabular}{|l|c|c|c|c|}\hline
relation & réflexive & transitive & symétrique & antisymétrique \\ \hline
$=$ & oui & oui & oui & oui \\ \hline
$\neq$ & non & non & oui & non \\ \hline
$\leq$ sur $\R$ & oui & oui & non & oui \\ \hline
$<$ sur $\R$ & non & oui & non & oui\footnote{L'implication est vraie car la prémisse est fausse.} \\ \hline
$|$ sur $\N$ & oui & oui & non & oui \\ \hline
$\not |$ sur $\N$ & non & non & non & non \\ \hline
$|$ sur $\Z$ & oui & oui & non & non \\ \hline
$\subseteq$ sur $\mathcal P(E)$ & oui & oui & non & oui \\ \hline
$//$ sur les droites du plan & oui & oui & oui & non \\ \hline
$\perp$ sur les droites du plan & non & non & oui & non \\ \hline
\end{tabular}

\begin{definition}[Raffinement d'une relation]
\index{raffinement!d'une relation}\index{relation!plus fine}
Soient $\mathcal R$ et $\mathcal S$ des relations binaires sur $E$. On dit que $\mathcal R$ est plus fine que $\mathcal S$, ou encore que c'est est un raffinement, si $\forall x, y\in E, x\mathcal R y \implies x\mathcal S y$. 

De façon équivalente, $\mathcal R$ est plus fine que $\mathcal S$ si on a l'inclusion de graphes $\Gamma_{\mathcal R} \subseteq \Gamma_{\mathcal S}$.
\end{definition}

\begin{exemple}
\begin{enumerate}
\item Sur l'ensemble $\N$ des entiers naturels, la relation $<$ est plus fine que $\leq$. La relation d'égalité $=$ est également plus fine que $\leq$. La relation de divisibilité est plus fine que $\leq$ : en effet si $a$ divise $b$ alors forcément $a\leq b$.
\item Toutes les relations ne sont pas forcément comparables : sur l'ensemble $\N$, aucune des deux relations $<$ et $=$  n'est plus fine que l'autre.
\item (Zérologie) La relation vide est plus fine que toute autre relation.
\end{enumerate}
\end{exemple}

\begin{remarque}
\begin{enumerate}
\item Si $\mathcal R$ et $\mathcal S$ sont deux relations, il existe forcément une relation binaire qui les raffine toutes les deux (aussi appelée un \emph{raffinement commun}) : par exemple, celle donc le graphe est l'intersection des deux graphes $\Gamma_\mathcal R$ et $\Gamma_\mathcal S$.
\item Il en existe également une autre qui est simultanément moins fine que $\mathcal R$ et $\mathcal S$, par exemple celle dont le graphe est l'union des deux graphes.
\end{enumerate}
\end{remarque}

% exemples après, avec les relations d'ordre et d'équivalence
% exemple (zérologie) la relation vide est plus fine que tout autre...


% mettre dans l'exercice sur symétrique ss égal à la transposée ?
\begin{definition}
Soit $E$ un ensemble muni d'une relation binaire $\mathcal R$. La relation \emph{réciproque} ou \emph{transposée}, notée ${}^t\mathcal R$, est définie par : $x{}^t\mathcal R y \iff y\mathcal R x$. 
\end{definition}
% ne pas confondre avec la relation complémentaire / complément logique


\begin{exercice}
Montrer qu'une relation $\mathcal R$ est symétrique si et seulement si $\mathcal R = {}^t\mathcal R$.
\end{exercice}

\begin{exercice}\index{diagonale}
Montrer qu'une relation $\mathcal R$ sur $E$ est réflexive si et seulement si son graphe contient la diagonale $\Delta_E$ de $E\times E$.
\end{exercice}

\begin{exercice}\index{diagonale}
Montrer qu'une relation $\mathcal R$ sur $E$ est antisymétrique si et seulement si $\Gamma_\mathcal R \cap \Gamma_{{}^t\mathcal R} \subseteq \Delta_E$.
\end{exercice}

\begin{exercice}
Montrer qu'un ensemble fini de cardinal $n$ possède $2^{n^2-n}$ relations réflexives et $2^{n(n+1)/2}$ relations symétriques.
\end{exercice}

\section{Relations d'ordre}

\subsection{Définitions et vocabulaire}


\begin{definition}
Une relation est une \emph{relation d'ordre}\index{relation d'ordre} ssi elle est réflexive, transitive et antisymétrique.

Un ensemble $E$ muni d'une relation d'ordre ${\mathcal R}$ est appelé \emph{ensemble ordonné}\index{ensemble ordonné}.
\end{definition}

\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item La relation $\leq$ est une relation d'ordre sur $\N$, ou sur $\Z$, $\Q$, $\R$. (Mais pas sur $\C$ : la relation $\leq$ n'est même pas \emph{définie} sur $\C$.)
\item La relation $\subseteq$ est une relation d'ordre sur $\mathcal P(E)$. L'antisymétrie est exactement le principe de double inclusion.
\item La relation $|$ (\og divise\fg) est une relation d'ordre sur $\N^*$, ainsi que sur l'ensemble $\N$. Attention: dans $\N$, tout entier divise $0$! 
\end{enumerate}
\end{exemples}

\begin{attention}
\begin{enumerate}
\item La relation $<$ n'est pas une relation d'ordre sur $\R$ (ni sur $\N$, $\Z$ ou $\Q$), car elle n'est pas réflexive, et la relation de divisibilité $|$ n'est pas une relation d'ordre sur $\Z^*$ ni sur $\Z$, car elle n'est pas antisymétrique : $1|-1$ et $-1|1$ et pourtant $1\neq -1$.
% C'est un préordre...
\item il faut systématiquement préciser l'ordre auquel on se réfère, même pour un ensemble \og connu\fg. Par exemple, il faut éviter de parler de \og l'ensemble ordonné $\N$\fg: en effet $\N$ peut être muni de l'ordre usuel $\leq$ ou bien de la divisibilité $|$ et les deux ordres sont fréquemment utilisés.
\end{enumerate}
\end{attention}


\begin{definition}
Si ${\mathcal R}$ est une relation d'ordre sur $E$, on peut lui associer une relation d'\emph{ordre strict}\index{ordre strict}, définie par \og$ x{\mathcal R}y\text{ et }x\neq y$\fg. (Remarque : une relation d'ordre strict n'est pas une relation d'ordre puisqu'elle n'est pas réflexive.)
\end{definition}

\begin{exemple}
Sur $\R$, l'ordre strict associé à la relation d'ordre $\leq$ est l'inégalité stricte $<$.
\end{exemple}


Dans ce cours, on notera en général $\leq_E$ au lieu de ${\mathcal R}$ une relation d'ordre générique sur $E$ (même si la relation n'a rien à voir avec l'inégalité $\leq$ sur $\R$), afin de distinguer les relations d'ordre des relations binaires générales. On notera $<_E$ la relation d'\emph{ordre strict}\index{relation!d'ordre!strict} qui lui est associée.

Enfin, les notations $\geq_E$ et $>_E$ désignent les relations transposées de $\leq_E$ et $<_E$. Autrement dit  $x \geq_E y$ et $x >_E y$ sont synonymes de $y \leq_E x$ et $y <_E x$.

\begin{attention}
Contrairement au cas particulier de $(\R,\leq)$, dans un ensemble ordonné général $(E,\leq_E)$ la négation de \og $x\leq_E y$\fg{} n'est \textbf{pas} \og $y<_E x$\fg. Par exemple, le contraire de \og$2|n$\fg{} n'est pas \og$n$ divise strictement $2$.\fg{}
\end{attention}

\begin{definition}
Une relation d'ordre $\leq_E$ sur un ensemble $E$ est \emph{totale}\index{relation!d'ordre!total} si tous les éléments sont comparables, c'est-à-dire si:
\[ \forall x, y\in E, x\leq_Ey\text{ ou } y\leq_E x.\]
Un ensemble muni d'un ordre total est appelé \emph{ensemble totalement ordonné} \index{ensemble totalement ordonné}. Une relation d'ordre qui n'est pas totale est dite d'ordre \emph{partiel}\index{relation!d'ordre!partiel}.
\end{definition}

\begin{remarque}
Si $x$ et $y$ sont deux éléments d'un ensemble totalement ordonné $(E,\leq_E)$, alors le contraire de $x\leq_E y$ est $x>_E y$. Comme remarqué plus haut, ceci est \textbf{faux} si l'ordre n'est pas total, justement à cause d'éventuels éléments non comparables. 
\end{remarque}

\begin{exemples}
La relation d'ordre $\leq$ sur $\R$ (ou $\N$, $\Q$ ou  $\Z$) est totale. Par contre, $\subseteq$ et $|$ ne sont pas totales. Par exemple, dans $\mathcal P(\R)$, les parties $\R_+$ et $]-3,6]$ ne sont pas comparables pour l'inclusion. Dans $\N^*$, les éléments $2$ et $3$ ne sont pas comparables pour la divisibilité.
\end{exemples}



\begin{exercice}
Montrer qu'une relation d'ordre $\mathcal R$ sur $E$ est totale si $\Gamma_\mathcal R \cup \Gamma_{{}^t\mathcal R} = E\times E$.
\end{exercice}



\begin{exercice}
Soit $E$ un ensemble. Montrer que \og est plus fine que\fg{} est une relation d'ordre sur l'ensemble des relations binaires sur $E$.
\end{exercice}


\subsection{Applications croissantes, décroissantes, monotones}


\begin{definition}
\index{application!croissante}\index{application!strictement croissante}
\index{application!décroissante}\index{application!strictement décroissante}
\index{application!monotone}\index{application!strictement monotone}
Soient $(E,\leq_E)$ et $(F,\leq_F)$ des ensembles ordonnés et $f : E\to F$. On dit que $f$ est 
\begin{enumerate}
\item \emph{croissante} si $\forall x, y\in E, x\leq_E y \implies f(x) \leq_F f(y)$;
\item \emph{décroissante} si $\forall x, y\in E, x\leq_E y \implies f(x) \geq_F f(y)$;
\item \emph{monotone} si elle est croissante ou décroissante;
\item \emph{strictement croissante} si $\forall x, y\in E, x<_E y \implies f(x) <_F f(y)$;
\item \emph{strictement décroissante} si $\forall x, y\in E, x<_E y \implies f(x) >_F f(y)$;
\item \emph{strictement monotone} si elle est strictement croissante ou strictement décroissante.
\end{enumerate}
\end{definition}

(Remarque : dans cette situation, il est important de distinguer les relations d'ordre sur $E$ et sur $F$.)

\begin{exemple}
\begin{enumerate}
\item L'application $f : \R\to \R, x\mapsto x+e^x$ est croissante pour l'ordre usuel $\leq $ sur $\R$.
\item Si $E$ est fini, l'application $f : \mathcal P(E) \to \N, \: A\mapsto \operatorname{Card}(A)$ est croissante entre les ensembles ordonnés $(\mathcal P(E), \subseteq)$ et $(\N, \leq)$.
\item L'application $f : \mathcal P(E) \to \mathcal P(E), \: A\mapsto \complement A$ est décroissante pour l'inclusion, car $A\subseteq B \implies \complement B\subseteq \complement A$.
\item Une application \emph{décroissante} entre $(E,\leq_E)$ et $(F,\leq_F)$ est la même chose qu'une application \emph{croissante} entre $(E,\leq_E)$ et $(F,\geq_F)$.
\end{enumerate}
\end{exemple}




\begin{proposition}
\begin{enumerate}
\item La composée de deux applications croissantes est croissante.
\item La composée de deux applications décroissantes est croissante.
\item La composée d'une application décroissante et d'une croissante est décroissante.
\end{enumerate}
\end{proposition}

\begin{proof}
Application directe de la définition.
\end{proof}

Dans beaucoup de cas, cette proposition remplace avantageusement un \og tableau de variations\fg{} qui n'est pas forcément indispensable pour déterminer les variations d'une fonction.

\begin{exemple}
L'application $f : R\to \R, x\mapsto -\frac{\ln(2/3)}{e^{x+e^x}}$ est décroissante.
\end{exemple}
\begin{red}
Cette application peut s'écrire comme la composée
\[\xymatrix{
\R \ar[r]^{x\mapsto x+e^x}
& \R \ar[r]^{x\mapsto e^x}
& \R_+^* \ar[r]^{x\mapsto 1/x}
& \R_+^* \ar[rr]^{x\mapsto -\ln(2/3)x}
& & \R
} \]
Les deux premières sont croissantes, la troisième est décroissante (car on est sur $\R_+^*$, ce serait faux sur $\R^*$) et la dernière est croissante car $\ln(2/3)<0$. D'après la proposition, la composée des quatre est donc décroissante.
\end{red}



\begin{exercice}
Montrer qu'une application strictement croissante entre ensembles totalement ordonnés est injective.
\end{exercice}




\subsection{Plus grand et plus petit élément}
\begin{definition}
Soit $(E,\leq_E)$ un ensemble ordonné et $A\subseteq E$ une partie non vide.
\begin{enumerate}
\item Un élément $m\in E$ est un \emph{majorant}\index{majorant} de $A$ si $\forall a\in A, a\leq_E m$.
\item La partie $A$ est \emph{majorée} si elle possède des majorants.
\item Un élément $m\in A$ qui est un majorant de $A$ est appelé un \emph{plus grand élément de $A$}\index{plus grand élément}, ou \emph{maximum}\index{maximum} de $A$.
\item On définit de même les \emph{minorants}\index{minorant}, les parties minorées et les plus petits éléments\index{plus petit élément}.
\end{enumerate}
\end{definition}

\begin{exemple}
\begin{enumerate}[label=\alph*)]
\item Dans l'ensemble ordonné $(\R,\leq)$, la partie $[2,5]$ est majorée par $5$, mais aussi par $6$, $10$ etc. La partie $\R_+$ est minorée, mais pas majorée. La partie $\Z$ n'est ni minorée ni majorée.
\item Toute partie non vide de $\N$ admet un plus petit élément pour l'ordre usuel $\leq$ (c'est la propriété fondamentale de $\N$), mais pas forcément de plus grand élément.
\item Dans un ensemble ordonné non vide $(E,\leq_E)$, la partie vide est majorée: tout élément $m$ est un majorant, car l'assertion $\forall x\in \varnothing, x\leq_E m$ est vraie. De la même façon, dans un ensemble non-vide, la partie vide est minorée par n'importe quel élément.
\end{enumerate}
\end{exemple}

\begin{remarque}
Attention aux reformulations hâtives. Si $x\in E$ est un élément qui ne possède aucun majorant strict, on ne peut pas pour autant en conclure que $x$ est un plus grand élément de $E$. Par exemple, dans l'ensemble ordonné $\{2,3,4\}$ muni de la divisibilité, l'élément $4$ ne possède aucun majorant strict, pourtant il ne majore pas $3$ : encore une fois, cela est dû au fait que l'ordre n'est pas forcément total, et que le contraire de $x\geq y$ n'est pas $x<y$.
\end{remarque}



\begin{proposition}[Unicité du plus grand élément, s'il existe]
Si $A\subseteq E$ possède un plus grand élément, il est unique. On le note alors $\max(A)$.
De même, si $A\subseteq E$ possède un plus petit élément, il est unique. On le note alors $\min(A)$.
\end{proposition}
\begin{proof}
Soient $m$ et $m'$ deux plus grands éléments de $A$. Comme $m$ est un plus grand élément, on a par définition $\forall x\in A, x\leq_E m$ et donc en particulier $m'\leq_E m$. De même, comme $m'$ est un plus grand élément, on a $m\leq_E m'$. Par antisymétrie de la relation d'ordre, on a $m=m'$.

On prouve le résultat pour le plus petit élément de la même manière.
\end{proof}

\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item  La partie $[0,1]$ est majorée dans $\R$ car $1$, $2$ ou encore $5$ sont des majorants. Elle possède un plus grand élément : $1$.
\item La partie $]3,+\infty[$ de $\R$ n'a pas de plus grand élément car elle n'est pas majorée.
\item La partie $A=[0,1[$ de $\R$ est majorée. Par contre, elle n'a pas de plus grand élément. 
\item La partie $B=\{x\in \Q\:\mid\: x^2\leq 2\}$ est majorée (par $\sqrt2$ par exemple), mais n'admet pas de plus grand élément (rappel : $\sqrt 2 \not\in\Q$).
\item Si $E$ est un ensemble, alors $\mathcal P(E)$ muni de l'inclusion possède un plus grand élément : $E$, et un plus petit élément : $\varnothing$.
\item Dans l'ensemble ordonné $(\N^*,|)$, la partie $\{2,3,4\}$ n'a pas de plus grand élément.
\item Dans l'ensemble ordonné $(\N,|)$, il y a un plus petit élément au sens de la divisibilité, c'est $1$ (et non zéro). D'autre part, l'élément $0$ est en fait le plus grand élément au sens de la divisibilité: tout nombre entier $k$ divise $0$.
\end{enumerate}
\end{exemples}

\begin{exercice}
On munit l'ensemble $E$ des intervalles fermés de $\R_+^*$ de la relation d'inclusion $\subseteq$. Montrer que c'est une relation d'ordre. Existe-t-il un plus grand élément ?
\end{exercice}

\subsection{Borne supérieure, borne inférieure}

\begin{definition}[Borne supérieure]
 La partie $A\subseteq E$ admet une borne supérieure\index{borne supérieure} $s\in E$ ssi:
\begin{enumerate}
\item $s$ est un majorant de $A$;
\item tout majorant de $A$ majore $s$.
\end{enumerate}
(En d'autres termes, $s$ est le plus petit des majorants de $A$, ou encore : l'ensemble de tous les majorants de $A$ possède un plus petit élément $s$.)
\end{definition}

Attention, contrairement à un plus grand élément, une  borne supérieure de $A$, s'il en existe, n'appartient pas forcément à $A$. 

\begin{proposition}[Unicité de la borne supérieure, s'il en  existe une]
Soit $(E,\leq_E)$ un ensemble ordonné, et $A\subseteq E$. Si $A$ possède une borne supérieure, elle est unique et on la note $\sup(A)$.
\end{proposition}
\begin{proof}
Soient $s$ et $s'$ deux bornes supérieures de $A$. Comme $s$ est une borne supérieure et $s'$ un majorant, on a $s\leq_E s'$. Un raisonnement symétrique montre que  $s'\leq_E s$, et finalement $s'=s$.
\end{proof}

\begin{exemple}
La partie $\R_+ \subseteq \R$ n'a pas de borne supérieure. 
La partie $A=[0,1[ \subseteq \R$ n'a pas de plus grand élément, mais possède une borne supérieure : $1$.
\end{exemple}
\begin{proof} Pour le premier point, la partie n'a même pas de majorant donc c'est clair. 
D'une part, il est clair que $1$ est un majorant de $[0,1[$, c'est-à-dire que $\forall x\in [0,1[, \: x\leq 1$.

Vérifions la seconde partie de la définition.  Il s'agit de montrer qu'un élément $m$ de $[0,1[$ ne peut pas être un majorant de $[0,1[$. Mais si $m \in [0,1[$, alors on peut considérer le réel $m'=m+\frac{1-m}{2}$. Comme $0\leq m< 1$, on a l'encadrement $0< \frac{1-m}{2} < 1-m$ et donc en sommant $m$ on obtient
\[
m< m' < 1
\]
\begin{center}
\begin{tikzpicture}[line cap=round,line join=round,>=triangle 45,x=1.0cm,y=1.0cm]
\clip(-0.5,-1.5) rectangle (10.5,1);
\draw (0,0)-- (10,0);
\begin{scriptsize}
\draw[color=black] (0.0,-0.5) node {$0$};
\draw [fill=black] (6,0) circle (2pt);
\draw[color=black] (6.0,-0.5) node {$m$};
\draw [fill=black] (8,0) circle (2pt);
\draw[color=black] (8.0,-0.5) node {$m'=m+\frac{1-m}{2}$};
\draw[color=black] (10.0,-0.5) node {$1$};
\end{scriptsize}
\end{tikzpicture}
\end{center}
Ceci montre que $m$ ne majore pas $m'$, qui est dans $[0,1[$. Donc $m$ n'est pas un majorant de $[0,1[$.
\end{proof}

Autre exemple important de borne supérieure qui n'est pas un plus grand élément: la partie $\{x\in \Q, x^2<2\}$ de $\R$ est majorée et admet une borne supérieure égale à $\sqrt 2$ et qui n'appartient pas à $A$ car $\sqrt2\not\in \Q$. 

\begin{proposition}
Soit $(E,\leq_E)$ un ensemble ordonné $A\subseteq E$.
Si $A$ admet une borne supérieure et que $\sup(A) \in A$, alors c'est son plus grand élément.
Si $A$ admet un plus grand élément, c'est aussi sa borne supérieure.
\end{proposition}
\begin{proof}
Exercice, appliquer les définitions.
\end{proof}

Enfin, on définit de même ce qu'est une \emph{borne inférieure}\index{borne inférieure}, et on montre que si une partie admet une borne inférieure, alors celle-ci est unique. On la note $\inf(A)$. 

La borne inférieure d'une partie, même si elle existe, n'appartient pas forcément à la partie. Par exemple, $0$ est la borne inférieure de $]0,1]$.

\begin{theoreme}[$\R$ possède la propriété de la borne supérieure]
Dans $(\R,\leq)$, toute partie non vide et majorée admet une borne supérieure.
\end{theoreme}
\begin{proof}
Admis provisoirement. Pour prouver ce théorème, il faut disposer d'une définition rigoureuse de l'ensemble $\R$. Voir le cours d'analyse de second semestre.
\end{proof}

Il existe des ensembles ordonnés ne possédant pas la propriété de la borne supérieure, c'est-à-dire possédant des parties non-vides, majorées, et sans borne supérieure. C'est le cas de $(\Q,\leq)$, si l'on considère la partie $\{x\in \Q\:\mid\: x^2\leq 2\}$ : il n'existe pas de borne supérieure de cette partie \underline{dans $\Q$}.


\subsection{Ordre produit et ordre lexicographique}

\begin{propdef}
Soient $(E\leq_E)$ et $(F,\leq_F)$ des ensembles ordonnés.
L'\emph{ordre produit}\index{relation!d'ordre!produit} sur $E\times F$ est défini par :
\[
(x,y) \leq_{E\times F} (x',y') \iff \left(x\leq_E x' \text{ et } y\leq_F y'\right).
\]
\end{propdef}
\begin{proof}
Il s'agit de prouver que la relation binaire définie est bien une relation d'ordre donc réflexive, antisymétrique et transitive. Exercice.
\end{proof}

Attention, même si $\leq_E$ et $\leq_F$ sont totales, l'ordre produit n'est pas forcément un ordre total. Par exemple, pour $E=F=\R$ et l'ordre usuel sur $\R$ qui est bien total, on remarque que l'ordre produit $\leq_{\R\times\R}$ sur $\R\times \R$ n'est pas total car $(1,2)$ et $(2,1)$ ne sont pas comparables.

\begin{propdef}
Soient $(E\leq_E)$ et $F,\leq_F)$ des ensembles \textbf{totalement} ordonnés.
L'ordre lexicographique\index{relation!d'ordre!lexicographique} sur $E\times F$ est défini par :
\[
(x,y) \leq_{E\times F} (x',y') \iff \left(x<_E x' \text{ ou } (x=x' \text{ et } y\leq_F y')\right).
\]
C'est un ordre total.
\end{propdef}
\begin{proof}
La propriété de relation d'ordre est laissée en exercice. Prouvons que l'ordre est total.

Soient en effet $(x,y)$ et $(x',y')$ distincts.
Si $x\neq x'$, alors comme $\leq_E$ est un ordre total, on a forcément $x<_E x'$ ou bien $x'<_E x$.
Si $x=x'$, alors on a forcément $y\neq y'$ et comme $\leq_F$ est un ordre total, on a forcément $y <_F y'$ ou bien $y'<_F y$.

En conclusion, on a bien soit $(x,y) \leq_{E\times F} (x',y')$, soit  $(x',y') \leq_{E\times F} (x,y)$.
\end{proof}

\begin{exemple}
Avec l'ordre usuel sur l'alphabet, l'ordre lexicographique sur les mots est l'ordre dans lequel les mots sont classés dans un dictionnaire.
\end{exemple}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Relations d'équivalence}

\subsection{Définitions}

\begin{definition}[Relation d'équivalence]
Une relation binaire ${\mathcal R}$ sur un ensemble $E$ est une \emph{relation d'équivalence}\index{relation!d'équivalence} ssi elle est:
\begin{enumerate}
\item réflexive (rappel : $\forall x\in E, x{\mathcal R}x$);
\item transitive (rappel : $\forall x, y, z\in E, x{\mathcal R}y\text{ et } y{\mathcal R}z \implies x{\mathcal R}z$);
\item symétrique (rappel : $\forall x, y\in E, x{\mathcal R}y \implies yRx$).
\end{enumerate}
\end{definition}

\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item Les relations $=$, $//$ (parallélisme), sont des relations d'équivalence.
\item La relation $\perp$ (perpendiculaire) n'est \textbf{pas} une relation d'équivalence car elle n'est pas réflexive, ni transitive.
\item Tout ensemble possède la relation d'équivalence triviale : celle où tous les éléments sont équivalents.
\item Sur $\R$, la relation $x\mathcal R y \iff \left(x=y\text{ ou }x=-y\right)$ est une relation d'équivalence.
\item L'ensemble vide\index{ensemble vide} possède une seule relation d'équivalence, la relation vide (la seule fonction de $\varnothing \times \varnothing$ dans $\{\text{vrai,\: faux}\}$ à savoir la fonction vide : on vérifie qu'elle définit bien une relation d'équivalence).
\item Un singleton\index{singleton}, c'est-à-dire un ensemble contenant un unique élément, possède une seule relation d'équivalence (celle où l'unique élément est relié à lui-même).
\item Un ensemble $\{a,b\}$ à deux éléments possède deux relations d'équivalence distinctes : la première est l'\emph{égalité}, la seconde est la \emph{relation d'équivalence triviale}, celle où $a$ et $b$ sont équivalents.
\item Un ensemble à trois éléments possède cinq relations d'équivalence (exercice).
\end{enumerate}
\end{exemples}

\begin{exercice}
Sur $\Z\times \N^*$, on définit la relation binaire $\mathcal R$ par
\[(p,q)\mathcal (p',q') \iff pq'=p'q.\]
Montrer que c'est une relation d'équivalence.
\end{exercice}

\begin{proposition}[Relation donnée par les fibres d'une application]\index{fibre}
Si $f : E\to F$ est une application, alors la relation 
\[
x\mathcal R y \iff (x\text{ et }y \text{ sont dans la même fibre de }f)
\]
est une relation d'équivalence sur $E$.

(Rappelons que par définition de ce que sont les fibres d'une application, on peut reformuler la définition de cette relation en: $x\mathcal R y \iff f(x)=f(y)$.)
\end{proposition}
\begin{proof}
Soit $x \in E$. Alors on a bien $f(x)=f(x)$ donc $x\mathcal R x$, donc $\mathcal R$ est réflexive. Si $x, y\in E$, on a bien $x\mathcal R y \iff f(x)=f(y) \iff f(y)=f(x) \iff y\mathcal x$ donc $\mathcal R$ est symétrique. Et enfin, Si $x,y,z\in E$ et que $x\mathcal R y$ et $y\mathcal R z$, alors $f(x)=f(y)$ et $f(y)=f(z)$, donc $f(x)=f(z)$ et donc $x\mathcal R z$, donc $\mathcal R$ est transitive. Ceci montre que $\mathcal R$ est bien une relation d'équivalence.

On verra dans la dernière section que toutes les relations d'équivalence sont de ce type, pour une application $f$ bien choisie : la \emph{surjection canonique sur le quotient}.
\end{proof}

\begin{exemple} La proposition précédente implique que les relations suivantes sont des relations d'équivalence:
\begin{enumerate}
\item Sur $\R$, la relation définie par $x\mathcal R y \iff \sin(x)=\sin(y)$;
\item Sur $\C$, la relation définie par $z\mathcal R z' \iff |z|=|z'|$.
\item Sur $\R$, la relation définie par $x\mathcal R y \iff xe^y=ye^x$. (Dans ce cas, la fonction est $f :\R\to \R, t\mapsto te^{-t}$.)
\end{enumerate}
\end{exemple}

D'autres exemples importants de relations d'équivalence sont les congruences. Commençons par rappeler les définitions.

\begin{propdef}
Soit $a\in \R^*$ et $x,y\in\R$. On a :
\[
\frac{x-y}{a}\in \Z 
\iff
x-y \in a\Z
\iff 
(\exists k\in \Z\:\mid\: x=y+ka).
\]
Si ces conditions équivalentes sont vérifiées, on dit que $x$ et $y$ sont \emph{congrus modulo $a$} et on note 
\[ x\equiv y\quad [a].\]
La relation de congruence\index{congruence!modulo un réel} modulo $a$ entre deux réels $x$ et $y$ est une relation d'équivalence.
\end{propdef}
\begin{proof}
Exercice.
\end{proof}

De toutes ces formulations, la plus efficace pour rédiger des preuves est en général la première.

Les relations de congruence les plus courantes sont celles modulo des entiers, ou bien modulo $\pi$ ou $2\pi$ etc.


\begin{exemples}
\begin{enumerate}[label=\alph*)]
\item $1 \equiv 5 \: [2]$, car $1-5 = -4$ est un multiple de $2$.
\item $4\equiv -9\sqrt{3}+4 \: [\sqrt{3}]$, car $4 - (-9\sqrt{3}+4) = 9\sqrt{3}$ est un multiple de $\sqrt{3}$.
\item $\pi/3 \equiv 7\pi/3 \: [2\pi]$, car $\pi/3 - 13\pi/3 = -12\pi/3 = -4\pi$ est un multiple de $2\pi$.
\end{enumerate}
\end{exemples}

Les congruences se comportent relativement bien par rapport aux opération algébriques, comme le montre la proposition suivante (avec un bémol pour la multiplication, voir l'énoncé et la remarque qui suit).

\begin{proposition} Soit $a\neq 0$ et $b\neq 0$ des réels non nuls, et $x$, $y$, $x'$, $y'$ des réels tels que $x \equiv y\: [a]$ et $x' \equiv y'\: [a]$. Alors:
\begin{itemize}
\item[i)]{$x+x' \equiv y+y'\: [a]$.}
\item[ii)]{$bx\equiv by \: [ba]$.}
\end{itemize}
\end{proposition}
\begin{proof}
\begin{itemize}
\item[i)]{Si $\frac{x-y}{a} \in \Z$ et $\frac{x'-y'}{a} \in \Z$, alors $\frac{x-y}{a}+\frac{x'-y'}{a} \in \Z$.

On a donc $\frac{(x+x')-(y+y')}{a} \in \Z$, c'est-à-dire $x+x' \equiv y+y'\: [a]$.}
\item[ii)]{On a:
\[\left(x\equiv y \: [a]\right) \Leftrightarrow  \left(\frac{x-y}{a} \in \Z\right) \Leftrightarrow \left(\frac{bx-by}{ba} \in \Z\right) \Leftrightarrow \left(bx\equiv by \: [ba]\right).\]}
\end{itemize}
\end{proof}

\begin{remarque}
Attention au second point, multiplier une congruence par $b$ change la base de congruence, qui est également multipliée par $b$.
\end{remarque}

\begin{definition}
Si $a\in \Z^*$, la relation de congruence modulo $a$ sur $\R$ induit une relation d'équivalence sur $\Z$, appelée et notée de la même façon.
\end{definition}

Par exemple, la congruence modulo $3$ est une relation d'équivalence sur $\Z$.

\subsection{Classes d'équivalence}
\begin{definition}[Classe d'équivalence]\index{classe d'équivalence}
Soit $E$ un ensemble muni d'une relation d'équivalence ${\mathcal R}$. Soit $x\in E$. On note $\overline{x}$ (ou parfois $Cl(x)$, ou $[x]_{\mathcal R}$) et on appelle la \emph{classe d'équivalence de $x$ modulo $\mathcal R$ (ou : sous $\mathcal R$)} l'ensemble  de tous les éléments qui sont équivalents à $x$, c'est-à-dire l'ensemble:
\[
\overline x = \left\{y\in E\:\mid\: y{\mathcal R}x\right\}
\]


Soit $A\in \mathcal P(E)$ une partie de $E$. On dit que $A$ est une \emph{classe d'équivalence modulo $\mathcal R$} si c'est la classe d'équivalence d'un certain élément, c'est-à-dire si : $\exists x\in E, \: A=\overline x$.
\end{definition}

Attention au type des objets : $x \in E$, mais $\overline{x} \subseteq E$.

\begin{proposition}
\begin{enumerate}
\item $\forall x\in E, x\in \overline{x}$ (en particulier une classe d'équivalence n'est jamais vide).
\item $\forall x, y\in E, x{\mathcal R}y \iff \overline{x}=\overline{y}$.
\item $\forall x, y\in E, \overline{x} = \overline{y} \text{ ou } \overline{x}\cap \overline{y}=\varnothing$. (Deux classes sont égales ou disjointes.)
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Découle de la réflexivité.
\item Sens $\impliedby$ : Supposons $\overline{x}=\overline{y}$. Comme $y\in \overline{y}$, on a $y\in \overline{x}$, donc $y{\mathcal R}x$.\\
Sens $\implies$ : Soit $z\in \overline{x}$. Alors $z{\mathcal R}x$ et comme $x{\mathcal R}y$, on a $z{\mathcal R}y$ par transitivité, et donc $z\in \overline{y}$. Ceci montre $\overline{x}\subseteq \overline{y}$. Pour montrer l'inclusion réciproque, on a $y{\mathcal R}x$ par symétrie de $R$ puis on termine de la même manière.
\item Soient $x$ et $y$, et supposons $\overline{x}\cap \overline{y} \neq \varnothing$. Soit $z\in \overline{x}\cap \overline{y}$. Alors $z\mathcal R x$ et $z\mathcal R y$, donc par symétrie et transitivité, $x\mathcal R y$, d'où $\overline{x}=\overline{y}$.
\end{enumerate}
\end{proof}

\begin{definition}[Partie saturée]
\index{partie!saturée sous une relation d'équivalence}\index{saturation!relativement à une relation d'équivalence}
Soit $E$ un ensemble muni d'une relation d'équivalence ${\mathcal R}$ et soit $A\in \mathcal P(E)$. La \emph{saturation} de $A$ relativement à la relation $\mathcal R$ est la partie
\[
\{y\in E\:|\: \exists x\in A, y\mathcal R x\} 
\]
On dit qu'une partie est \emph{saturée} (relativement à $\mathcal R$), si elle est égale à sa saturation.
\end{definition}

\begin{remarque} La saturation de $A$ est égale à $\bigcup_{x\in A} \overline x$. En effet, si $y\in E$, alors 
\[
\exists x\in A, y\mathcal R x
\iff \exists x\in A, y\in \overline x
\iff y\in \bigcup_{x\in A} \overline x 
\]
\end{remarque}

\begin{exemple}
Une classe d'équivalence est saturée, mais la réciproque est fausse en général (exercice).
\end{exemple}

\begin{exercice}
Soit $\mathcal R$ une relation d'équivalence sur $E$. Montrer que les classes d'équivalence sont exactement les parties saturées minimales pour l'inclusion.
\end{exercice}


L'outil principal pour manipuler les classes d'équivalence est l'\emph{ensemble quotient}, que l'on définit maintenant.

\begin{definition}

L'ensemble des classes d'équivalence est appelé \emph{ensemble quotient de $E$ par $\mathcal R$}\index{ensemble quotient sous une relation d'équivalence} et est noté $E/{\mathcal R}$.

L'application $p : E \to E/\mathcal R, x\mapsto \overline{x}$ qui à un élément de $E$ lui associe sa classe d'équivalence est appelée \emph{application de passage au quotient}, ou \emph{projection canonique sur le quotient}\index{projection canonique sur le quotient}\index{application de passage au quotient}. (Cette application étant surjective comme on le verra plus bas, on l'appelle aussi la \emph{surjection canonique sur le quotient}\index{surjection canonique sur le quotient}.)
\end{definition}

\begin{exemple}
Pour l'ensemble $E$ des droites du plan $\R^2$ muni de la relation d'équivalence $//$, les classes d'équivalence sont appelées \emph{directions} : deux droites sont parallèles si et seulement si elles ont la même \emph{direction}. L'ensemble quotient de $E$ par la relation de parallélisme est l'ensemble des directions du plan. On le note $\P^1(\R)$ et on l'appelle la droite projective.
\end{exemple}

\begin{proposition}
Soit $E$ un ensemble muni d'une relation d'équivalence ${\mathcal R}$ et $p = E\to E/\mathcal R$ la projection canonique sur le quotient. Alors 
\begin{enumerate}
\item $p$ est surjective.
\item $x\mathcal R y \iff p(x)=p(y)$.
\item Les fibres\index{fibre} sont exactement les classes d'équivalence modulo la relation $\mathcal R$.
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Soit $A$ une classe d'équivalence. Par définition, il existe $x\in E$ tel que $A = \overline{x} = p(x)$. Donc $p$ est surjective.
\item On a $x\mathcal R y \iff \overline{x} = \overline{y} \iff p(x)=p(y)$.
\item C'est une relation du deuxième point, puisque par définition de la fibre d'une application quelconque $f$, deux éléments $x$ et $y$ sont dans la même fibre si et seulement $f(x)=f(y)$.
\end{enumerate}
\end{proof}

\begin{exercice}
Soit $f : E\to F$ une application surjective, $\mathcal R$ la relation d'équivalence sur $E$ définie par $x\mathcal R y \iff f(x)=f(y)$, et soit $p : E\to E/\mathcal R$ la surjection canonique sur le quotient. 

Soit $\phi :  F \to E/\mathcal R, y\mapsto f^\leftarrow(y)$. Montrer que  cette application $\phi$ est bien définie, bijective (déterminer son application réciproque) et fait commuter le diagramme
\[\xymatrix{
& E \ar[dl]_{f} \ar[dr]^p & \\
F \ar[rr]_{\phi}& & E/\mathcal R
}\]
\end{exercice}



\subsection{Partitions et classes d'équivalence}

\begin{definition}[Partition d'un ensemble]
Soit $E$ un ensemble, et $\mathcal A$ un ensemble de parties de $E$, c'est-à-dire $\mathcal A\subset \mathcal P(E)$. L'ensemble $\mathcal A$ est une \emph{partition de $E$ en ensembles non vides}, ou simplement \emph{partition\footnote{Notation adoptée dans tout ce cours} de $E$}\index{partition}, si : 
\begin{enumerate}
\item les parties sont non vides c'est-à-dire $\forall A\in \mathcal A, \: A\neq \varnothing$.
\item les parties recouvrent $E$ c'est-à-dire que leur union égale $E$, autrement dit $\bigcup_{A\in \mathcal A} A = E$.
\item Les parties sont deux à deux disjointes, c'est-à-dire $\forall A, A' \in \mathcal A, \: A\cap A' = \varnothing$.
\end{enumerate}
\end{definition}

\begin{exemple}[Partition définie par une famille]
Soit $E$ un ensemble, et soit $(A_i)_{i\in I}$ une famille de parties de $E$. Cette famille définit une partition de $E$ si :
\begin{enumerate}
\item Les $A_i$ sont toutes non vides.
\item On a $\bigcup_{i\in I} A_i = E$.
\item Les parties $A_i$ sont deux à deux disjointes : $\forall i, j\in I, i\neq j \implies A_i\cap A_j=\varnothing$.
\end{enumerate}
\end{exemple}

\begin{exemple}
\begin{enumerate}
\item L'ensemble vide\index{ensemble vide} possède une seule partition, la partition vide qui ne contient aucune partie (car les parties elles, doivent être non-vides).
\item Un ensemble $\{a,b\}$ à deux éléments possède deux partitions : la partition triviale $\big\{\: \{a,b\} \:\big\}$ et la partition en deux singletons $\big\{\: \{a\},\{b\} \:\big\}$.
\item Un ensemble à trois éléments possède cinq partitions distinctes (exercice).
\item Tout ensemble possède la partition $\big\{\: \{x\}\:\mid\: x\in E \:\big\}$ qui est la partition en singletons inclus dans $E$. (Si $E$ est vide, la partition est vide).\index{partition!en singletons}
\item Tout ensemble non-vide $E$ possède toujours au moins la partition triviale\index{partition!triviale} en une seule partie, l'ensemble lui-même. C'est bien une partition car $E$ est non-vide. Cette partition s'écrit donc $\big\{\: E \:\big\}$.
\item L'ensemble $\Z$ possède la partition en deux parties suivante : $\big\{\: 2\Z, \: 2\Z+1\:\big\}$. C'est la partition en nombres pairs et nombres impairs.
\end{enumerate}
\end{exemple}

\begin{definition}[Raffinement d'une partition]
\index{raffinement!d'une partition}\index{partition!plus fine}
Soient $\mathcal A$ et $\mathcal B$ deux partitions de $E$. On dit que $\mathcal A$ est \emph{plus fine} que $\mathcal B$ (ou : qu'elle est un raffinement de $\mathcal B$) si les éléments de $\mathcal B$ sont des unions d'éléments de $\mathcal A$, autrement dit si $\mathcal A$ fractionne les éléments de $\mathcal B$ en sous-parties.
\end{definition}


\begin{exercice}
Montrer que la relation binaire \og être plus fine que\fg{} est une relation d'ordre sur l'ensemble de toutes les partitions de $E$, et que l'ordre n'est en général pas total.

Si $E$ est un ensemble à trois éléments, dire, parmi les cinq partitions possibles, lesquelles sont comparables.
\end{exercice}


\begin{remarque}
Le plus grand élément de cet ensemble ordonné est la partition la  plus fine\index{partition!la plus fine} : c'est la partition en singletons, c'est-à-dire l'ensemble de tous les singletons inclus dans $E$. Cette partition est plus fine que toute autre. Si $E$ est non-vide, la partition la moins fine\index{partition!la moins fine} est la partition triviale (celle à une seule partie).  
\end{remarque}



\begin{proposition}[Partition en classes d'équivalence]\label{prop-classes-partition}
\index{partition!en classes d'équivalence}
Soit $\mathcal R$ une relation d'équivalence sur $E$. Alors $E/\mathcal R$ est une partition de $E$.
\end{proposition}
\begin{proof}
\begin{enumerate}
\item Une classe d'équivalence n'est jamais vide, puisque qu'elle est toujours de la forme $\overline{x}$ et donc contient un élément $x$.
\item Soit $a\in E$. On a $\overline{a} \in E/\mathcal R$, et $a\in \overline{a}$. Donc $a\in \bigcup_{A\in E/\mathcal R} A$. On en déduit que $E\subseteq \bigcup_{A\in E/\mathcal R} A$.
\item On a déjà montré que deux classes d'équivalence sont soit égales soit disjointes.
\end{enumerate}
\end{proof}

\begin{exercice}
Soient $\mathcal R$ et $\mathcal S$ deux relations d'équivalence sur $E$. Montrer que $\mathcal R$ est plus fine que $\mathcal S$ si et seulement si la partition en classes d'équivalence modulo $\mathcal R$ est plus fine que la partition en classe d'équivalence modulo $\mathcal S$.
\end{exercice}

\begin{proposition}\label{prop-fibres-partition}\index{fibre}
Soit $f : E\to F$. Les fibres non vides de $f$ forment une partition de l'ensemble $E$.
\end{proposition}
\begin{proof}
Les fibres non vides de $f$ sont exactement les classes d'équivalence pour la relation d'équivalence $x\mathcal R y \iff f(x)=f(y)$. D'après la proposition précédente, elles forment donc une partition.
\end{proof}

\begin{remarque}
Au lieu de démontrer la prop. \ref{prop-fibres-partition} à l'aide de la prop. \ref{prop-classes-partition}, on peut peut faire l'inverse : montrer directement la prop. \ref{prop-classes-partition} puis l'appliquer à la surjection canonique (dont les fibres sont les classes d'équivalence) pour prouver  la prop. \ref{prop-fibres-partition}.
\end{remarque}

% rédiger différemment ? les deux propositons avec preuve directe + preuve utilisant l'autre proposition ? Quel choix est le plus rapide ?

\begin{remarque}[Zérologie] Le quotient de l'ensemble vide\index{ensemble vide} par son unique relation d'équivalence est l'ensemble des classes d'équivalence : comme il n'y a aucune classe d'équivalence, l'ensemble quotient est vide. La projection canonique est l'application $p : \varnothing \to \varnothing$ (dite application vide). Elle est bien surjective...
\end{remarque}

Ce résultat admet une \og réciproque\fg : 

\begin{proposition}
Soit $\{A_i\:\mid i\in I\}$ une partition d'un ensemble $E$. Alors la relation
\[
x\mathcal R y \iff \left( \exists i\in I\:,\: x\in A_i\text{ et } y\in A_i\right)
\]
est une relation d'équivalence.
\end{proposition}
\begin{proof}
Voir TD.
\end{proof}

Ces deux propositions permettent de montrer qu'\og une relation d'équivalence sur $E$ est la même chose qu'une partition de $E$\fg : attention, à proprement parler ce ne sont pas les mêmes objets (pas le même type), mais le sens précis de cette phrase est qu'il existe une bijection entre d'une part l'ensemble des relations d'équivalence sur $E$, et d'autre part, l'ensemble des partitions de $E$.

\begin{corollaire}[Application à la combinatoire]
Si $\mathcal R$ est une relation d'équivalence sur un ensemble fini $E$, alors $|E| = \sum_{A\in E/\mathcal R} |A|$.
\end{corollaire}
\begin{proof}
On a  $E= \bigcup_{A\in E/\mathcal R} A$ donc en prenant le cardinal des deux membres de l'égalité on obtient $|E| = \left| \bigcup_{A\in E/\mathcal R} A \right|$. D'autre part, l'union est disjointe donc $\left| \bigcup_{A\in E/\mathcal R} A \right| = \sum_{A\in E/\mathcal R} |A|$.
\end{proof}

\begin{exercice}
\index{involution}\index{point fixe}
Soit $E$ un ensemble fini et $f : E\to E$ une involution, c'est-à-dire vérifiant $f\circ f = \Id_E$.
\begin{enumerate}
\item Montrer que si $f$ n'a pas de point fixes, alors $|E|$ est pair.
\item Plus généralement, montrer que $|E|$ a la même parité que le nombre de points fixes de $f$.
\end{enumerate}
\end{exercice}

























\section{Compléments sur le passage au quotient}

Le contenu de cette section n'est pas exigible à l'examen.

\begin{propdef}[Passage au/factorisation par le quotient]
Soit $f : E\to F$ une application, $\mathcal R$ une relation d'équivalence sur $E$  et $p : E\to E/\mathcal R$ la projection canonique sur le quotient.
On dit que $f$ \emph{passe (ou descend) au quotient} si elle se factorise à droite par $p$, autrement dit s'il existe une application $\overline f : E/\mathcal R\to F$ telle que $f = \overline{f} \circ p$, autrement dit telle que le diagramme suivant commute:
\[
\xymatrix{
E \ar[r]^f \ar[d]^p & F\\
E/\mathcal R \ar@{-->}[ur]_{\overline f}& 
}
\] 
Si une telle application $\overline{f}$ existe, elle est unique.
\end{propdef}
\begin{proof}(de l'unicité). Soit $\alpha \in E/\mathcal R$. Comme la projection canonique $p : E\to E/\mathcal R$ est surjective, il existe $x\in E$ tel que $\alpha=p(x)$. Or par hypothèse, on a $f = \overline{f} \circ p$, donc $\overline f(\alpha) =\overline f(p(x))= f(x)$. Ceci montre que les valeurs de $\overline f$ sont déterminées par la fonction $f$.
\end{proof}


\begin{proposition}[Condition nécessaire et suffisante de passage au quotient]
Soit $f : E\to F$ une application, et $\mathcal R$ une relation d'équivalence sur $E$.

Alors, $f$ descend au quotient en une application $\overline f : E/\mathcal R \to F$ si et seulement si elle est constante sur les classes d'équivalence, c'est-à-dire si et seulement si:
\[
\forall x,y\in E, x\mathcal R y \implies f(x)=f(y).
\]
\end{proposition}

\begin{proof}
Par définition, $f$ descend au quotient en une application $\overline f : E/\mathcal R \to F$ si et seulement si elle se factorise à droite par la surjection canonique sur le quotient $p$.
D'après la proposition \ref{prop-CNS-factorisation-droite}, c'est le cas si et seulement si $f$ est constante sur les fibres de $p$.
Or ces fibres sont exactement les classes d'équivalences de $\mathcal R$.
\end{proof}

% référer aux lemmes de factorisation généraux dans "applications"










\section{Exercices d'approfondissement}

% cloture transitive, réflexive, façons de symétriser une relation etc etc. Relations asymétriques, pré-odres

Les définitions introduites dans les exercices suivants ne sont pas exigibles à l'examen, mais la plupart sont très classiques : on les retrouve dans la plupart des cours sur le sujet (qui peuvent aussi être des cours d'informatique).

\begin{exercice}[Union et intersection de deux relations]\label{exo-union-intersection-relations}
Soient $\mathcal R$ et $\mathcal S$ deux relation sur $E$. On définit la disjonction (ou union), notée $\mathcal R \vee \mathcal S$, par:
\[ x (\mathcal R \vee \mathcal S) y \iff (x \mathcal R y\text{ ou } x \mathcal S y)\]
De façon équivalente, le graphe de $\mathcal R \vee \mathcal S$ est l'union des graphes de $\mathcal R$ et de $\mathcal S$.

De même, on définit la conjonction (ou intersection) $\mathcal R \wedge \mathcal S$ comme la relation dont le graphe est l'intersection des deux graphes de $\mathcal R$ et $\mathcal S$.


\begin{enumerate}
\item Soient $\mathcal R$ et $\mathcal S$ deux relation sur $E$. Montrer que $\mathcal R \vee \mathcal S$ et $\mathcal R \wedge \mathcal S$ sont symétriques.
\item Si $\mathcal R$ et $\mathcal S$ sont réflexives et transitives, montrer que $\mathcal R \wedge \mathcal S$ est une relation d'équivalence, mais pas forcément $\mathcal R \vee \mathcal S$.
\end{enumerate}
\end{exercice}

%\begin{exercice}[Clôture réflexive]
%Soit $\mathcal R$ une relation sur $E$. Sa clôture réflexive est la relation dont le graphe est $\Gamma_\mathcal R \cup \Delta_E$. 
%\end{exercice}

%\begin{exercice}[Clôture symétrique]
%Soit $\mathcal R$ une relation sur $E$. Sa clôture symétrique est la relation dont le graphe est $\Gamma_\mathcal R \cup \Gamma_{\mathcal R^t}$. 
%\end{exercice}

\begin{exercice}[Produit de deux relations]
Soient $\mathcal R$ et $\mathcal S$ deux relations sur $E$. Leur \emph{produit}, noté $\mathcal R \mathcal S$, est la relation binaire définie par:
\[ \forall x,y\in E, x \mathcal R \mathcal S y 
\iff \exists a\in E, \: (x \mathcal R a \text{ et } a \mathcal S y)
\]
\begin{enumerate}
\item Prouver par un exemple qu'en général, les relations $\mathcal R \mathcal S$ et $\mathcal S \mathcal R$ sont distinctes.
\item Montrer que le produit de relations est néanmoins associatif, autrement dit si $\mathcal R$, $\mathcal S$ et $\mathcal T$ sont trois relations, on a 
\[ (\mathcal R \mathcal S) \mathcal T = \mathcal R (\mathcal S \mathcal T)\]
\end{enumerate}
\end{exercice}

\begin{exercice}[Clôture transitive]
Soit $\mathcal R$ une relation sur $E$. Pour $n\in \N$ et $\mathcal R$ est une relation sur $E$, on définit alors par récurrence la relation $\mathcal R^n$ (en définissant $\mathcal R^0$ comme l'égalité).

Montrer que toutes les relations suivantes sont égales:
\begin{enumerate}
\item $\bigvee_{n\geq 0} \mathcal R^n$;
\item la relation dont le graphe est $\bigcup_{n\geq 0} \Gamma_{\mathcal R^{n}}$;
\item la relation dont le graphe est l'intersection de tous les graphes de relations transitives qui contiennent $\Gamma_{\mathcal R}$.
\item la plus fine relation  parmi toutes les relations transitives moins fines que $\mathcal R$.
\end{enumerate}

Cette relation binaire (qui est donc transitive) est appelée \emph{clôture transitive} de $\mathcal R$.
Montrer que si $\mathcal R$ est symétrique (resp. réflexive), sa clôture transitive l'est également.
\end{exercice}



\begin{exercice}
Soit $E$ l'ensemble des couples de la forme $(I,f)$, où $I$ est un intervalle de $\R$ et $f$ est une fonction de $I$ dans $\R$.

La relation $\preceq$ sur $E$ est définie par 
\[ (I,f)~\preceq~(J,g) ~\iff~ (I\subseteq J \text{ et } f=g|_I).\]
Montrer qu'il s'agit d'une relation d'ordre.
\end{exercice}

\dotfill

\begin{exercice}[Pré-ordre]
Une relation binaire est appelée un \emph{pré-ordre} si elle est réflexive et transitive. (Ainsi les relations d'ordre et d'équivalence sont donc toutes deux des cas particuliers de pré-ordres.) Un ensemble muni d'une telle relation est dit \emph{pré-ordonné}.

Soit $(E,\leftarrow)$ un ensemble pré-ordonné. On définit la relation binaire $\mathcal R$ comme suit : 
\[ \forall x, y \in E, \: x\mathcal R y \iff (x\leftarrow y \text{ et } y\leftarrow x)\]
%c'est l'intersection de R et de sa transposée : la symétrisation

Montrer que $\mathcal R$ est une relation d'équivalence sur $E$.
\end{exercice}


\begin{exercice}[germes de fonctions]
\newcommand\memegerme{\operatorname{\underset{{\scriptscriptstyle\mathcal V(0)}}{=}}}
Soit $E=\R^\R$ l'ensemble des fonctions de $\R$ dans $\R$ et $f, g\in E$. On dit que $f$ et $g$ sont égales au voisinage de zéro, ou bien que $f$ et $g$ ont même germe en zéro, et on note $f \memegerme g$ si:
\[  \exists \epsilon>0, f|_{]-\epsilon,\epsilon[} = g|_{]-\epsilon,\epsilon[} \]
\begin{enumerate}
\item Montrer que $\memegerme$ est une relation d'équivalence sur $E$.
\item Montrer  que si $f \memegerme g$ alors $f(0)=g(0)$, mais que la réciproque est fausse.
\item Montrer également que pour tout $a\in \R^*$, il existe deux fonctions $f$ et $g$ avec $f \memegerme g$ et $f(a)\neq g(a)$.
\end{enumerate}

La classe d'équivalence d'une fonction $f$ pour cette relation d'équivalence s'appelle le \emph{germe de $f$ en zéro}.

Attention, cette relation d'équivalence n'est \textbf{pas} l'équivalence en zéro introduite dans le cours d'analyse (chapitre sur les relations de comparaison : domination, prépondérance, équivalence).
\end{exercice}



\begin{exercice}
Soit $f : E\to F$, soit $\equiv_f$ la relation d'équivalence sur $E$ dont les classes d'équivalence sont les fibres de $f$, et soit $Q = E/\equiv_f$ l'ensemble quotient. 

\begin{enumerate}
\item Montrer que $f$ passe au quotient en une application $\bar f : Q\to F$ qui est injective.
\item Montrer qu'une relation d'équivalence $\mathcal R$ sur $E$ est plus fine que $\equiv_f$ si et seulement si $f$ passe au quotient par $\mathcal R$.
\item En déduire quelles sont les relations d'équivalence les plus et moins fines telles que $f$ passe au quotient par $\mathcal R$.
\end{enumerate}
\end{exercice}

\begin{exercice}[Coégalisateur]\index{coégalisateur}\index{propriété universelle!du coégalisateur}
Soient $A$ et $B$ deux ensembles et $f$ et $g$ deux applications entre $A$ et $B$. On définit sur $B$ la relation binaire suivante : $\mathcal R$ est la relation d'équivalence la plus fine telle que $\forall a\in A, f(a)\mathcal R g(a)$. Le \emph{coégalisateur de $f$ et $g$} est par définition l'ensemble quotient $C = B/\mathcal R$. On note $\pi : B \to C$ la surjection canonique sur le quotient. On a alors $\pi\circ f = \pi \circ g$, ce que l'on peut résumer par le fait que le diagramme suivant commute:
\[
\xymatrix{
 A\ar@/^/[r] ^{f} \ar@/_/[r]_{g} & B \ar[r]^{\pi} & C
}
\]
Montrer que $C$ et $\pi$ vérifient la propriété suivante (dite \emph{propriété universelle du coégalisateur}):
\begin{quote}
Pour tout ensemble $X$ et application $\phi : B \to X$ vérifiant $\phi\circ f = \phi\circ g$,  il existe une unique application $h : C\to X$ telle que $\phi = h \circ \pi $. Autrement dit, il existe une unique application $h : C\to X$ faisant commuter le diagramme 
\[
\xymatrix{
 A\ar@/^/[r] ^{f} \ar@/_/[r]_{g} & B \ar[r]^{\pi} \ar[d]^{\phi}& C\ar@{-->}[dl]^{\exists!h}\\
 & X & 
}
\]
\end{quote}
\end{exercice}



% (co) produits cofibrés

\begin{exercice}[Somme amalgamée / coproduit fibré]
Soient $A$,  $B$ et $C$  des ensembles et $f :  C\to A$, $g : C\to B$ des applications.

Soit $A\coprod B$ le coproduit de $A$ et $B$ (aussi appelé somme disjointe, et défini dans l'exercice \ref{exo-coproduit}), et $i_A$ et $i_B$ les injections canoniques de $A$ et $B$ dans $A\coprod B$. On peut considérer le diagramme suivant
\[ 
\xymatrix{
&A \ar[dr]_{i_A} &   \\
C\ar[ur]^f\ar[dr]_g& &  A\coprod B    \\
& B \ar[ur]^{i_B} & 
}\]
Mais ce diagramme n'est \textbf{pas commutatif}. Le coproduit fibré (ou somme amalgamée) résout ce problème en \og identifiant les parties de $A$ et $B$ qui proviennent du même endroit dans $C$\fg{}.


Les deux applications $i_A \circ f$ et $i_B \circ g$ vont toutes deux de $C$ dans $A\coprod B$.  Leur coégalisateur est appelé le \emph{coproduit fibré (ou somme amalgamée) de $A$ et $B$  sous $C$}, est noté $A\coprod_C B$. La surjection canonique  $A\coprod B \to A\coprod_C B$ est notée $\pi$ et on note $j_A = \pi \circ i_A$ et $j_B = \pi \circ i_B$. On a donc un diagramme (qui est cette fois commutatif par définition d'un coégalisateur):
\[ 
\xymatrix{
&A \ar[dr]_{j_A} &   \\
C\ar[ur]^f\ar[dr]_g& &  A\coprod_C B    \\
& B \ar[ur]^{j_B} & 
}\]

Montrer que $A\coprod_C B$ vérifie la propriété universelle suivante:
\begin{quote}
Pour tout ensemble  $D$ muni d'applications $\phi : A\to D$ et $\psi : B\to D$, il existe une unique application $h : A\coprod_C B \to D$ telle que $\phi = h\circ j_A$ et $\psi = h\circ j_B$, autrement dit il existe une unique application $h$ faisant commuter le diagramme  suivant:
\[ 
\xymatrix{
&A \ar[dr]_{j_A} \ar[drrr]^{\phi}& & & \\
C\ar[ur]^f\ar[dr]_g& &  A\coprod_C B \ar@{-->}[rr]^{\exists !h}  & & D\\
& B \ar[ur]^{j_B} \ar[urrr]_{\psi}& & &
}\]
\end{quote}
\end{exercice}

